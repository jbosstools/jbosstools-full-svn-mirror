<project>
	<loadproperties srcFile="build.properties"/>

	<property name="jbpmDownloadTo" value="${jbpmInstallDir}"/>
		
	<target name="build.requirement">
		
		<property name="jbpmArchiveName"
			value="jbpm-${jbpmBuildID}.zip"/>
				
		<available file="${jbpmDownloadTo}/${jbpmArchiveName}" property="archiveExists"/>
		<available file="${jbpmInstallDir}/jbpm-${jbpmBuildID}" property="isUnzipped"/>
		
		<runtarget target="getJbpm"/>
		<runtarget target="unzipJbpm"/>
		
		<echo file="return.properties">
			jbpm-core-dir=${jbpmInstallDir}/jbpm-${jbpmBuildID}
			jbpm.version=${jbpmBuildID}
		</echo>
		
	</target>
	
	<target name="getJbpm" unless="archiveExists">
		<get src="${jbpmURL}/${jbpmArchiveName}" dest="${jbpmDownloadTo}/${jbpmArchiveName}"/>
	</target>

	<target name="unzipJbpm" unless="isUnzipped">
		<unzip src="${jbpmDownloadTo}/${jbpmArchiveName}" dest="${jbpmInstallDir}"/>	
	</target>
</project>
