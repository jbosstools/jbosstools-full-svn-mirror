<?xml version="1.0" encoding="UTF-8"?>
<chapter id="esb_support">
        <?dbhtml filename="esb_support.html"?>
        <chapterinfo>
                <keywordset>
                        <keyword>JBoss Developer Studio</keyword>
                        <keyword>Eclipse</keyword>
                        <keyword>ESB</keyword>
                        <keyword>Java</keyword>
                        <keyword>JBoss</keyword>
                </keywordset>
        </chapterinfo>

        <title>ESB Support</title>

        <para>In this section we will focus on all concepts that <property>JBoss Tools</property>
                integrate for working with JBoss ESB.</para>

        <section>
                <title>ESB Tools Installation</title>

                <para>This chapter will provide you with the information on how to install
                        JBoss ESB plugin into Eclipse.</para>

                <para>ESB Tools come as one module of JBoss Tools project. Since ESB Tools have a
                        dependence on other JBoss Tools modules we recommend you to install a bundle
                        of all <ulink url="http://labs.jboss.com/tools/download/index.html">JBoss
                                Tools plug-ins</ulink>. You can find all  necessary installation instructions on JBoss Wiki in the <ulink url="http://labs.jboss.com/wiki/InstallingJBossTools"
                                >InstallingJBossTools</ulink> section.</para>
        </section>

		 <section>
                <title>Creating a ESB Project</title>
                <para>In this chapter we suggest a step-by-step walk-through of creating a new
                        ESB project. Let&apos;s try to create a new JBoss ESB project.</para>

                <para>We will show you how to use the ESB Project Creation wizard for creating a new ESB project and setting basic ESB classpath.</para>

                <para>Select <emphasis>
                                <property>File &gt;New &gt; Project...</property>
                        </emphasis> in the main menu bar or context menu for selected project and
                        then <emphasis>
                                <property>ESB &gt; ESB Project</property>
                        </emphasis> in the dialog opened:</para>

                <figure>
                        <title>Select a Wizard dialog</title>
                        <mediaobject>
                                <imageobject>
                                        <imagedata fileref="images/esb_project/01_create_esb_project.png"/>
                                </imageobject>
                        </mediaobject>
                </figure>

                <para> Clicking <emphasis>
                                <property>Next</property>
                        </emphasis> brings you to the JBoss ESB Project wizard page where a project name, ESB version and target JBoss Runtime are to be specified. Specify, for example, <emphasis>
                                <property>helloworld</property>
                        </emphasis> as a Project name and accept the default ESB version.</para>
                <figure>
                        <title>JBoss ESB Project wizard</title>
                        <mediaobject>
                                <imageobject>
                                        <imagedata fileref="images/esb_project/02_create_esb_project.png"/>
                                </imageobject>
                        </mediaobject>
                </figure>

				<para> Clicking <emphasis>
                                <property>Next</property>
                        </emphasis> brings you to the ESB facet installation page where you can 
                        specify Java Source Directory and ESB Content Directory. ESB Content Directory is a folder that contains the most of
                         artifacts that an ESB archive needs. You also can configure ESB libraries to the project by selecting a ESB runtime using one of the options:,
                        </para>
                         <para>1. Use <emphasis>
                                <property>Server Supplied ESB Runtime</property>
                        </emphasis>  
                         
                         </para>
                         <para> 2. Select a ESB runtime from the JBoss ESB runtime list predefined in the preferences                           
                         </para>
                         <para>If you choose the first option, make sure that the project has the Target JBoss Runtime set and this runtime has a ESB runtime installed.
                         </para>
                <figure>
                        <title>Install ESB facet step</title>
                        <mediaobject>
                                <imageobject>
                                        <imagedata fileref="images/esb_project/03_create_esb_project.png"/>
                                </imageobject>
                        </mediaobject>
                </figure>
                <para>Click <emphasis>
                                <property>Finish</property>
                        </emphasis> and a ESB project with the default <emphasis><property>jboss-esb.xml</property></emphasis> 
                              will be created. </para>

                     <figure>
                        <title>The generated ESB project structure</title>
                        <mediaobject>
                                <imageobject>
                                        <imagedata fileref="images/esb_project/04_create_esb_project.png"/>
                                </imageobject>
                        </mediaobject>
                </figure>
                
        </section>
        
 <section>
                <title>Creating ESB Project using JBoss Tools Project Examples Wizard</title>
                <para>JBoss Tools provides a Project Example wizard that is an easy way for users to create some kinds of projects to be used as examples with some predefined structure. Let's start 
                creating a ESB project using this wizard.</para>
                
                <para>Before creating a ESB project example create JBoss Runtime with name <emphasis><property>
                JBoss 4.2 Runtime</property></emphasis>, it will be used by your ESB project example. </para>

                <para>Select <emphasis>
                                <property>File &gt;New &gt; Others </property>
                        </emphasis> , in the main menu bar or context menu for selected project and
                        then <emphasis>
                                <property>JBoss Tools &gt; Project Examples</property>
                        </emphasis> in the New dialog:</para>

                <figure>
                        <title>Select a wizard - Project Examples</title>
                        <mediaobject>
                                <imageobject>
                                        <imagedata fileref="images/esb_project/05_esb_project_example.png"/>
                                </imageobject>
                        </mediaobject>
                </figure>

				<para> Clicking <emphasis>
                                <property>Next</property>
                        </emphasis> brings you to the wizard page where you can select a ESB project example from the example list.
                         Every ESB example has two projects, one is a ESB project and another is a Java project used to test the ESB project.</para>
                <figure>
                        <title>JBoss Tools ESB Project Examples</title>
                        <mediaobject>
                                <imageobject>
                                        <imagedata fileref="images/esb_project/06_esb_project_example.png"/>
                                </imageobject>
                        </mediaobject>
                </figure>

				<para>Select <emphasis><property>JBoss ESB HelloWorld Example</property> </emphasis> ESB and Client project, and then click 
				<emphasis><property>Finish</property></emphasis>, then you will get two projects created. </para>
				                <figure>
                        <title>JBoss ESB Project Examples: helloworld and helloworld_testclient</title>
                        <mediaobject>
                                <imageobject>
                                        <imagedata fileref="images/esb_project/07_esb_project_example.png"/>
                                </imageobject>
                        </mediaobject>
                </figure>
                
                <para> Deploy the HelloWorld ESB project and run a test class in the client Java project to see the test result in the Console view.</para>
        </section>

 		<section>
                <title>Deploying a ESB Project</title>
                <para>In this chapter youwill see how to deploy a ESB project using the WTP deployment framework.</para>

                <para>Before deploying the project, open the JBoss Server View by selecting <emphasis><property>Window &gt; Show View &gt; Other &gt; 
                Server &gt; JBoss Server View</property></emphasis>, 
                create a JBoss Server in the Server view and start it, and then right click the created JBoss server, 
                select <emphasis><property> </property> Add and Remove Projects</emphasis>, 
                and add the ESB projects you want to deploy from the left side to the right side in the opened dialog. </para>

                <figure>
                        <title>Add and Remove Projects</title>
                        <mediaobject>
                                <imageobject>
                                        <imagedata fileref="images/esb_project/08_esb_project_deploy.png"/>
                                </imageobject>
                        </mediaobject>
                </figure>
                
                <para>Click <emphasis><property>Finish</property> </emphasis> to add the project to the server. 
                You also can drag the ESB project from the Project View to the server.</para>
                
                 <figure>
                        <title>JBoss Server View</title>
                        <mediaobject>
                                <imageobject>
                                        <imagedata fileref="images/esb_project/09_esb_runtime_new.png"/>
                                </imageobject>
                        </mediaobject>
                </figure>
                
 		        <para>Thus, you have just added the ESB project to the JBoss server module list. Right click the JBoss Server and select <emphasis><property>Publish</property></emphasis> to publish the project on the server.
                You can check the deploying result in the Console view.</para> 
                
        </section>
		        
        <section>
                <title>Creating a ESB File</title>
                <para>In this chapter we suggest a step-by-step walk-through of creating your own
                        simple file. Let&apos;s try to organize a new ESB file.</para>

                <para>We will show you how to use the Creation wizard for creating a new ESB file.</para>

                <para>At first you should open any project. Select <emphasis>
                                <property>File &gt;New &gt; Other...</property>
                        </emphasis> in the main menu bar or context menu for selected project and
                        then <emphasis>
                                <property>ESB &gt; ESB File</property>
                        </emphasis> in the New dialog:</para>

                <figure>
                        <title>Select a wizard - ESB File</title>
                        <mediaobject>
                                <imageobject>
                                        <imagedata fileref="images/esb_support/01_create_esb.png"/>
                                </imageobject>
                        </mediaobject>
                </figure>

                <para> Clicking <emphasis>
                                <property>Next</property>
                        </emphasis> brings you to the wizard page where a folder, a name and a version for the file should be specified. Choose, for example, <emphasis>
                                <property>jboss-esb.xml</property>
                        </emphasis> as the name and accept the selected projects folder and the default
                        version.</para>
                <figure>
                        <title>Folder, Name and Version for ESB file</title>
                        <mediaobject>
                                <imageobject>
                                        <imagedata fileref="images/esb_support/02_create_esb.png"/>
                                </imageobject>
                        </mediaobject>
                </figure>

                <para>Thus, your file will be created in the selected projects folder by default. If
                        you want to change the folder for your future file click <emphasis>
                                <property>Browse...</property>
                        </emphasis> button to set needed folder or simply type it.</para>

                <para>Clicking on <emphasis>
                                <property>Finish</property>
                        </emphasis> results in the file being generated. The wizard creates one xml
                        file.</para>

        </section>
        
         <section>
                <title>Configuring ESB Runtime in Preference</title>
                <para>In this chapter you will know how to predefine a JBoss ESB runtime on the Preferences page.</para>

                <para>You may already know, there are two ways to set JBoss ESB runtime when creating a ESB project,
                one is to use the project target JBoss runtime, and another is to select a JBoss ESB runtime predefined in JBoss Tools preferences.
                Let's configure it.</para>

                <para>Select <emphasis>
                                <property>Window &gt;Preferences &gt; JBoss Tools  &gt; JBoss ESB Runtime</property>
                        </emphasis>, to open the JBoss ESB Runtime Preferences page where you can add, remove and Edit a JBoss ESB runtime.</para>

                <figure>
                        <title>JBoss ESB Runtimes</title>
                        <mediaobject>
                                <imageobject>
                                        <imagedata fileref="images/esb_project/10_esb_runtime.png"/>
                                </imageobject>
                        </mediaobject>
                </figure>

				<para> Select <emphasis><property>Add</property></emphasis> to open a dialog where you can specify the JBoss ESB runtime location, name and version number. 
                         You also can customize the libraries of the runtime by checking the <emphasis><property>Customize JBoss ESB Runtime jars</property> </emphasis> checkbox. </para>
                        
                <figure>
                        <title>Configure new JBoss ESB Runtime</title>
                        <mediaobject>
                                <imageobject>
                                        <imagedata fileref="images/esb_project/11_esb_runtime_new.png"/>
                                </imageobject>
                        </mediaobject>
                </figure>

				<para>The new JBoss ESB Runtime will be configured. Click <emphasis> <property>OK</property> </emphasis> to finish and save the preferences.
				 You can use the configuration when creating a JBoss ESB project. </para>
                
        </section>

</chapter>
