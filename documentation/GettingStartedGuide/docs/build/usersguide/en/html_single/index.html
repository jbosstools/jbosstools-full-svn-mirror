<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Getting Started with Red Hat Developer Studio</title><link rel="stylesheet" href="css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="book" lang="en"><div class="titlepage"><div><div><h1 class="title"><a name="d0e1"></a>Getting Started with Red Hat Developer Studio</h1></div><div><p class="copyright">Copyright &copy; 2007 Red Hat</p></div></div><div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#GettingStartedWithRHDS">1. Getting Started with Red Hat Developer Studio</a></span></dt><dd><dl><dt><span class="section"><a href="#TechnicalRequirements">1.1. Technical Requirements</a></span></dt><dd><dl><dt><span class="section"><a href="#Java">1.1.1. Java</a></span></dt><dt><span class="section"><a href="#OperatingSystems">1.1.2. Operating Systems</a></span></dt></dl></dd><dt><span class="section"><a href="#Installing">1.2. Installing</a></span></dt><dd><dl><dt><span class="section"><a href="#Inst from down ver">1.2.1. Installing from the downloaded version</a></span></dt><dt><span class="section"><a href="#InstallingthroughTheUpdateSite">1.2.2. Installing through the update Site</a></span></dt></dl></dd><dt><span class="section"><a href="#RunningForTheFirstTime">1.3. Running for the First Time</a></span></dt><dt><span class="section"><a href="#Upgrading">1.4. Upgrading</a></span></dt><dt><span class="section"><a href="#Uninstalling">1.5. Uninstalling</a></span></dt><dt><span class="section"><a href="#Subscription">1.6. Subscription</a></span></dt><dt><span class="section"><a href="#Support">1.7. Support</a></span></dt></dl></dd><dt><span class="chapter"><a href="#GettingStartedForCreatingAJSFApplication">2. Getting Started Guide for
Creating a JSF Application</a></span></dt><dd><dl><dt><span class="section"><a href="#CreatingAJSFApplication">2.1. Creating a Simple JSF Application</a></span></dt><dt><span class="section"><a href="#SettingUpTheProject">2.2. Setting Up the Project</a></span></dt><dt><span class="section"><a href="#TheJSFApplicationConfigurationFile">2.3. The JSF Application Configuration File</a></span></dt><dt><span class="section"><a href="#AddingNavigationToTheApplication">2.4. Adding Navigation to the Application</a></span></dt><dd><dl><dt><span class="section"><a href="#AddingTwoViews(JSPPages)">2.4.1. Adding Two Views (JSP Pages)</a></span></dt><dd><dl><dt><span class="section"><a href="#CreatingTheTransition(NavigationRule)">2.4.1.1. Creating the Transition (Navigation Rule)</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="#AddingAManagedBeanToTheApplication">2.5. Adding a Managed Bean to the Application</a></span></dt><dt><span class="section"><a href="#EditingTheJSPViewFiles">2.6. Editing the JSP View Files</a></span></dt><dd><dl><dt><span class="section"><a href="#Inputname.jsp">2.6.1. inputname.jsp</a></span></dt><dt><span class="section"><a href="#Greeting.jsp">2.6.2. greeting.jsp</a></span></dt></dl></dd><dt><span class="section"><a href="#CreatingTheStartPage">2.7. Creating the Start Page</a></span></dt><dt><span class="section"><a href="#RunningTheApplicationJSF">2.8. Running the Application</a></span></dt></dl></dd><dt><span class="chapter"><a href="#GettingStartedGuideforCreatingaStrutsApplication">3. Getting Started Guide for Creating a Struts Application</a></span></dt><dd><dl><dt><span class="section"><a href="#StartingUp">3.1. Starting Up</a></span></dt><dt><span class="section"><a href="#CreatingtheApplicationComponents">3.2. Creating the Application Components</a></span></dt><dd><dl><dt><span class="section"><a href="#CreatingJSPPagePlaceholders">3.2.1. Creating JSP Page Placeholders</a></span></dt><dd><dl><dt><span class="section"><a href="#CreatingthePagePlaceholders">3.2.1.1. Creating the Page Placeholders</a></span></dt><dt><span class="section"><a href="#PlacingthePagePlaceholders">3.2.1.2. Placing the Page Placeholders</a></span></dt></dl></dd><dt><span class="section"><a href="#CreatinganActionMappings">3.2.2. Creating an Action Mappings</a></span></dt><dt><span class="section"><a href="#CreatingaLink">3.2.3. Creating a Link</a></span></dt><dt><span class="section"><a href="#CreatingaForward">3.2.4. Creating a Forward</a></span></dt><dt><span class="section"><a href="#CreatingaGlobalForward">3.2.5. Creating a Global Forward</a></span></dt><dt><span class="section"><a href="#CreatingaFormBean">3.2.6. Creating a Form Bean</a></span></dt></dl></dd><dt><span class="section"><a href="#GeneratingStubCoding">3.3. Generating Stub Coding</a></span></dt><dt><span class="section"><a href="#CodingtheVariousFiles">3.4. Coding the Various Files</a></span></dt><dd><dl><dt><span class="section"><a href="#JavaStubClasses">3.4.1. Java Stub Classes</a></span></dt><dd><dl><dt><span class="section"><a href="#GetNameForm.java">3.4.1.1. GetNameForm.java</a></span></dt><dt><span class="section"><a href="#GreetingAction.java">3.4.1.2. GreetingAction.java</a></span></dt></dl></dd><dt><span class="section"><a href="#JSPPages">3.4.2. JSP Pages</a></span></dt><dd><dl><dt><span class="section"><a href="#inputname.jsp">3.4.2.1. inputname.jsp</a></span></dt><dt><span class="section"><a href="#greeting.jsp">3.4.2.2. greeting.jsp</a></span></dt><dt><span class="section"><a href="#index.jsp">3.4.2.3. index.jsp</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="#CompilingtheClasses">3.5. Compiling the Classes</a></span></dt><dt><span class="section"><a href="#RunningtheApplication">3.6. Running the Application</a></span></dt></dl></dd><dt><span class="chapter"><a href="#GettingStartedStrutsValidationExamples">4. Getting Started Struts Validation Examples</a></span></dt><dd><dl><dt><span class="section"><a href="#StartingPoint">4.1. Starting Point</a></span></dt><dt><span class="section"><a href="#DefiningTheValidationRule">4.2. Defining the Validation Rule</a></span></dt><dt><span class="section"><a href="#Client-SideValidation">4.3. Client-Side Validation</a></span></dt><dt><span class="section"><a href="#Server-SideValidation">4.4. Server-Side Validation</a></span></dt><dt><span class="section"><a href="#EditingTheJSPFile">4.5. Editing the JSP File</a></span></dt><dt><span class="section"><a href="#EditingTheAction">4.6. Editing the Action</a></span></dt><dt><span class="section"><a href="#EditingTheFormBean">4.7. Editing the Form Bean</a></span></dt></dl></dd><dt><span class="chapter"><a href="#GettingStartedGuideforJSFwithHibernate">5. Getting Started Guide for JSF with Hibernate</a></span></dt><dd><dl><dt><span class="section"><a href="#InstallingTheProject">5.1. Installing the Project</a></span></dt><dt><span class="section"><a href="#RunningWithoutADatabase">5.2. Running Without a Database</a></span></dt><dt><span class="section"><a href="#ConvertingforUseWithaDatabase">5.3. Converting for Use With a Database</a></span></dt><dt><span class="section"><a href="#SettingUpTheApplication">5.4. Setting up the Application</a></span></dt><dt><span class="section"><a href="#EditTheHibernateConfiguration">5.5. Edit the Hibernate Configuration</a></span></dt><dt><span class="section"><a href="#EdittheMappingFile">5.6. Edit the Mapping File</a></span></dt><dt><span class="section"><a href="#AddAGeneralClassForIncorporatingHibernate">5.7. Add a General Class for Incorporating Hibernate</a></span></dt><dt><span class="section"><a href="#EdittheTwoBeanClasses">5.8. Edit the Two Bean Classes</a></span></dt><dt><span class="section"><a href="#SettinguptheDatabase">5.9. Setting up the Database</a></span></dt><dt><span class="section"><a href="#CreatingtheDatabaseTable">5.10. Creating the Database Table</a></span></dt><dt><span class="section"><a href="#MakingTheDatabaseAvailableForTheApplication">5.11. Making the Database Available for the Application</a></span></dt><dt><span class="section"><a href="#SettinguptheApplicationServer">5.12. Setting up the Application Server</a></span></dt><dt><span class="section"><a href="#RunningOurNewApplication">5.13. Running Our New Application</a></span></dt></dl></dd></dl></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="GettingStartedWithRHDS"></a>Chapter&nbsp;1.&nbsp;Getting Started with Red Hat Developer Studio</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="TechnicalRequirements"></a>1.1.&nbsp;Technical Requirements</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="Java"></a>1.1.1.&nbsp;Java</h3></div></div><div></div></div><p>Before installing Red Hat Developer Studio, make sure you have one of the following versions of Java 
    installed:</p><div class="itemizedlist"><ul type="disc"><li><p>JDK 1.4.2 or higher</p></li></ul></div><p>It must be the full JDK, not just the JRE (Java Runtime Environment). For more information about 
    target operating environments and compatible Java versions, refer to the JBoss web site. Please note
    that the Eclipse documentation states that you only need a Java Runtime Environment for Eclipse, but usage of Red Hat Developer Studio requires a full JDK in order to compile Java classes and JSP pages.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="OperatingSystems"></a>1.1.2.&nbsp;Operating Systems</h3></div></div><div></div></div><div class="itemizedlist"><ul type="disc"><li><p>Windows</p></li><li><p>Linux</p></li></ul></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Installing"></a>1.2.&nbsp;Installing</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="Inst from down ver"></a>1.2.1.&nbsp;Installing from the downloaded version</h3></div></div><div></div></div><div class="itemizedlist"><ul type="disc"><li><p>Download the appropriate installation file for your platform from www.exadel.com/web/portal/download.</p></li><li><p>Run install.jar and follow the instructions presented by the installation wizard.</p></li></ul></div><div class="figure"><a name="d0e67"></a><div class="mediaobject"><img src="images/install.png" alt="Red Hat Developer Studio Installation Wizard"></div><p class="title"><b>Figure&nbsp;1.1.&nbsp;Red Hat Developer Studio Installation Wizard</b></p></div><p>After installation process you will have all required platforms to run Red Hat Developer Studio:</p><div class="itemizedlist"><ul type="disc"><li><p>Eclipse 3.2.2</p></li><li><p>JBoss Application Server</p></li></ul></div><p>Red Hat Developer Studio comes with the following plug-ins:</p><div class="itemizedlist"><ul type="disc"><li><p>WTP runtime 1.5</p></li><li><p>GEF runtime 3.2</p></li><li><p>JEM runtime 1.2</p></li><li><p>EMF and SDO runtime 2.2</p></li><li><p>XSD runtime 2.2</p></li><li>Hibernate-tools-3.1.0 beta5 (without WTP, EMF, GEF, and other non-Hibernate plug-ins from 
     Hibernate-tools-3.1.0 beta5)</li><li><p>QuickImage 0.2.0</p></li><li><p>Spring IDE 1.3.2</p></li><li><p>Sun Glassfish 0.3</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="InstallingthroughTheUpdateSite"></a>1.2.2.&nbsp;Installing through the update Site</h3></div></div><div></div></div>
   TBD
  </div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="RunningForTheFirstTime"></a>1.3.&nbsp;Running for the First Time</h2></div></div><div></div></div><div class="itemizedlist"><ul type="disc"><li><p> Launch Eclipse</p></li><li><p> Select Window/Open Perspective.../Other...</p></li><li><p> Select Red Hat Developer Studio from the perspective list</p></li></ul></div><p>We recommend starting Eclipse with VM arguments to make more memory (heap) available for large-scale projects. Open the file &lt;eclipse&gt;\eclipse.ini and set the following:</p><p>eclipse -clean -vmargs -Xms512m -Xmx512m -XX:MaxPermSize=128m</p><p>This setting will allow the Java heap to grow to 512MB.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Upgrading"></a>1.4.&nbsp;Upgrading</h2></div></div><div></div></div><p>To upgrade, just uninstall your current version and install the new version.</p><div class="itemizedlist"><ul type="disc"><li><p> Make sure Eclipse is not running.</p><p>Uninstall your current version of Exadel Studio. You can do one of the following:</p></li><li><p>Run the Red Hat Developer Studio uninstaller</p></li><li><p>Delete the file {EclipseHome}/links/com.exadel.studio.link</p><p>Either method will uninstall Exadel Studio.</p></li><li>Start Eclipse:
     <p>eclipse -clean</p></li></ul></div><div class="itemizedlist"><ul type="disc"><li><p>Close Eclipse</p></li><li><p>Install the new version of Red Hat Developer Studio.</p></li><li>After installation, start Eclipse with the -clean option:
     <p>eclipse -clean</p></li></ul></div><p>This step is very important as it will clear the Eclipse cache of the old uninstalled plug-in.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note:</h3><p>It is recommended to uninstall Red Hat Developer along with Eclipse and install Red Hat Developer 
     Studio into a new clean Eclipse</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Uninstalling"></a>1.5.&nbsp;Uninstalling</h2></div></div><div></div></div><p> Make sure Eclipse is not running.</p><p> Uninstall your current version of Red Hat Developer Studio. You can do one of the following:</p><div class="itemizedlist"><ul type="disc"><li><p>Run the Red Hat Developer Studio uninstaller</p></li><li><p>Delete the file {EclipseHome}/links/com.exadel.studio.link</p><p>Either method will uninstall Red Hat Developer Studio.</p></li></ul></div><div class="itemizedlist"><ul type="disc"><li><p>Start Eclipse with the -clean option:</p><p>eclipse -clean</p></li></ul></div><p>This step is very important as it will clear the Eclipse cache of the uninstalled plug-in.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Subscription"></a>1.6.&nbsp;Subscription</h2></div></div><div></div></div>
   TBD
  </div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Support"></a>1.7.&nbsp;Support</h2></div></div><div></div></div><p>If you have comments or questions, you can send them to 
    <a href="mailto:support@exadel.com" target="_top">support@exadel.com</a> or 
    <a href="http://www.jboss.com/index.html?module=bb&amp;op=viewforum&amp;f=258" target="_top">Red Hat Developer Studio Forum</a>.</p><p>When writing to support, please include the following information:</p><div class="itemizedlist"><ul type="disc"><li><p>Eclipse version</p></li><li><p> Red Hat Developer Studio version</p></li><li><p>Exact error message</p></li><li><p>Exact steps you took to get the error</p></li></ul></div></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="GettingStartedForCreatingAJSFApplication"></a>Chapter&nbsp;2.&nbsp;Getting Started Guide for
Creating a JSF Application</h2></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="CreatingAJSFApplication"></a>2.1.&nbsp;Creating a Simple JSF Application</h2></div></div><div></div></div><p>We are going to show you how to create a simple JSF application using the Red Hat Developer Studio
 plug-in for Eclipse. The completed application will ask a user to enter a name and click
a button. The resulting new page will display the familiar message, "Hello &lt;name&gt;!"
This document will show you how to create such an application from the beginning, along
the way demonstrating some of the powerful features of Red Hat Developer Studio. You will design the
JSF application and then run the application from inside Red Hat Developer Studio.
We'll assume that you have already launched Eclipse with Red Hat Developer Studio installed and
also that the Red Hat Developer Studio perspective is the current perspective. (If not, make it active by
selecting Window/Open Perspective/Red Hat Developer Studio from the menu bar or by selecting Window/
Open Perspective/Other... from the menu bar and then selecting Red Hat Developer Studio from
the Select Perspective dialog box.)</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="SettingUpTheProject"></a>2.2.&nbsp;Setting Up the Project</h2></div></div><div></div></div><p>We are first going to create a new project for the application.</p><div class="orderedlist"><ol type="1"><li><p>Go to the menu bar and select File/New/Project... .</p></li><li><p>Select Red Hat Developer Studio/JSF Project in the New Project dialog box.</p></li><li><p>Click Next</p></li><li><p>Enter jsfHello as the project name.</p></li><li><p>Leave everything else as is, and click Finish.</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="TheJSFApplicationConfigurationFile"></a>2.3.&nbsp;The JSF Application Configuration File</h2></div></div><div></div></div><p>A jsfHello node should appear in the upper-left Package Explorer view.</p><div class="orderedlist"><div class="figure"><a name="d0e296"></a><div class="mediaobject"><img src="img/"></div><p class="title"><b>Figure&nbsp;2.1.&nbsp;</b></p></div><ol start="6" type="1"><li><p>Click the plus sign next to jsfHello to reveal the child nodes.</p></li><li><p>Click the plus sign next to WebContent under jsfHello.</p></li><li><p>Click the plus sign next to WEB-INF under WebContent.</p></li><li><p>Then double-click on the faces-config.xml node to display the JSF application configuration file editor.</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="AddingNavigationToTheApplication"></a>2.4.&nbsp;Adding Navigation to the Application</h2></div></div><div></div></div><p>In our simple application, the flow is defined as a single navigation rule connecting two
views (presentation files). At this point, we will create the placeholders for the two JSP presentation
files and then the navigation rule to connect them as views. Later, we will complete
the coding for the JSP presentation files. With Red Hat Developer Studio, we can do all of this in the
Diagram mode of the configuration file editor.</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="AddingTwoViews(JSPPages)"></a>2.4.1.&nbsp;Adding Two Views (JSP Pages)</h3></div></div><div></div></div><div class="orderedlist"><ol start="10" type="1"><li><p>Right-click anywhere on the diagram and select New View... from the pop-up
menu</p></li><li><p>In the dialog box, type pages/inputname as the value for From-view-id</p></li><li><p>Leave everything else as is</p></li><li><p>Click Finish.</p><p>If you look in the Package Explorer view you should see a pages folder under WebContent. Opening it 
will reveal the JSP file you just created</p></li><li><p>Back on the diagram, right-click anywhere and select New View... from the popup
menu</p></li><li><p>In the dialog box, type pages/greeting as the value for From-view-id</p></li><li><p>Leave everything else as is</p></li><li><p>Click Finish</p></li></ol></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="CreatingTheTransition(NavigationRule)"></a>2.4.1.1.&nbsp;Creating the Transition (Navigation Rule)</h4></div></div><div></div></div><div class="orderedlist"><ol start="18" type="1"><li><p>In the diagram, select the connection icon third from the top along the upper left
side of the diagram</p></li></ol></div><div class="figure"><a name="d0e346"></a><div class="mediaobject"><img src="img/"></div><p class="title"><b>Figure&nbsp;2.2.&nbsp;</b></p></div><p>to get an arrow cursor with a two-pronged plug at the arrow's bottom.</p><div class="orderedlist"><ol start="19" type="1"><li><p>Click on the pages/inputname page icon and then click on the pages/greeting page icon</p></li></ol></div><p>A transition should appear between the two icons.</p><div class="figure"><a name="d0e359"></a><div class="mediaobject"><img src="img/"></div><p class="title"><b>Figure&nbsp;2.3.&nbsp;</b></p></div><div class="orderedlist"><ol start="20" type="1"><li><p>Select File/Save from the menu bar.</p></li></ol></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="AddingAManagedBeanToTheApplication"></a>2.5.&nbsp;Adding a Managed Bean to the Application</h2></div></div><div></div></div><p>To store data in the application, we will use a managed bean.</p><div class="orderedlist"><ol start="21" type="1"><li><p>Click on the Tree tab at the bottom of the editing window</p></li><li><p>Select the Managed Beans node and then click the Add... button displayed along
the right side of the editor window</p></li><li><p>Type in jsfHello.PersonBean for Class and personBean for Name. Leave
Scope as is and Generate Source Code as is (checked)</p></li><li><p>Click Finish</p></li><li><p>personBean will now be selected and three sections of information, Managed
Bean, Properties, and Advanced, will be displayed about it. Under the Properties
section, click the Add... button</p></li><li><p>For Property-Name type in name. Leave everything else as is. (When Property-
Class is not filled in, String is the assumed type.)</p></li><li><p>Click Finish</p></li><li><p>Select the personBean node in the tree</p></li></ol></div><p>You should see this now:</p><div class="figure"><a name="d0e401"></a><div class="mediaobject"><img src="img/"></div><p class="title"><b>Figure&nbsp;2.4.&nbsp;</b></p></div><div class="orderedlist"><ol start="29" type="1"><li><p>Select File/Save from the menu bar.</p></li></ol></div><p>You have now registered the managed bean and created a stub-coded class file for it.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="EditingTheJSPViewFiles"></a>2.6.&nbsp;Editing the JSP View Files</h2></div></div><div></div></div><p>Now we will finish editing the JSP files for our two "views" using Exadel's JSP Visual Page</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="Inputname.jsp"></a>2.6.1.&nbsp;inputname.jsp</h3></div></div><div></div></div><div class="orderedlist"><ol start="30" type="1"><li><p>Click on the Diagram tab for the configuration file editor</p></li><li><p>Open the editor for this first JSP file by double-clicking on the /pages/inputname.
jsp icon</p></li></ol></div><p>The Visual Page Editor will open in a screen split between source code along the top and 
a WYSIWIG view along the bottom:</p><div class="figure"><a name="d0e430"></a><div class="mediaobject"><img src="img/"></div><p class="title"><b>Figure&nbsp;2.5.&nbsp;</b></p></div><p>Some JSF code will already be in the file because we selected a template when creating the page.</p><div class="orderedlist"><ol start="32" type="1"><li><p>Select the Visual tab, so we can work with the editor completely in its WYSIWYG
mode</p></li><li><p>To the right of the editor, in the Exadel Palette, expand the JSF HTML palette folder
by selecting it</p></li></ol></div><div class="figure"><a name="d0e444"></a><div class="mediaobject"><img src="img/"></div><p class="title"><b>Figure&nbsp;2.6.&nbsp;</b></p></div><div class="orderedlist"><ol start="34" type="1"><li><p>34. Click on form within this folder, drag the cursor over to the editor, 
and drop it inside the red box in the editor</p></li><li><p>Another red box will appear inside the first red box.</p></li><li><p>Right-click on the innermost box and select &lt;h:form&gt; Attributes from the menu</p></li><li><p>In the value field next to id, type greeting and click on the Close button</p></li><li><p>Type Please enter name: inside the boxes</p></li><li><p>Select inputText within the JSF HTML palette folder and drag it into the innermost
box in the editor after "Please enter name:"</p></li><li><p>In the attributes dialog, click in the value field next to the value attribute and click
on the ... button</p></li><li><p>Then, select the Managed Beans/personBean/name node and click on the Ok
button</p></li><li><p>Back in the attributes dialog, select the Advanced tab, type in name as the value
for the id attribute, and then click on the Finish button</p></li><li><p>Select commandButton within the JSF HTML palette folder and drag it into the
innermost box in the editor after the input box</p></li><li><p>In the attributes dialog, click in the value field next to the action attribute and click
on the ... button</p></li><li><p>Then, select the View Actions/greeting node and click on the Ok button</p></li><li><p>Back in the attributes dialog box, type in Say Hello as the value for the value
attribute ("Say Hello") and then click on the Finish button</p></li></ol></div><p>The source coding should be something like this now:</p><pre class="programlisting">&lt;%@ taglib uri="http://java.sun.com/jsf/html" prefix="h" %&gt;
&lt;%@ taglib uri="http://java.sun.com/jsf/core" prefix="f" %&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;f:view&gt;
&lt;h:form id="greeting"&gt;
&lt;para&gt;Please enter a name:&lt;/para&gt;
&lt;h:inputText id="name" value="#{personBean.name}"/&gt;
&lt;h:commandButton value=" Say Hello " action="greeting"/&gt;
&lt;/h:form&gt;
&lt;/f:view&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre><p>The editor should look like this:</p><div class="figure"><a name="d0e496"></a><div class="mediaobject"><img src="img/"></div><p class="title"><b>Figure&nbsp;2.7.&nbsp;</b></p></div><div class="orderedlist"><ol start="47" type="1"><li><p>Save the file by selecting File/Save from the menu bar.</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="Greeting.jsp"></a>2.6.2.&nbsp;greeting.jsp</h3></div></div><div></div></div><div class="orderedlist"><ol start="48" type="1"><li><p>Click on the faces-config.xml tab to bring the diagram back</p></li><li><p>Open the editor for the second file by double-clicking on the /pages/greeting.jsp
icon</p></li><li><p>Select the Visual tab, so we can work with the editor completely in its WYSIWYG
mode</p></li><li><p>Type Hello (note space after hello) into the box</p></li><li><p>Select outputText within the JSF HTML palette folder and drag it into the innermost
box in the editor after "Hello"</p></li><li><p>In the attributes dialog, click in value field next to the value attribute and click on
the ... button</p></li><li><p>Then, select the Managed Beans/personBean/name node, click on the Ok button,
and then click on the Finish button</p></li><li><p>Right after the output field, type an exclamation point (!)</p></li></ol></div><p>The source coding should be something like this now:</p><pre class="programlisting">&lt;%@ taglib uri="http://java.sun.com/jsf/html" prefix="h" %&gt;
&lt;%@ taglib uri="http://java.sun.com/jsf/core" prefix="f" %&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;f:view&gt;
Hello &lt;h:outputText value="#{personBean.name}"/&gt;!
&lt;/f:view&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre><div class="orderedlist"><ol start="56" type="1"><li><p>Save the file.</p></li></ol></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="CreatingTheStartPage"></a>2.7.&nbsp;Creating the Start Page</h2></div></div><div></div></div><p>You also need to create a start page as an entry point into the application.</p><div class="orderedlist"><ol start="57" type="1"><li><p>In the Package Explorer view to the left, right-click jsfHello/WebContent and select
New/JSP File</p></li><li><p>For Name type in index, for Template select JSPRedirect and click Finish.</p></li></ol></div><p>A JSP editor will open up on the newly created file.</p><div class="orderedlist"><ol start="59" type="1"><li><p>In the Source part of the split screen, type /pages/inputname.jsf in between
the quotes for the page attribute</p></li></ol></div><p>The source coding should look like this now:</p><pre class="programlisting">&lt;!doctype html public "-//w3c//dtd html 4.0 transitional//en"&gt;
&lt;html&gt;
&lt;head&gt;&lt;/head&gt;
&lt;body&gt;
&lt;jsp:forward page="/pages/inputname.jsf" /&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre><p>Note the .jsf extension for the file name. This is a mapping defined in the web.xml file 
for the project for invoking JavaServer Faces when you run the application.</p><div class="orderedlist"><ol start="60" type="1"><li><p>Select File/Save from the menu bar.</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="RunningTheApplicationJSF"></a>2.8.&nbsp;Running the Application</h2></div></div><div></div></div><p>Everything is now ready for running our application without having to leave Red Hat Developer Studio 
by using the Tomcat engine that comes with the Red Hat Developer Studio plug-in. For controlling
Tomcat within Red Hat Developer Studio, the toolbar contains a special panel</p><div class="figure"><a name="d0e576"></a><div class="mediaobject"><img src="img/"></div><p class="title"><b>Figure&nbsp;2.8.&nbsp;</b></p></div><div class="orderedlist"><ol start="61" type="1"><li><p>Start up Tomcat by clicking on the first icon from left. (If Tomcat is already running,
stop it by clicking on the third icon from the left and then start it again. Remember,
the JSF run-time requires restarting the servlet engine when any changes have been
made.) After the messages in the Console tabbed view stop scrolling, Tomcat is available.</p></li><li><p>Click on the Red Hat run icon in the toolbar:</p></li></ol></div><div class="figure"><a name="d0e588"></a><div class="mediaobject"><img src="img/"></div><p class="title"><b>Figure&nbsp;2.9.&nbsp;</b></p></div><p>This is the equivalent of launching the browser and typing http://localhost:8080/jsfHello into your
 browser. Our JSF application should now appear.</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="GettingStartedGuideforCreatingaStrutsApplication"></a>Chapter&nbsp;3.&nbsp;Getting Started Guide for Creating a Struts Application</h2></div></div><div></div></div><p>We are going to show you how to create a simple Struts application using the Red Hat Developer Studio
plug-in for Eclipse. The completed application will ask a user to enter a name and click a button.
The resulting new page will display the familiar message, Hello &lt;name&gt;!</p><p>This document will show you how to create such an application from the beginning, along
the way demonstrating some of the powerful features of Red Hat Developer Studio. You will design the
application, generate stub code for the application, fill in the stub coding, compile the application,
and run the application all from inside Red Hat Developer Studio.</p><p>Well assume that you have already launched Eclipse with Exadel Studio or Exadel Studio
Pro installed and also that the Red Hat Developer Studio perspective is the current perspective. (If not,
make it active by selecting Window/Open Perspective/Red Hat Developer Studio from the menu bar.)</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="StartingUp"></a>3.1.&nbsp;Starting Up</h2></div></div><div></div></div><p>We are first going to create a new project for the application.</p><div class="orderedlist"><ol type="1"><li><p>Go to the menu bar and select File/New/Project... .</p></li><li><p>Select Exadel Studio/Struts/Struts Project in the New Project dialog box.</p></li><li><p>Click Next &gt;.</p></li><li><p>Enter StrutsHello as the project name.</p></li><li><p>Leave everything else as is, and click Next &gt;.</p></li><li><p>Click Next&gt; again.</p></li><li><p>7. Make sure that struts-bean.tld, struts-html.tld, and struts-logic.tld are checked in the list of included tag libraries and then click Finish.</p></li></ol></div><p>A StrutsHello node should appear in the upper-left Package Explorer view.</p><div class="orderedlist"><ol start="8" type="1"><li><p>Click the plus sign next to StrutsHello to reveal the child nodes.</p></li><li><p>Click the plus sign next to WebContent under StrutsHello.</p></li><li><p>Click the plus sign next to WEB-INF under WebContent.</p></li><li><p>Then, double-click on the struts-config.xml node to display a diagram of the Struts application configuration file in the editing area.</p></li></ol></div><p>At this point, its empty except for the background grid lines.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="CreatingtheApplicationComponents"></a>3.2.&nbsp;Creating the Application Components</h2></div></div><div></div></div><p>Now, we will design the application by creating the individual components as placeholders
first. (We dont have to complete all of the details inside the components until afterwards.)</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="CreatingJSPPagePlaceholders"></a>3.2.1.&nbsp;Creating JSP Page Placeholders</h3></div></div><div></div></div><p>Next, lets create and place two JSP pages. We will not write any code for the files, but only
create them as placeholders so that we can create links to them in the diagram. We will write
the code a little bit later.</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="CreatingthePagePlaceholders"></a>3.2.1.1.&nbsp;Creating the Page Placeholders</h4></div></div><div></div></div><div class="orderedlist"><ol start="12" type="1"><li><p>Bring the Web Projects view to the front of the Package Explorer view by selecting the Web Projects tab next to that tab.</p></li><li><p>Right-click the StrutsHello/WEB-ROOT (WebContent) folder in the Web Projects view and select New/Folder... .</p></li><li><p>Enter pages for a folder name and click Finish.</p></li><li><p>We will keep our presentation files in this folder.</p></li><li><p>Right-click the pages folder and select New/File/JSP... .</p></li><li><p>16. For Name type in inputname (the JSP extension will be automatically added to the file), for Template select StrutsForm, and then click on the Finish button.</p></li><li><p>Right-click the pages folder again and select New/File/JSP... .</p></li><li><p>For Name type in greeting , for Template leave as Blank, and then click on the Finish button.</p></li></ol></div><p>Just leave these files as is for now.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="PlacingthePagePlaceholders"></a>3.2.1.2.&nbsp;Placing the Page Placeholders</h4></div></div><div></div></div><p>Lets now place the two pages just created on the diagram.</p><div class="orderedlist"><ol start="20" type="1"><li><p>Click on the struts-config.xml tab in the Editing area to bring the diagram to the front.</p></li><li><p>Click on the inputname.jsp page in the Web Projects view, drag it onto the diagram, and drop it.</p></li><li>Click on the greeting.jsp page in the Web Projects view, drag it onto the diagram,
and drop it to the right of the /pages/inputname.jsp icon with some extra space.</li></ol></div><p>You should now have two JSP pages in the diagram.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="CreatinganActionMappings"></a>3.2.2.&nbsp;Creating an Action Mappings</h3></div></div><div></div></div><p>Using a context menu on the diagram, we are next going to create an Action mapping.</p><div class="orderedlist"><ol start="23" type="1"><li><p>Right-click between the two icons and select Add/Action</p></li><li><p>Enter the following values:</p></li></ol></div><div class="table"><a name="d0e718"></a><p class="title"><b>Table&nbsp;3.1.&nbsp;</b></p><table border="1"><colgroup><col><col></colgroup></table></div><p>(GetNameForm is the name for a form bean that we will create later.)</p><div class="orderedlist"><ol start="25" type="1"><li><p>Click Finish.</p></li></ol></div><p>The /greeting action should appear in two places, in the diagram and also under the action-mappings node under the struts-config.xml node in the Outline view. Also, note the
asterisk to the right of the name, struts-config.xml, in the Outline view showing that the file has been changed, but not saved to disk.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="CreatingaLink"></a>3.2.3.&nbsp;Creating a Link</h3></div></div><div></div></div><p>Lets now create a link from the inputname.jsp page to the action.</p><div class="orderedlist"><ol start="26" type="1"><li><p>On the left-hand side of the diagram in the column of icons, click on this icon:</p></li><li><p>26. In the connect-the-components mode you are in now, click on the /pages/inputname.jsp icon in the diagram and then click on the /greeting action.</p></li></ol></div><p>A link will be created from the page to the action.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="CreatingaForward"></a>3.2.4.&nbsp;Creating a Forward</h3></div></div><div></div></div><p>Next, we are going to create a forward for the action.</p><div class="orderedlist"><ol start="28" type="1"><li><p>On the left-hand side of the diagram in the column of icons, click on this icon, again:</p></li><li><p>Click on the /greeting action icon in the diagram and then click on the /pages/greeting.jsp icon.</p></li><li><p>Thats it. A link will be drawn from the actions new greeting forward to the greeting.jsp JSP page. Note that the forwards name will be set based on the name of the target JSP file
name. If you dont like it, you can easily change it.</p></li><li><p>Select the Tree tab at the bottom of the editor window (between Diagram and Source).</p></li><li><p>Expand the struts-config.xml/action-mappings//greeting node and then select the greeting forward.</p></li><li><p>In the Properties Editor to the right, change the text to sayHello in the Name field.</p></li><li><p>Select the Diagram tab at the bottom of the editor window and see how the diagram is also updated to reflect the change.</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="CreatingaGlobalForward"></a>3.2.5.&nbsp;Creating a Global Forward</h3></div></div><div></div></div><p>One last component that we need to create in the diagram is a global forward.</p><div class="orderedlist"><ol start="35" type="1"><li><p>Somewhere in the top-left corner of diagram, right-click and select Add/Global Forward....</p></li><li><p>Enter getName in the Name field.</p></li><li><p>Select the Change... button for Path.</p></li><li><p>In the Edit Path window, switch to the Pages tab.</p></li><li><p>Expand the StrutsHello/WEB-ROOT (WebContent)/pages node and then select the inputname.jsp page.</p></li><li><p>Click Ok.</p></li><li><p>Leave the rest of the fields blank and click Ok.</p></li></ol></div><p>A forward object now appears on the diagram and also in the global-forwards folder in the Outline view.</p><div class="orderedlist"><ol start="42" type="1"><li><p>Tidy up the diagram, by clicking and dragging around each icon, so that the diagram looks something like this:</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="CreatingaFormBean"></a>3.2.6.&nbsp;Creating a Form Bean</h3></div></div><div></div></div><p>One last thing that we need to do is to create a form bean.</p><div class="orderedlist"><ol start="43" type="1"><li><p>Switch to the Tree viewer in the editor for the struts-config.xml file, by selecting the Tree tab at the bottom of the editor window.</p></li><li><p>Right-click struts-config.xml/form-beans and select Create Form Bean.</p></li><li><p>Enter GetNameForm in the name field and sample.GetNameForm for type.</p></li><li><p>Click Finish.</p></li><li><p>To save your changes to struts-config.xml, select File/Save from the menu bar.</p></li></ol></div><p>Note the disappearance of the asterisk next to the name, struts-config.xml.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="GeneratingStubCoding"></a>3.3.&nbsp;Generating Stub Coding</h2></div></div><div></div></div><p>We are done with designing the application through the diagram. Now we need to write
      code for the action component. We also need to write an action class for the /greeting mapping
      along with a FormBean. To aid in the coding phase, Exadel Studio can generate Java class
      stubs for all of the components shown in the diagram.</p><div class="orderedlist"><ol start="48" type="1"><li><p>Switch back to the diagram, by selecting the Diagram tab at the bottom of the editor window.</p></li><li><p>Right-click a blank space in the diagram and select Generate Java Code.</p></li><li><p>Leave everything as is in the dialog box and click Generate .</p></li></ol></div><p>You should see a screen that says:</p><p>Generated classes: 2</p><p>Actions: 1</p><p>Form beans: 1</p><div class="orderedlist"><ol start="51" type="1"><li><p>Click Finish.</p></li></ol></div><p>The Java files will be generated in a JavaSource/sample folder that you can see in the Package
    Explorer view under the StrutsHello node. One Action stub and one FormBean stub will have been generated.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="CodingtheVariousFiles"></a>3.4.&nbsp;Coding the Various Files</h2></div></div><div></div></div><p>We will now code both the Java stub classes just generated, the JSP files left in as placeholders 
    from previous steps, and a new start JSP page we will have to create.</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="JavaStubClasses"></a>3.4.1.&nbsp;Java Stub Classes</h3></div></div><div></div></div><div class="orderedlist"><ol start="52" type="1"><li><p>To finish the two Java classes, switch to the Package Explorer view and expand the JavaSource/sample folder.</p></li></ol></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="GetNameForm.java"></a>3.4.1.1.&nbsp;GetNameForm.java</h4></div></div><div></div></div><div class="orderedlist"><ol start="53" type="1"><li><p>Double-click GetNameForm.java for editing.</p></li><li><p>You are looking at a Java stub class that was generated by Exadel Studio. Now we are going to edit the file.</p></li><li><p>Add the following attributes at the beginning of the class:</p></li></ol></div><p>private String name = "";</p><p>private String greetName = "";</p><div class="orderedlist"><ol start="56" type="1"><li><p>Inside the reset method, delete the TO DO and throw lines and add:</p></li></ol></div><p>this.name = "";</p><p>this.greetName = "";</p><div class="orderedlist"><ol start="57" type="1"><li><p>Inside the validate method, delete the TO DO and throw lines and add:</p></li></ol></div><p>ActionErrors errors = new ActionErrors();</p><p>return errors;</p><div class="orderedlist"><ol start="58" type="1"><li><p>Right-click and select Source/Generate Getters and Setters... from the context menu.</p></li><li><p>In the dialog box, check the check boxes for name and greetName, select First method for Insertion point, and click on the OK button.</p></li></ol></div><p>The final GetNameForm.java file should look like this:</p><pre class="programlisting">
package sample;
import javax.servlet.http.HttpServletRequest;
import org.apache.struts.action.ActionErrors;
import org.apache.struts.action.ActionMapping;
public class GetNameForm extends org.apache.struts.action.ActionForm {
private String name = "";
private String greetName = "";
public String getName() {
return name;
}
public void setName(String name) {
this.name = name;
}
public String getGreetName() {
return greetName;
}
public void setGreetName(String greetName) {
this.greetName = greetName;
}
public GetNameForm() {
}
public void reset(ActionMapping actionMapping, HttpServletRequest
request) {
this.name = "";
this.greetName = "";
}
public ActionErrors validate(ActionMapping actionMapping,
Exadel Studio: Getting Started Guide for Creating a Struts Application
page 7 of 11
HttpServletRequest request) {
ActionErrors errors = new ActionErrors();
return errors;
}
}
</pre><div class="orderedlist"><ol start="60" type="1"><li><p>Save the file.</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="GreetingAction.java"></a>3.4.1.2.&nbsp;GreetingAction.java</h4></div></div><div></div></div><div class="orderedlist"><ol start="61" type="1"><li><p>Open GreetingAction.java for editing.</p></li><li><p>Inside the execute method, delete the TO DO and throw lines and add the following:</p></li></ol></div><pre class="programlisting">
String name = ((GetNameForm)form).getName();
String greeting = "Hello, "+name+"!";
((GetNameForm)form).setGreetName(greeting);
return mapping.findForward(FORWARD_sayHello);
The final version of GreetingAction.java should look like this:
package sample;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.ActionMapping;
public class GreetingAction extends org.apache.struts.action.Action {
// Global Forwards
public static final String GLOBAL_FORWARD_getName = "getName";
// Local Forwards
public static final String FORWARD_sayHello = "sayHello";
public GreetingAction() {
}
public ActionForward execute(ActionMapping mapping, ActionForm form,
HttpServletRequest request, HttpServletResponse response) throws
Exception {
String name = ((GetNameForm)form).getName();
String greeting = "Hello, "+name+"!";
((GetNameForm)form).setGreetName(greeting);
return mapping.findForward(FORWARD_sayHello);
}
}
</pre><div class="orderedlist"><ol start="63" type="1"><li><p>Save the file.</p></li><li><p>Close the editors for the two Java files.</p></li></ol></div><p>The last thing left to do is to code the JSP files whose editors should still be open from having been created as placeholders.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="JSPPages"></a>3.4.2.&nbsp;JSP Pages</h3></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="inputname.jsp"></a>3.4.2.1.&nbsp;inputname.jsp</h4></div></div><div></div></div><p>In this page, the user will enter any name and click the submit button. Then, the greeting action will be called through the form.</p><div class="orderedlist"><ol start="65" type="1"><li><p>Click on the inputname.jsp tab in the Editing area to bring its editor forward.</p></li><li><p>In the Web Projects view, expand StrutsHello/Configuration/default/strutsconfig.xml/action-mappings and select /greeting.</p></li><li><p>Drag it and drop it between the quotes for the action attribute to the html:form element in the Source pane of the editor.</p></li><li><p>Then type this text on a new line just below this line:</p></li><li><p>Input name:</p></li><li><p>Select the Visual pane of the editor.</p></li><li><p>Then, in the Exadel Palette, expand the Struts Form library, select text, and drag it onto the box.</p></li><li><p>In the Insert Tag dialog box, type in name for property and select Finish.</p></li><li><p>In the Struts Form library in the Exadel Palette, select submit, and drag it to right after the the text box in the Visual pane of the editor.</p></li><li><p>Right-click the submit button and select &lt;html:submit&gt; Attributes from the context menu.</p></li><li><p>In the Attributes dialog box, select the value field and type in Say Hello! for its value.</p></li></ol></div><p>After tidying the page source, the Editor window for the file should look something like this:</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="greeting.jsp"></a>3.4.2.2.&nbsp;greeting.jsp</h4></div></div><div></div></div><p>Next, we will fill in the result page.</p><div class="orderedlist"><ol start="76" type="1"><li><p>Click on the greeting.jsp tab in the Editing area to bring its editor forward.</p></li><li><p>Type in the following code:</p></li></ol></div><pre class="programlisting">
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Greeting&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;p&gt;
&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre><p>To complete editing of this file, we will use macros from the Exadel Palette. This palette is a view that should be available to the right of the editing area.</p><div class="orderedlist"><ol start="78" type="1"><li><p>Click on the Struts Common folder in the Exadel Palette to open it.</p></li><li><p>Position the cursor at the beginning of the greeting.jsp file in the Source pane and then click on bean taglib in the Exadel Palette.</p></li></ol></div><p>This will insert the following line at the top of the file:</p><pre class="programlisting">
&lt;%@ taglib uri="/WEB-INF/struts-bean.tld" prefix="bean" %&gt;
</pre><div class="orderedlist"><ol start="80" type="1"><li><p>Click on the Struts Bean folder in the Exadel Palette to open it.</p></li><li><p>Position the cursor inside the p element.</p></li><li><p>Click on write in the Exadel Palette.</p></li><li><p>Type in GetNameForm for the name attribute and add a property attribute with greetName as its value.</p></li></ol></div><p>The editor should should now look like this:</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="index.jsp"></a>3.4.2.3.&nbsp;index.jsp</h4></div></div><div></div></div><p>Finally, we will need to create and edit an index.jsp page. This page will use a Struts forward to simply redirect us to the getName global forward.</p><div class="orderedlist"><ol start="84" type="1"><li><p>In the Web Projects view, right-click on StrutsHello/WEB-ROOT(WebContent)</p><p>node and select New/File/JSP... .</p></li><li><p>Type index for Name and click on the Finish button.</p></li><li><p>On the Exadel Palette, select the Struts Common folder of macros by clicking on it in the palette.</p></li><li><p>Click on the logic taglib icon.</p></li><li><p>Press the Enter key in the editor to go to the next line.</p></li><li><p>Back on the palette, select the Struts Logic folder of macros.</p></li><li><p>Click on redirect.</p></li><li><p>Delete the ending tag, put a forward slash in front of the closing angle bracket, and type forward=getName in front of the slash.</p></li></ol></div><p>The finished code for the page is shown below:</p><pre class="programlisting">
&lt;%@ taglib uri="/WEB-INF/struts-logic.tld" prefix="logic" %&gt;
&lt;logic:redirect forward="getName"/&gt;
</pre><div class="orderedlist"><ol start="92" type="1"><li><p>To save all the edits to files, select File/Save All from the menu bar.</p></li></ol></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="CompilingtheClasses"></a>3.5.&nbsp;Compiling the Classes</h2></div></div><div></div></div><p>Because this is the Eclipse environment, no explicit compilation step is required. By default, 
     Eclipse compiles as you go.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="RunningtheApplication"></a>3.6.&nbsp;Running the Application</h2></div></div><div></div></div><p>Everything is now ready for running our applicationwithout having to leave Red Hat Developer Studio
     by using the Tomcat engine that comes with the Red Hat Developer Studio plug-in. For controlling
     Tomcat within Red Hat Developer Studio, the toolbar contains a panel.</p><div class="orderedlist"><ol start="93" type="1"><li>Start up Tomcat by clicking on the first icon from left in this panel. (If Tomcat is
    already running, stop it by clicking on the third icon from the left and then start it
    again. Remember, the Struts run-time requires restarting the servlet engine when
    any changes have been made.)</li><li>After the messages in the Console tabbed view stop scrolling, Tomcat is available.
    At this point, right-click on the getName global forward in the struts-config.xml
    diagram view and select Run on Server.</li></ol></div><p>The browser should appear with the application started.</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="GettingStartedStrutsValidationExamples"></a>Chapter&nbsp;4.&nbsp;Getting Started Struts Validation Examples</h2></div></div><div></div></div><p>Validation of input is an important part of any Web application. All Apache Jakarta frameworks, 
including Struts, can use a common Jakarta Validation Framework for streamlining this aspect of Web 
application development. The Validation Framework allows the developer to define validation rules and then
 apply these rules on the client-side or the server-side.</p><p>Red Hat Developer Studio makes using the Validation Framework in Struts even easier through a specialized editor
 for the XML files that control validation in a project. In this document, we'll show you how this all
  works by creating some simple client-side validation and server-side validation examples.</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="StartingPoint"></a>4.1.&nbsp;Starting Point</h2></div></div><div></div></div><p>The example assumes that you have already created our sample StrutsHello application from the 
Getting Started Guide for Creating a Struts Application. You should have the Red Hat Developer Studio perspective
 open on this StrutsHello project.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="DefiningTheValidationRule"></a>4.2.&nbsp;Defining the Validation Rule</h2></div></div><div></div></div><p>In these steps you will set up the validation that can be used for either client-side or 
serverside validation. You need to enable validation as part of the project, define an error message, 
and tie it into the appropriate part of the application.</p><div class="orderedlist"><ol type="1"><li><p>Right-click the plug-ins node under the StrutsHello/Configuration/default/
struts-config.xml node in the Web Projects view and select Create Special Plugin/Validators from the context
 menu.</p></li><li><p>Further down in the Web Projects view, right-click on the 
StrutsHello/ResourceBundles node and select New/Properties File... from the context menu.</p></li><li><p>In the dialog box, click on the Browse... button next to the Folder field, expand the
JavaSource folder in this next dialog box, select the sample subfolder, and click on the OK button.</p></li><li><p>Back in the first dialog box, type in applResources for the Name field and 
click on the Finish button.</p></li><li><p>Right-click the newly created file and select Add/Default Error Messages
 from the context menu.</p></li><li><p>Drag up the sample.applResources icon until you can drop it on the resources folder under struts-config.xml.</p></li><li><p>Select File/Save All from the menu bar.</p></li><li><p>Select validation.xml under the StrutsHello/Validation node and double-click it to open it with the Exadel Studio Validation Editor.</p></li><li><p>Expand the form-beans node under the StrutsHello/Configuration/default/ struts-config.xml node. Then, drag the form bean GetNameForm and drop it onto formset (default) in the Validation Editor.</p></li><li><p>In the Validation Editor, expand the formset node, right-click GetNameForm, and select Add Field... from the context menu.</p></li><li><p>Enter name for Property in the dialog box.</p></li><li><p>In the properties for the name field to the right of the "tree" for the validation.xml file, click on the Change... button next to the Depends entry field.</p></li><li><p>In the displayed double list, select required from the left list and then click Add-&gt;.</p></li><li><p>Click Ok.</p></li><li><p>Right-click name and select Add Arg... from the context menu.</p></li><li><p>In the Add Arg dialog box, click on the Change... button next to the Key field.</p></li><li><p>In the Key dialog box that appears now, click on the Add button.</p></li><li><p>Enter name.required in the Name field, and enter A person's name in the Value field.</p></li><li><p>Click Finish, then Ok, and then Ok again.</p></li><li><p>Select File/Save All from the menu bar.</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Client-SideValidation"></a>4.3.&nbsp;Client-Side Validation</h2></div></div><div></div></div><p>Client-side validation uses a scripting language (like JavaScript) running in the client browser</p><p>to actually do the validation. In a Struts application using the Validation Framework, however,</p><p>you don't actually have to do any of the script coding. The Validation Framework handles this.</p><p>To see how this works in our application, you'll just need to make a couple of modifications to one of the JSP files.</p><div class="orderedlist"><ol start="21" type="1"><li><p>Double-click inputname.jsp under StrutsHello/WEB-ROOT (WebContent)/ pages to open it for editing.</p></li><li><p>Find the  tag near the top and hit Return to make a new line under it.</p></li><li><p>In the Red Hat Palette view to the right, open the HTML folder and click on the javascript tag.</p></li><li><p>Back in the editor, just in front of the closing slash for this inserted tag, hit Ctrlspace and select formName from the prompting menu.</p></li><li><p>Over in the Web Projects view, select GetNameForm under the StrutsHello/Configuration/ default/struts-config.xml/form-beans node, drag it, and drop it between the quotes in the editor.</p></li><li><p>Modify the &gt;html:form&lt; tag by inserting this attribute:</p></li></ol></div><p>onsubmit="return validateGetNameForm(this)"</p><p>The file should now look like this:</p><pre class="programlisting">
&lt;%@ taglib uri="/WEB-INF/struts-html.tld" prefix="html" %&gt;
&lt;html:html&gt;
&lt;head&gt;
&lt;title&gt;Input name&lt;/title&gt;
&lt;html:javascript formName="GetNameForm"/&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;html:form action="/greeting.do" onsubmit="return
&lt;para&gt;validateGetNameForm(this)"&gt;&lt;/para&gt;
&lt;table border="0" cellspacing="0" cellpadding="0"&gt;
&lt;tr&gt;
&lt;td&gt;&lt;b&gt;Input name:&lt;/b&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
&lt;html:text property="name" /&gt;
&lt;html:submit value=" Say Hello! " /&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/html:form&gt;
&lt;/body&gt;
&lt;/html:html&gt;
</pre><div class="orderedlist"><ol start="27" type="1"><li><p>Select File/Save from the menu bar.</p></li><li><p>28. Start Tomcat by clicking on its icon (a right-pointing arrow) in the toolbar.</p></li><li><p>29. Click on the Run icon in the toolbar.</p></li></ol></div><div class="figure"><a name="d0e1245"></a><div class="mediaobject"><img src="img/"></div><p class="title"><b>Figure&nbsp;4.1.&nbsp;</b></p></div><div class="itemizedlist"><ul type="disc"><li><p>30. In the browser window, click on the Say Hello! button without having entered any name in the form.</p></li></ul></div><p>A JavaScript error message should be displayed in an alert box.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Server-SideValidation"></a>4.4.&nbsp;Server-Side Validation</h2></div></div><div></div></div><p>Server-side validation does the validation inside the application on the server. In a Struts 
application using the Validation Framework, you still don't have to do any of the actual validation 
coding. The Validation Framework handles this. You will, though, have to make a few changes to the JSP 
file you modified for client-side validation along with a change to an action and a few changes to the
 form bean class.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="EditingTheJSPFile"></a>4.5.&nbsp;Editing the JSP File</h2></div></div><div></div></div><div class="orderedlist"><ol start="30" type="1"><li><p>Reopen inputname.jsp for editing.</p></li><li><p>Delete the onsubmit attribute in the &gt;html:form&lt; element that you put in for client-side validation.</p></li><li><p>Add an &gt;html:errors/&gt; tag after the &gt;/html:form&gt; tag.</p></li></ol></div><p>The JSP file should now look like this:</p><pre class="programlisting">
&lt;%@ taglib uri="/WEB-INF/struts-html.tld" prefix="html" %&gt;
&lt;html:html&gt;
&lt;head&gt;
&lt;title&gt;Input name&lt;/title&gt;
&lt;html:javascript formName="GetNameForm"/&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;html:form action="/greeting.do"&gt;
&lt;table border="0" cellspacing="0" cellpadding="0"&gt;
&lt;tr&gt;
&lt;td&gt;&lt;b&gt;Input name:&lt;/b&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
&lt;html:text property="name" /&gt;
&lt;html:submit value=" Say Hello! " /&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/html:form&gt;
&lt;html:errors /&gt;
&lt;/body&gt;
&lt;/html:html&gt;
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="EditingTheAction"></a>4.6.&nbsp;Editing the Action</h2></div></div><div></div></div><div class="orderedlist"><ol start="33" type="1"><li><p>In the Web Projects view, expand the node under the StrutsHello/Configuration/ default/struts-config.xml/action-mappings node, right-click the /greeting action, and then select Properties... from the context menu.</p></li><li><p>In the Edit Properties window, insert the cursor into the value column for the input property and click on the ... button.</p></li><li><p>In the dialog box, make sure the Pages tab is selected, select StrutsHello/WEBROOT( WebContent)/pages/ inputname.jsp, click the Ok button, and then click on the Close button.</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="EditingTheFormBean"></a>4.7.&nbsp;Editing the Form Bean</h2></div></div><div></div></div><div class="orderedlist"><ol start="36" type="1"><li><p>Right-click the /greeting action again and select Open Form-bean Source to open the GetNameForm.java file for editing.</p></li><li><p>Change the class that it extends to from: org.apache.struts.action.ActionForm to: org.apache.struts.validator.ValidatorForm</p></li><li><p>Comment out out the validate method.</p></li></ol></div><p>The file should now look like this:</p><pre class="programlisting">
package sample;
import javax.servlet.http.HttpServletRequest;
import org.apache.struts.action.ActionErrors;
import org.apache.struts.action.ActionMapping;
public class GetNameForm extends
org.apache.struts.validator.ValidatorForm {
private String name = "";
/**
* @return Returns the name.
*/
public String getName() {
return name;
}
/**
* @param name The name to set.
*/
public void setName(String name) {
this.name = name;
}
public GetNameForm () {
}
public void reset(ActionMapping actionMapping, HttpServletRequest
request) {
this.name = "";
}
// public ActionErrors validate(ActionMapping actionMapping,
HttpServletRequest request) {
// ActionErrors errors = new ActionErrors();
// return errors;
// }
}
</pre><p>Select File/Save All from the menu bar.</p><div class="orderedlist"><ol start="39" type="1"><li><p>Reload the application into Tomcat by clicking on the Change Time Stamp icon (a finger pointing with a little star) in the toolbar.</p></li><li><p>Run the application.</p></li><li><p>In the browser window, click on the Say Hello! button without having entered any name in the form.</p></li></ol></div><p>The error message should appear in a refreshed version of the form.</p></div></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="GettingStartedGuideforJSFwithHibernate"></a>Chapter&nbsp;5.&nbsp;Getting Started Guide for JSF with Hibernate</h2></div></div><div></div></div><p>In this guide, we will show you how to take a very simple ready-made JSF application and convert it to use a database with the help of Exadel Studio. After downloading, we will first</p><p>set up and run the application without persistence, and then with persistence.</p><p>The application itself is a simple JSF-based application that asks the user to enter a UserID. It tries to locate a record for the entered User ID (entered during the application session).</p><p>If the record is found, details are displayed. If the record is not found, you are asked to create this record. This application, of course, only runs as long as the Tomcat server is running. Once we stop the server all of the data is lost as all information is saved only in the application session context.</p><p>With the help of Exadel Studio, we will convert this application to use the lightweight hsqldb database (included with the downloaded project). We will use Exadel Studio special features for object-relational mapping for this conversion After the conversion, even if we restart the server, the data we entered will have been saved in a database and thus available to the application.</p><p>Before we start, we assume that you have Eclipse, and have installed Exadel Studio Pro with Tomcat server.</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="InstallingTheProject"></a>5.1.&nbsp;Installing the Project</h2></div></div><div></div></div><p>We are first going to download and import this project (ormHibernate3-jsf) into Eclipse.</p><div class="orderedlist"><ol type="1"><li><p>Download: http://webdownload.exadel.com/dirdownloads/ormhib/examples/ormHibernate3-jsf.zip</p></li><li><p>Unzip this file into your Eclipse workspace folder.</p></li><li><p>Launch Eclipse.</p></li><li><p>In Eclipse, select File/Import/JSF Project.</p></li><li><p>Click Next.</p></li><li><p>Browse to where the project was unzipped.</p></li><li><p>Find the web.xml file inside the WebContent folder in the WEB-INF folder, select it, and Click Finish.</p></li></ol></div><p>The ormHibernate3-jsf project should appear in the Package Explorer with a standard Web application 
structure. As we mentioned before, this is a JSF application. To see the JSF configuration file, browse to
 WebContent/WEB-INF/faces-config.xml.</p><p>In the JavaSource folder, you will find the following Java source files. We will briefly explain these
 files and then run the application.</p><div class="table"><a name="d0e1374"></a><p class="title"><b>Table&nbsp;5.1.&nbsp;JavaSource Folder</b></p><table summary="JavaSource Folder" border="1"><colgroup><col><col></colgroup><thead><tr><th>Class Name</th><th>Description</th></tr></thead><tbody><tr><td>demo/Address.java</td><td>holds the user address</td></tr><tr><td>demo/User.java</td><td>holds user information</td></tr><tr><td>demo/GetUserIdBean.java</td><td>holds user Id and determines navigation (JSF Backing Bean)</td></tr><tr><td>demo/UserFormBean.java</td><td>holds new user input (JSF Backing Bean)</td></tr><tr><td>demo.bundle/Messages.properties</td><td>holds label messages used in the application</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="RunningWithoutADatabase"></a>5.2.&nbsp;Running Without a Database</h2></div></div><div></div></div><p>We are ready to run this project in a Web browser and see how it looks. We don't need to
 compile these classes, because Eclipse did it for us when we imported the project.</p><div class="orderedlist"><ol start="8" type="1"><li><p>Start Tomcat.</p></li><li><p>Click on the running-man-and-blue-butterfly icon from the toolbar.</p></li><li><p>Go ahead and play with the application.</p></li></ol></div><p>Initially users don't exist, so entering any ID will prompt you to enter user details. Once you have saved a user, you can go back to the main page by clicking on the Back to Login Page link. If you then enter that user's id again, the application will locate and display the user's details.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ConvertingforUseWithaDatabase"></a>5.3.&nbsp;Converting for Use With a Database</h2></div></div><div></div></div><p>Now we are ready to convert this application to use with a database with the help of ExadelStudio. To convert the application for use with a database, we need to set things up in three different places:</p><div class="itemizedlist"><ul type="disc"><li><p>The Application</p></li></ul></div><div class="itemizedlist"><ul type="disc"><li><p>The Database</p></li></ul></div><div class="itemizedlist"><ul type="disc"><li><p>The Application Server</p></li></ul></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="SettingUpTheApplication"></a>5.4.&nbsp;Setting up the Application</h2></div></div><div></div></div><p>Setting up the Application</p><p>Let's start by using Red Hat Developer Studio with the application project. First, we create 
the object/relational mapping from our simple object model to a database schema after adding Hibernate 
capabilities to our project.</p><div class="orderedlist"><ol start="11" type="1"><li><p>Right-click on ormHibernate3-jsf in the Package Explorer view and select Exadel</p></li><li><p>Studio/Add Hibernate Capability... from the context menu.</p></li><li><p>Click on Yes in the the dialog box with Add Hibernate Jars selected.</p></li><li><p>In the Configuration Wizard, click twice in the Value field for dialect and select org.hibernate.dialect.HSQLDialect from the pop-up menu.</p></li><li><p>Click Finish</p></li><li><p>Select Object to Schema for the Mapping Approach.</p></li></ol></div><p>We are only interested in saving the User class in a database, so we are going to create a mapping for the User class to a database table.</p><div class="orderedlist"><ol start="17" type="1"><li><p>In the Persistent Classes Wizard dialog that appears next, click on the SelectClasses.</p></li><li><p>Leave all other values as they are in the next dialog box and click Finish.</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="EditTheHibernateConfiguration"></a>5.5.&nbsp;Edit the Hibernate Configuration</h2></div></div><div></div></div><p>Afterwards, the Hibernate configuration file, hibernate.cfg.xml, will appear in an editor window. 
So, let's adjust this file first.</p><div class="orderedlist"><ol start="19" type="1"><li><p>Replace these two lines:</p></li></ol></div><pre class="programlisting">&lt;property
name="hibernate.connection.driver_class"&gt;org.hsqldb.jdbcDriver&lt;/
property&gt;
&lt;property
name="hibernate.connection.url"&gt;jdbc:hsqldb:hsql:[hostname]&lt;/
property&gt;
</pre><p>With this single line:</p><pre class="programlisting">
&lt;property name="hibernate.connection.datasource"&gt;java:comp/env/
jdbc/kickstart&lt;/property&gt;
</pre><p>(Make sure this is one line in the file and not two lines as displayed because of wordwrapping.)</p><p>Your file should now look like this:</p><pre class="programlisting">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration
DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"&gt;
&lt;hibernate-configuration&gt;
&lt;session-factory&gt;
&lt;property name="hibernate.connection.datasource"&gt;java:comp/env/jdbc/
kickstart&lt;/property&gt;
Exadel Studio 3.0
page 4 of 10
&lt;property name="hibernate.dialect"&gt;org.hibernate.dialect.HSQLDialect&lt;/
property&gt;
&lt;mapping resource="demo/User.hbm.xml"/&gt;
&lt;/session-factory&gt;
&lt;/hibernate-configuration&gt;
</pre><div class="orderedlist"><ol start="20" type="1"><li><p>Save the file.</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="EdittheMappingFile"></a>5.6.&nbsp;Edit the Mapping File</h2></div></div><div></div></div><p>Next, we need to make on slight change to the mapping file, User.hbm.xml.</p><div class="orderedlist"><ol start="21" type="1"><li><p>In the ORM Explorer view, reveal the 
ormHibernate3-jsf/JavaSource/hibernate.cfg.xml/demo/User -&gt; user node, right-click it, and select 
Open Mapping from the context menu.</p></li><li><p>In the editor that opens up for the mapping file, just change the class 
attribute for generator to a value of assigned and you're done with this file.</p></li></ol></div><p>Here is what the edited User.hbm.xml file should now look like:</p><pre class="programlisting">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
&lt;para&gt;"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;&lt;/para&gt;
&lt;hibernate-mapping package="demo"&gt;
&lt;class name="User" table="user" optimistic-lock="none"&gt;
&lt;id name="id" type="string" unsaved-value="null" column="id"&gt;
&lt;generator class="assigned"/&gt;
&lt;/id&gt;
&lt;property name="firstName" type="string" column="first_name"/&gt;
&lt;property name="lastName" type="string" column="last_name"/&gt;
&lt;property name="email" type="string" column="email"/&gt;
&lt;component name="address" update="true" insert="true" class="demo.Address"&gt;
&lt;property name="city" type="string" column="address_city"/&gt;
&lt;property name="state" type="string" column="address_state"/&gt;
&lt;property name="street" type="string" column="address_street"/&gt;
&lt;property name="zip" type="string" column="address_zip"/&gt;
&lt;/component&gt;
&lt;/class&gt;
&lt;/hibernate-mapping&gt;
</pre><div class="orderedlist"><ol start="23" type="1"><li><p>Save the file.</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="AddAGeneralClassForIncorporatingHibernate"></a>5.7.&nbsp;Add a General Class for Incorporating Hibernate</h2></div></div><div></div></div><p>Next, we will need to create a special Java class for incorprating Hibernate into our application.</p><div class="orderedlist"><ol start="24" type="1"><li><p>Switch to the Package Explorer view and create the class,
HibernateHelper.java, in JavaSource/demo with this content and save it.</p></li></ol></div><pre class="programlisting">
package demo;
import org.hibernate.HibernateException;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;
public class HibernateHelper {
/**
* Reference to SessionFactory.
*/
private static SessionFactory sf;
public static final ThreadLocal session = new ThreadLocal();
public static synchronized void init() {
if (sf != null) return;
System.out.println("Initializing Hibernate");
try {
Configuration cfg = new Configuration().configure();
sf = cfg.buildSessionFactory();
} catch (Exception he) {
System.err.println("Unable to create session factory from
configuration");
he.printStackTrace();
throw new RuntimeException("Unable to create session factory from
configuration", he);
}
System.out.println("Hibernate initialized");
}
/**
* Return the SessionFactory.
* @return The SessionFactory for this application session
*/
public static SessionFactory sessionFactory() {
if (sf == null) init();
return sf;
}
public static void destroy() {
if (sf != null) {
try {
sf.close();
} catch (HibernateException he) {
he.printStackTrace();
}
}
sf = null;
System.out.println("Hibernate resources released");
}
/**
* Closes an hibernate {@link Session}, releasing its resources.
* @throws HibernateException if an hibernate error occurs
*/
public static void closeSession() throws HibernateException {
Session s = (Session)session.get();
session.set(null);
if (s != null) {
s.close();
Exadel Studio Pro
page 6 of 9
}
}
/**
* Returns an hibernate {@link Session} from the session factory.
* @return an hibernate {@link Session}
* @throws HibernateException if an error occurs
*/
public static Session openSession() throws HibernateException {
if (sf == null) init();
Session s = (Session)session.get();
if (s == null) {
s = sf.openSession();
session.set(s);
}
return (s);
}
}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="EdittheTwoBeanClasses"></a>5.8.&nbsp;Edit the Two Bean Classes</h2></div></div><div></div></div><p>We also need to modify the two bean classes in our application to "Hibernate-ize" them.</p><div class="orderedlist"><ol start="25" type="1"><li><p>Modify the GetUserIdBean.java class in JavaSource/demo by adding these imports:

</p></li></ol></div><pre class="programlisting">import org.hibernate.Session;
import javax.faces.application.FacesMessage;
</pre><div class="orderedlist"><ol start="26" type="1"><li><p>Then, replace the action() method with this code and save.</p></li></ol></div><pre class="programlisting">{
public String action()
throws Exception
UserFormBean ufb;
User user;
String actionResult = "inputuser"; // new user by default
Map sessionMap =
FacesContext.getCurrentInstance().getExternalContext().getSessionMap();
if (sessionMap != null) {
ufb = new UserFormBean();
ufb.setId(id);
try {
Session hSession = HibernateHelper.openSession();
user = (User)hSession.get(User.class, id);
HibernateHelper.closeSession();
} catch (Exception e) {
FacesContext context = FacesContext.getCurrentInstance();
context.addMessage(null, new
FacesMessage(FacesMessage.SEVERITY_ERROR,e.toString(), null));
return "failed";
}
if (user==null || !user.getId().equals(id)) {
user = new User();
user.setId(id);
sessionMap.put("user", user);
} else {
// fill UserFormBean with user information
loadUser(ufb,user);
actionResult="greeting";
}
sessionMap.put("UserFormBean", ufb);
}
return actionResult;
}
private void loadUser(UserFormBean userForm,User user) {
userForm.setId(user.getId());
userForm.setFirstName(user.getFirstName());
userForm.setLastName(user.getLastName());
userForm.setEmail(user.getEmail());
userForm.setStreet(user.getAddress().getStreet());
userForm.setCity(user.getAddress().getCity());
userForm.setState(user.getAddress().getState());
userForm.setZip(user.getAddress().getZip());
}
</pre><div class="orderedlist"><ol start="27" type="1"><li><p>Modify the UserFormBean.java class in JavaSource/demo by adding these
 imports:</p></li></ol></div><pre class="programlisting">import org.hibernate.Session;
import org.hibernate.Transaction;
</pre><div class="orderedlist"><ol start="28" type="1"><li><p>Then, replace the save() method with this code and save the class.</p></li></ol></div><pre class="programlisting">public String save() throws Exception {
Map sessionMap =
FacesContext.getCurrentInstance().getExternalContext().getSessionMap();
if (sessionMap != null) {
UserFormBean ufb=(UserFormBean)sessionMap.get("UserFormBean");
try {
Session hSession = HibernateHelper.openSession();
Transaction tran = hSession.beginTransaction();
User user = (User)hSession.get(User.class, id);
if (user == null) {
user = new User();
user.setId(id);
hSession.save(user);
}
saveUser(ufb, user);
tran.commit();
HibernateHelper.closeSession();
} catch (Exception e) {
return "failed";
}
}
return "greeting";
}
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="SettinguptheDatabase"></a>5.9.&nbsp;Setting up the Database</h2></div></div><div></div></div><p>To set up the database end, we need to use Red Hat Developer Studio and our HSQL database engine to create a 
database table corresponding to the class we are trying to persist and make the database available.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="CreatingtheDatabaseTable"></a>5.10.&nbsp;Creating the Database Table</h2></div></div><div></div></div><p>Let's first create the script for our database table in Red Hat Developer Studio.</p><div class="orderedlist"><ol start="29" type="1"><li><p>In the ORM Explorer view, right-click on JavaSource/hibernate.cfg.xml and select "Generate DDL Wizard".</p></li><li><p>Select HSQL as the Dialect and leave Location as is.</p></li><li><p>Click Finish.</p></li></ol></div><p>A DDL file called schema.sql will be created in the root of the project and will be opened in an
 editor window.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="MakingTheDatabaseAvailableForTheApplication"></a>5.11.&nbsp;Making the Database Available for the Application</h2></div></div><div></div></div><p>The databse server, HSQLDB, is provided with the project. It's located in the ormHibernate3-jsf/hsqldb folder.</p><div class="orderedlist"><ol start="32" type="1"><li><p>Start the database server: .../ormHibernate3-jsf/hsqldb/bin/server.bat</p></li><li><p>In a separate window, start the admin tool: .../ormHibernate3-jsf/hsqldb/bin/dbadmin.bat</p></li></ol></div><p>This will launch a small GUI application, HSQL Database Manager.</p><div class="orderedlist"><ol start="34" type="1"><li><p>Leave all values as they are, only change URL: to the following: jdbc:hsqldb:hsql://localhost</p></li><li><p>Click OK.</p></li><li><p>Select File/Open Script... from the menu bar of HSQL Database Manager.</p></li><li><p>Find and open the the DDL file we just created.</p></li><li><p>Click Execute back in the main screen of the Database Manager.</p></li><li><p>38. Select View/Refresh Tree from the menu bar.</p></li></ol></div><p>The User database should now appear in the expand/collapse tree to the left.</p><div class="orderedlist"><ol start="40" type="1"><li><p>Select File/Exit from the menu bar.</p></li><li><p>Stop the database server: .../ormHibernate3-jsf/hsqldb/bin/shutdown.bat</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="SettinguptheApplicationServer"></a>5.12.&nbsp;Setting up the Application Server</h2></div></div><div></div></div><p>Finally, we need to set up the application server before we can run the database-enabled
application in a Web browser. To do this, we'll need to modify the application context in the-
Tomcat server.xml file.</p><div class="orderedlist"><ol start="42" type="1"><li><p>Stop the Tomcat server, if it's running.</p></li><li><p>Locate the server.xml file in the Package Explorer view under the Tomcat Server
node under Servers.</p></li><li><p>Double-click the file to open an editor on it.</p></li><li><p>Find the Context tag for your application in the file. It will have a path attribute
with a value of /ormHibernate3-jsf.</p></li></ol></div><p>You'll need to convert this "empty" XML element into one with beginning and ending tags,
so we can insert the special resource tags for Tomcat to run this application with a database.</p><div class="orderedlist"><ol start="46" type="1"><li><p>Delete the closing slash at the end of the Context tag.</p></li><li><p>Insert a blank line after the tag and then start another line.</p></li><li><p>On this line, insert a closing tag:</p></li></ol></div><pre class="programlisting">&lt;/Context&gt;
</pre><div class="orderedlist"><ol start="49" type="1"><li><p>On the blank line between the starting and ending tags, add the following resource definition coding.</p></li></ol></div><pre class="programlisting">&lt;Resource name="jdbc/kickstart" scope="Shareable"
type="javax.sql.DataSource"/&gt;
&lt;ResourceParams name="jdbc/kickstart"&gt;
&lt;parameter&gt;
&lt;name&gt;factory&lt;/name&gt;
&lt;value&gt;org.apache.commons.dbcp.BasicDataSourceFactory&lt;/
value&gt;
&lt;/parameter&gt;
&lt;parameter&gt;
&lt;name&gt;url&lt;/name&gt;
&lt;value&gt;jdbc:hsqldb:hsql://localhost&lt;/value&gt;
&lt;/parameter&gt;
&lt;parameter&gt;
&lt;name&gt;driverClassName&lt;/name&gt;
&lt;value&gt;org.hsqldb.jdbcDriver&lt;/value&gt;
&lt;/parameter&gt;
&lt;parameter&gt;
&lt;name&gt;username&lt;/name&gt;
&lt;value&gt;sa&lt;/value&gt;
&lt;/parameter&gt;
&lt;parameter&gt;
&lt;name&gt;password&lt;/name&gt;
&lt;value&gt;&lt;/value&gt;
&lt;/parameter&gt;
&lt;parameter&gt;
&lt;name&gt;maxWait&lt;/name&gt;
&lt;value&gt;3000&lt;/value&gt;
&lt;/parameter&gt;
&lt;parameter&gt;
&lt;name&gt;maxIdle&lt;/name&gt;
&lt;value&gt;100&lt;/value&gt;
&lt;/parameter&gt;
&lt;parameter&gt;
&lt;name&gt;maxActive&lt;/name&gt;
&lt;value&gt;10&lt;/value&gt;
&lt;/parameter&gt;
&lt;/ResourceParams&gt;
</pre><div class="orderedlist"><ol start="50" type="1"><li><p>Finally, copy .../ormHibernate3-jsf/hsqldb/lib/hsqldb.jar to your
Tomcat .../common/lib folder.</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="RunningOurNewApplication"></a>5.13.&nbsp;Running Our New Application</h2></div></div><div></div></div><div class="orderedlist"><ol start="51" type="1"><li><p>Start the database server: .../ormHibernate3-jsf/hsqldb/bin/server.bat</p></li><li><p>Start the Tomcat server.</p></li><li><p>Run the application.</p></li></ol></div><p>Play with the application. Restart Tomcat and the database server. If you run the application
again and enter a user that you already saved, the application should retrieve it from the database
and display its details.</p></div></div></div></body></html>