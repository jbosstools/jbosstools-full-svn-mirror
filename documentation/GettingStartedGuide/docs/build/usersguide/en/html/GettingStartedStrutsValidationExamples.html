<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;4.&nbsp;Getting Started Struts Validation Examples</title><link rel="stylesheet" href="css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><meta name="keywords" content="Red Hat Developer Studio, Struts, Struts Validation"><link rel="home" href="index.html" title="Getting Started with Red Hat Developer Studio"><link rel="up" href="index.html" title="Getting Started with Red Hat Developer Studio"><link rel="previous" href="GettingStartedGuideforCreatingaStrutsApplication.html" title="Chapter&nbsp;3.&nbsp;Getting Started Guide for Creating a Struts Application"><link rel="next" href="GettingStartedGuideforJSFwithHibernate.html" title="Chapter&nbsp;5.&nbsp;Getting Started Guide for JSF with Hibernate"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;4.&nbsp;Getting Started Struts Validation Examples</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="GettingStartedGuideforCreatingaStrutsApplication.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="GettingStartedGuideforJSFwithHibernate.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="GettingStartedStrutsValidationExamples"></a>Chapter&nbsp;4.&nbsp;Getting Started Struts Validation Examples</h2></div></div><div></div></div><p>Validation of input is an important part of any Web application. All Apache Jakarta frameworks, 
including Struts, can use a common Jakarta Validation Framework for streamlining this aspect of Web 
application development. The Validation Framework allows the developer to define validation rules and then
 apply these rules on the client-side or the server-side.</p><p>Red Hat Developer Studio makes using the Validation Framework in Struts even easier through a specialized editor
 for the XML files that control validation in a project. In this document, we'll show you how this all
  works by creating some simple client-side validation and server-side validation examples.</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="StartingPoint"></a>4.1.&nbsp;Starting Point</h2></div></div><div></div></div><p>The example assumes that you have already created our sample StrutsHello application from the 
Getting Started Guide for Creating a Struts Application. You should have the Red Hat Developer Studio perspective
 open on this StrutsHello project.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="DefiningTheValidationRule"></a>4.2.&nbsp;Defining the Validation Rule</h2></div></div><div></div></div><p>In these steps you will set up the validation that can be used for either client-side or 
serverside validation. You need to enable validation as part of the project, define an error message, 
and tie it into the appropriate part of the application.</p><div class="orderedlist"><ol type="1"><li><p>Right-click the plug-ins node under the StrutsHello/Configuration/default/
struts-config.xml node in the Web Projects view and select Create Special Plugin/Validators from the context
 menu.</p></li><li><p>Further down in the Web Projects view, right-click on the 
StrutsHello/ResourceBundles node and select New/Properties File... from the context menu.</p></li><li><p>In the dialog box, click on the Browse... button next to the Folder field, expand the
JavaSource folder in this next dialog box, select the sample subfolder, and click on the OK button.</p></li><li><p>Back in the first dialog box, type in applResources for the Name field and 
click on the Finish button.</p></li><li><p>Right-click the newly created file and select Add/Default Error Messages
 from the context menu.</p></li><li><p>Drag up the sample.applResources icon until you can drop it on the resources folder under struts-config.xml.</p></li><li><p>Select File/Save All from the menu bar.</p></li><li><p>Select validation.xml under the StrutsHello/Validation node and double-click it to open it with the Exadel Studio Validation Editor.</p></li><li><p>Expand the form-beans node under the StrutsHello/Configuration/default/ struts-config.xml node. Then, drag the form bean GetNameForm and drop it onto formset (default) in the Validation Editor.</p></li><li><p>In the Validation Editor, expand the formset node, right-click GetNameForm, and select Add Field... from the context menu.</p></li><li><p>Enter name for Property in the dialog box.</p></li><li><p>In the properties for the name field to the right of the "tree" for the validation.xml file, click on the Change... button next to the Depends entry field.</p></li><li><p>In the displayed double list, select required from the left list and then click Add-&gt;.</p></li><li><p>Click Ok.</p></li><li><p>Right-click name and select Add Arg... from the context menu.</p></li><li><p>In the Add Arg dialog box, click on the Change... button next to the Key field.</p></li><li><p>In the Key dialog box that appears now, click on the Add button.</p></li><li><p>Enter name.required in the Name field, and enter A person's name in the Value field.</p></li><li><p>Click Finish, then Ok, and then Ok again.</p></li><li><p>Select File/Save All from the menu bar.</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Client-SideValidation"></a>4.3.&nbsp;Client-Side Validation</h2></div></div><div></div></div><p>Client-side validation uses a scripting language (like JavaScript) running in the client browser</p><p>to actually do the validation. In a Struts application using the Validation Framework, however,</p><p>you don't actually have to do any of the script coding. The Validation Framework handles this.</p><p>To see how this works in our application, you'll just need to make a couple of modifications to one of the JSP files.</p><div class="orderedlist"><ol start="21" type="1"><li><p>Double-click inputname.jsp under StrutsHello/WEB-ROOT (WebContent)/ pages to open it for editing.</p></li><li><p>Find the  tag near the top and hit Return to make a new line under it.</p></li><li><p>In the Red Hat Palette view to the right, open the HTML folder and click on the javascript tag.</p></li><li><p>Back in the editor, just in front of the closing slash for this inserted tag, hit Ctrlspace and select formName from the prompting menu.</p></li><li><p>Over in the Web Projects view, select GetNameForm under the StrutsHello/Configuration/ default/struts-config.xml/form-beans node, drag it, and drop it between the quotes in the editor.</p></li><li><p>Modify the &gt;html:form&lt; tag by inserting this attribute:</p></li></ol></div><p>onsubmit="return validateGetNameForm(this)"</p><p>The file should now look like this:</p><pre class="programlisting">
&lt;%@ taglib uri="/WEB-INF/struts-html.tld" prefix="html" %&gt;
&lt;html:html&gt;
&lt;head&gt;
&lt;title&gt;Input name&lt;/title&gt;
&lt;html:javascript formName="GetNameForm"/&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;html:form action="/greeting.do" onsubmit="return
&lt;para&gt;validateGetNameForm(this)"&gt;&lt;/para&gt;
&lt;table border="0" cellspacing="0" cellpadding="0"&gt;
&lt;tr&gt;
&lt;td&gt;&lt;b&gt;Input name:&lt;/b&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
&lt;html:text property="name" /&gt;
&lt;html:submit value=" Say Hello! " /&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/html:form&gt;
&lt;/body&gt;
&lt;/html:html&gt;
</pre><div class="orderedlist"><ol start="27" type="1"><li><p>Select File/Save from the menu bar.</p></li><li><p>28. Start Tomcat by clicking on its icon (a right-pointing arrow) in the toolbar.</p></li><li><p>29. Click on the Run icon in the toolbar.</p></li></ol></div><div class="figure"><a name="d0e1245"></a><div class="mediaobject"><img src="img/"></div><p class="title"><b>Figure&nbsp;4.1.&nbsp;</b></p></div><div class="itemizedlist"><ul type="disc"><li><p>30. In the browser window, click on the Say Hello! button without having entered any name in the form.</p></li></ul></div><p>A JavaScript error message should be displayed in an alert box.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Server-SideValidation"></a>4.4.&nbsp;Server-Side Validation</h2></div></div><div></div></div><p>Server-side validation does the validation inside the application on the server. In a Struts 
application using the Validation Framework, you still don't have to do any of the actual validation 
coding. The Validation Framework handles this. You will, though, have to make a few changes to the JSP 
file you modified for client-side validation along with a change to an action and a few changes to the
 form bean class.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="EditingTheJSPFile"></a>4.5.&nbsp;Editing the JSP File</h2></div></div><div></div></div><div class="orderedlist"><ol start="30" type="1"><li><p>Reopen inputname.jsp for editing.</p></li><li><p>Delete the onsubmit attribute in the &gt;html:form&lt; element that you put in for client-side validation.</p></li><li><p>Add an &gt;html:errors/&gt; tag after the &gt;/html:form&gt; tag.</p></li></ol></div><p>The JSP file should now look like this:</p><pre class="programlisting">
&lt;%@ taglib uri="/WEB-INF/struts-html.tld" prefix="html" %&gt;
&lt;html:html&gt;
&lt;head&gt;
&lt;title&gt;Input name&lt;/title&gt;
&lt;html:javascript formName="GetNameForm"/&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;html:form action="/greeting.do"&gt;
&lt;table border="0" cellspacing="0" cellpadding="0"&gt;
&lt;tr&gt;
&lt;td&gt;&lt;b&gt;Input name:&lt;/b&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;
&lt;html:text property="name" /&gt;
&lt;html:submit value=" Say Hello! " /&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
&lt;/html:form&gt;
&lt;html:errors /&gt;
&lt;/body&gt;
&lt;/html:html&gt;
</pre></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="EditingTheAction"></a>4.6.&nbsp;Editing the Action</h2></div></div><div></div></div><div class="orderedlist"><ol start="33" type="1"><li><p>In the Web Projects view, expand the node under the StrutsHello/Configuration/ default/struts-config.xml/action-mappings node, right-click the /greeting action, and then select Properties... from the context menu.</p></li><li><p>In the Edit Properties window, insert the cursor into the value column for the input property and click on the ... button.</p></li><li><p>In the dialog box, make sure the Pages tab is selected, select StrutsHello/WEBROOT( WebContent)/pages/ inputname.jsp, click the Ok button, and then click on the Close button.</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="EditingTheFormBean"></a>4.7.&nbsp;Editing the Form Bean</h2></div></div><div></div></div><div class="orderedlist"><ol start="36" type="1"><li><p>Right-click the /greeting action again and select Open Form-bean Source to open the GetNameForm.java file for editing.</p></li><li><p>Change the class that it extends to from: org.apache.struts.action.ActionForm to: org.apache.struts.validator.ValidatorForm</p></li><li><p>Comment out out the validate method.</p></li></ol></div><p>The file should now look like this:</p><pre class="programlisting">
package sample;
import javax.servlet.http.HttpServletRequest;
import org.apache.struts.action.ActionErrors;
import org.apache.struts.action.ActionMapping;
public class GetNameForm extends
org.apache.struts.validator.ValidatorForm {
private String name = "";
/**
* @return Returns the name.
*/
public String getName() {
return name;
}
/**
* @param name The name to set.
*/
public void setName(String name) {
this.name = name;
}
public GetNameForm () {
}
public void reset(ActionMapping actionMapping, HttpServletRequest
request) {
this.name = "";
}
// public ActionErrors validate(ActionMapping actionMapping,
HttpServletRequest request) {
// ActionErrors errors = new ActionErrors();
// return errors;
// }
}
</pre><p>Select File/Save All from the menu bar.</p><div class="orderedlist"><ol start="39" type="1"><li><p>Reload the application into Tomcat by clicking on the Change Time Stamp icon (a finger pointing with a little star) in the toolbar.</p></li><li><p>Run the application.</p></li><li><p>In the browser window, click on the Say Hello! button without having entered any name in the form.</p></li></ol></div><p>The error message should appear in a refreshed version of the form.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="GettingStartedGuideforCreatingaStrutsApplication.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="index.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="GettingStartedGuideforJSFwithHibernate.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;3.&nbsp;Getting Started Guide for Creating a Struts Application&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;5.&nbsp;Getting Started Guide for JSF with Hibernate</td></tr></table></div></body></html>