<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;3.&nbsp;Getting Started Guide for Creating a Struts Application</title><link rel="stylesheet" href="css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="Getting Started with Red Hat Developer Studio"><link rel="up" href="index.html" title="Getting Started with Red Hat Developer Studio"><link rel="previous" href="GettingStartedForCreatingAJSFApplication.html" title="Chapter&nbsp;2.&nbsp;Getting Started Guide for&#xA;Creating a JSF Application"><link rel="next" href="GettingStartedStrutsValidationExamples.html" title="Chapter&nbsp;4.&nbsp;Getting Started Struts Validation Examples"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;3.&nbsp;Getting Started Guide for Creating a Struts Application</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="GettingStartedForCreatingAJSFApplication.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="GettingStartedStrutsValidationExamples.html">Next</a></td></tr></table><hr></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="GettingStartedGuideforCreatingaStrutsApplication"></a>Chapter&nbsp;3.&nbsp;Getting Started Guide for Creating a Struts Application</h2></div></div><div></div></div><p>We are going to show you how to create a simple Struts application using the Red Hat Developer Studio
plug-in for Eclipse. The completed application will ask a user to enter a name and click a button.
The resulting new page will display the familiar message, Hello &lt;name&gt;!</p><p>This document will show you how to create such an application from the beginning, along
the way demonstrating some of the powerful features of Red Hat Developer Studio. You will design the
application, generate stub code for the application, fill in the stub coding, compile the application,
and run the application all from inside Red Hat Developer Studio.</p><p>Well assume that you have already launched Eclipse with Exadel Studio or Exadel Studio
Pro installed and also that the Red Hat Developer Studio perspective is the current perspective. (If not,
make it active by selecting Window/Open Perspective/Red Hat Developer Studio from the menu bar.)</p><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="StartingUp"></a>3.1.&nbsp;Starting Up</h2></div></div><div></div></div><p>We are first going to create a new project for the application.</p><div class="orderedlist"><ol type="1"><li><p>Go to the menu bar and select File/New/Project... .</p></li><li><p>Select Exadel Studio/Struts/Struts Project in the New Project dialog box.</p></li><li><p>Click Next &gt;.</p></li><li><p>Enter StrutsHello as the project name.</p></li><li><p>Leave everything else as is, and click Next &gt;.</p></li><li><p>Click Next&gt; again.</p></li><li><p>7. Make sure that struts-bean.tld, struts-html.tld, and struts-logic.tld are checked in the list of included tag libraries and then click Finish.</p></li></ol></div><p>A StrutsHello node should appear in the upper-left Package Explorer view.</p><div class="orderedlist"><ol start="8" type="1"><li><p>Click the plus sign next to StrutsHello to reveal the child nodes.</p></li><li><p>Click the plus sign next to WebContent under StrutsHello.</p></li><li><p>Click the plus sign next to WEB-INF under WebContent.</p></li><li><p>Then, double-click on the struts-config.xml node to display a diagram of the Struts application configuration file in the editing area.</p></li></ol></div><p>At this point, its empty except for the background grid lines.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="CreatingtheApplicationComponents"></a>3.2.&nbsp;Creating the Application Components</h2></div></div><div></div></div><p>Now, we will design the application by creating the individual components as placeholders
first. (We dont have to complete all of the details inside the components until afterwards.)</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="CreatingJSPPagePlaceholders"></a>3.2.1.&nbsp;Creating JSP Page Placeholders</h3></div></div><div></div></div><p>Next, lets create and place two JSP pages. We will not write any code for the files, but only
create them as placeholders so that we can create links to them in the diagram. We will write
the code a little bit later.</p><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="CreatingthePagePlaceholders"></a>3.2.1.1.&nbsp;Creating the Page Placeholders</h4></div></div><div></div></div><div class="orderedlist"><ol start="12" type="1"><li><p>Bring the Web Projects view to the front of the Package Explorer view by selecting the Web Projects tab next to that tab.</p></li><li><p>Right-click the StrutsHello/WEB-ROOT (WebContent) folder in the Web Projects view and select New/Folder... .</p></li><li><p>Enter pages for a folder name and click Finish.</p></li><li><p>We will keep our presentation files in this folder.</p></li><li><p>Right-click the pages folder and select New/File/JSP... .</p></li><li><p>16. For Name type in inputname (the JSP extension will be automatically added to the file), for Template select StrutsForm, and then click on the Finish button.</p></li><li><p>Right-click the pages folder again and select New/File/JSP... .</p></li><li><p>For Name type in greeting , for Template leave as Blank, and then click on the Finish button.</p></li></ol></div><p>Just leave these files as is for now.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="PlacingthePagePlaceholders"></a>3.2.1.2.&nbsp;Placing the Page Placeholders</h4></div></div><div></div></div><p>Lets now place the two pages just created on the diagram.</p><div class="orderedlist"><ol start="20" type="1"><li><p>Click on the struts-config.xml tab in the Editing area to bring the diagram to the front.</p></li><li><p>Click on the inputname.jsp page in the Web Projects view, drag it onto the diagram, and drop it.</p></li><li>Click on the greeting.jsp page in the Web Projects view, drag it onto the diagram,
and drop it to the right of the /pages/inputname.jsp icon with some extra space.</li></ol></div><p>You should now have two JSP pages in the diagram.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="CreatinganActionMappings"></a>3.2.2.&nbsp;Creating an Action Mappings</h3></div></div><div></div></div><p>Using a context menu on the diagram, we are next going to create an Action mapping.</p><div class="orderedlist"><ol start="23" type="1"><li><p>Right-click between the two icons and select Add/Action</p></li><li><p>Enter the following values:</p></li></ol></div><div class="table"><a name="d0e718"></a><p class="title"><b>Table&nbsp;3.1.&nbsp;</b></p><table border="1"><colgroup><col><col></colgroup></table></div><p>(GetNameForm is the name for a form bean that we will create later.)</p><div class="orderedlist"><ol start="25" type="1"><li><p>Click Finish.</p></li></ol></div><p>The /greeting action should appear in two places, in the diagram and also under the action-mappings node under the struts-config.xml node in the Outline view. Also, note the
asterisk to the right of the name, struts-config.xml, in the Outline view showing that the file has been changed, but not saved to disk.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="CreatingaLink"></a>3.2.3.&nbsp;Creating a Link</h3></div></div><div></div></div><p>Lets now create a link from the inputname.jsp page to the action.</p><div class="orderedlist"><ol start="26" type="1"><li><p>On the left-hand side of the diagram in the column of icons, click on this icon:</p></li><li><p>26. In the connect-the-components mode you are in now, click on the /pages/inputname.jsp icon in the diagram and then click on the /greeting action.</p></li></ol></div><p>A link will be created from the page to the action.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="CreatingaForward"></a>3.2.4.&nbsp;Creating a Forward</h3></div></div><div></div></div><p>Next, we are going to create a forward for the action.</p><div class="orderedlist"><ol start="28" type="1"><li><p>On the left-hand side of the diagram in the column of icons, click on this icon, again:</p></li><li><p>Click on the /greeting action icon in the diagram and then click on the /pages/greeting.jsp icon.</p></li><li><p>Thats it. A link will be drawn from the actions new greeting forward to the greeting.jsp JSP page. Note that the forwards name will be set based on the name of the target JSP file
name. If you dont like it, you can easily change it.</p></li><li><p>Select the Tree tab at the bottom of the editor window (between Diagram and Source).</p></li><li><p>Expand the struts-config.xml/action-mappings//greeting node and then select the greeting forward.</p></li><li><p>In the Properties Editor to the right, change the text to sayHello in the Name field.</p></li><li><p>Select the Diagram tab at the bottom of the editor window and see how the diagram is also updated to reflect the change.</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="CreatingaGlobalForward"></a>3.2.5.&nbsp;Creating a Global Forward</h3></div></div><div></div></div><p>One last component that we need to create in the diagram is a global forward.</p><div class="orderedlist"><ol start="35" type="1"><li><p>Somewhere in the top-left corner of diagram, right-click and select Add/Global Forward....</p></li><li><p>Enter getName in the Name field.</p></li><li><p>Select the Change... button for Path.</p></li><li><p>In the Edit Path window, switch to the Pages tab.</p></li><li><p>Expand the StrutsHello/WEB-ROOT (WebContent)/pages node and then select the inputname.jsp page.</p></li><li><p>Click Ok.</p></li><li><p>Leave the rest of the fields blank and click Ok.</p></li></ol></div><p>A forward object now appears on the diagram and also in the global-forwards folder in the Outline view.</p><div class="orderedlist"><ol start="42" type="1"><li><p>Tidy up the diagram, by clicking and dragging around each icon, so that the diagram looks something like this:</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="CreatingaFormBean"></a>3.2.6.&nbsp;Creating a Form Bean</h3></div></div><div></div></div><p>One last thing that we need to do is to create a form bean.</p><div class="orderedlist"><ol start="43" type="1"><li><p>Switch to the Tree viewer in the editor for the struts-config.xml file, by selecting the Tree tab at the bottom of the editor window.</p></li><li><p>Right-click struts-config.xml/form-beans and select Create Form Bean.</p></li><li><p>Enter GetNameForm in the name field and sample.GetNameForm for type.</p></li><li><p>Click Finish.</p></li><li><p>To save your changes to struts-config.xml, select File/Save from the menu bar.</p></li></ol></div><p>Note the disappearance of the asterisk next to the name, struts-config.xml.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="GeneratingStubCoding"></a>3.3.&nbsp;Generating Stub Coding</h2></div></div><div></div></div><p>We are done with designing the application through the diagram. Now we need to write
      code for the action component. We also need to write an action class for the /greeting mapping
      along with a FormBean. To aid in the coding phase, Exadel Studio can generate Java class
      stubs for all of the components shown in the diagram.</p><div class="orderedlist"><ol start="48" type="1"><li><p>Switch back to the diagram, by selecting the Diagram tab at the bottom of the editor window.</p></li><li><p>Right-click a blank space in the diagram and select Generate Java Code.</p></li><li><p>Leave everything as is in the dialog box and click Generate .</p></li></ol></div><p>You should see a screen that says:</p><p>Generated classes: 2</p><p>Actions: 1</p><p>Form beans: 1</p><div class="orderedlist"><ol start="51" type="1"><li><p>Click Finish.</p></li></ol></div><p>The Java files will be generated in a JavaSource/sample folder that you can see in the Package
    Explorer view under the StrutsHello node. One Action stub and one FormBean stub will have been generated.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="CodingtheVariousFiles"></a>3.4.&nbsp;Coding the Various Files</h2></div></div><div></div></div><p>We will now code both the Java stub classes just generated, the JSP files left in as placeholders 
    from previous steps, and a new start JSP page we will have to create.</p><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="JavaStubClasses"></a>3.4.1.&nbsp;Java Stub Classes</h3></div></div><div></div></div><div class="orderedlist"><ol start="52" type="1"><li><p>To finish the two Java classes, switch to the Package Explorer view and expand the JavaSource/sample folder.</p></li></ol></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="GetNameForm.java"></a>3.4.1.1.&nbsp;GetNameForm.java</h4></div></div><div></div></div><div class="orderedlist"><ol start="53" type="1"><li><p>Double-click GetNameForm.java for editing.</p></li><li><p>You are looking at a Java stub class that was generated by Exadel Studio. Now we are going to edit the file.</p></li><li><p>Add the following attributes at the beginning of the class:</p></li></ol></div><p>private String name = "";</p><p>private String greetName = "";</p><div class="orderedlist"><ol start="56" type="1"><li><p>Inside the reset method, delete the TO DO and throw lines and add:</p></li></ol></div><p>this.name = "";</p><p>this.greetName = "";</p><div class="orderedlist"><ol start="57" type="1"><li><p>Inside the validate method, delete the TO DO and throw lines and add:</p></li></ol></div><p>ActionErrors errors = new ActionErrors();</p><p>return errors;</p><div class="orderedlist"><ol start="58" type="1"><li><p>Right-click and select Source/Generate Getters and Setters... from the context menu.</p></li><li><p>In the dialog box, check the check boxes for name and greetName, select First method for Insertion point, and click on the OK button.</p></li></ol></div><p>The final GetNameForm.java file should look like this:</p><pre class="programlisting">
package sample;
import javax.servlet.http.HttpServletRequest;
import org.apache.struts.action.ActionErrors;
import org.apache.struts.action.ActionMapping;
public class GetNameForm extends org.apache.struts.action.ActionForm {
private String name = "";
private String greetName = "";
public String getName() {
return name;
}
public void setName(String name) {
this.name = name;
}
public String getGreetName() {
return greetName;
}
public void setGreetName(String greetName) {
this.greetName = greetName;
}
public GetNameForm() {
}
public void reset(ActionMapping actionMapping, HttpServletRequest
request) {
this.name = "";
this.greetName = "";
}
public ActionErrors validate(ActionMapping actionMapping,
Exadel Studio: Getting Started Guide for Creating a Struts Application
page 7 of 11
HttpServletRequest request) {
ActionErrors errors = new ActionErrors();
return errors;
}
}
</pre><div class="orderedlist"><ol start="60" type="1"><li><p>Save the file.</p></li></ol></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="GreetingAction.java"></a>3.4.1.2.&nbsp;GreetingAction.java</h4></div></div><div></div></div><div class="orderedlist"><ol start="61" type="1"><li><p>Open GreetingAction.java for editing.</p></li><li><p>Inside the execute method, delete the TO DO and throw lines and add the following:</p></li></ol></div><pre class="programlisting">
String name = ((GetNameForm)form).getName();
String greeting = "Hello, "+name+"!";
((GetNameForm)form).setGreetName(greeting);
return mapping.findForward(FORWARD_sayHello);
The final version of GreetingAction.java should look like this:
package sample;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.ActionMapping;
public class GreetingAction extends org.apache.struts.action.Action {
// Global Forwards
public static final String GLOBAL_FORWARD_getName = "getName";
// Local Forwards
public static final String FORWARD_sayHello = "sayHello";
public GreetingAction() {
}
public ActionForward execute(ActionMapping mapping, ActionForm form,
HttpServletRequest request, HttpServletResponse response) throws
Exception {
String name = ((GetNameForm)form).getName();
String greeting = "Hello, "+name+"!";
((GetNameForm)form).setGreetName(greeting);
return mapping.findForward(FORWARD_sayHello);
}
}
</pre><div class="orderedlist"><ol start="63" type="1"><li><p>Save the file.</p></li><li><p>Close the editors for the two Java files.</p></li></ol></div><p>The last thing left to do is to code the JSP files whose editors should still be open from having been created as placeholders.</p></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="JSPPages"></a>3.4.2.&nbsp;JSP Pages</h3></div></div><div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="inputname.jsp"></a>3.4.2.1.&nbsp;inputname.jsp</h4></div></div><div></div></div><p>In this page, the user will enter any name and click the submit button. Then, the greeting action will be called through the form.</p><div class="orderedlist"><ol start="65" type="1"><li><p>Click on the inputname.jsp tab in the Editing area to bring its editor forward.</p></li><li><p>In the Web Projects view, expand StrutsHello/Configuration/default/strutsconfig.xml/action-mappings and select /greeting.</p></li><li><p>Drag it and drop it between the quotes for the action attribute to the html:form element in the Source pane of the editor.</p></li><li><p>Then type this text on a new line just below this line:</p></li><li><p>Input name:</p></li><li><p>Select the Visual pane of the editor.</p></li><li><p>Then, in the Exadel Palette, expand the Struts Form library, select text, and drag it onto the box.</p></li><li><p>In the Insert Tag dialog box, type in name for property and select Finish.</p></li><li><p>In the Struts Form library in the Exadel Palette, select submit, and drag it to right after the the text box in the Visual pane of the editor.</p></li><li><p>Right-click the submit button and select &lt;html:submit&gt; Attributes from the context menu.</p></li><li><p>In the Attributes dialog box, select the value field and type in Say Hello! for its value.</p></li></ol></div><p>After tidying the page source, the Editor window for the file should look something like this:</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="greeting.jsp"></a>3.4.2.2.&nbsp;greeting.jsp</h4></div></div><div></div></div><p>Next, we will fill in the result page.</p><div class="orderedlist"><ol start="76" type="1"><li><p>Click on the greeting.jsp tab in the Editing area to bring its editor forward.</p></li><li><p>Type in the following code:</p></li></ol></div><pre class="programlisting">
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Greeting&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;p&gt;
&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre><p>To complete editing of this file, we will use macros from the Exadel Palette. This palette is a view that should be available to the right of the editing area.</p><div class="orderedlist"><ol start="78" type="1"><li><p>Click on the Struts Common folder in the Exadel Palette to open it.</p></li><li><p>Position the cursor at the beginning of the greeting.jsp file in the Source pane and then click on bean taglib in the Exadel Palette.</p></li></ol></div><p>This will insert the following line at the top of the file:</p><pre class="programlisting">
&lt;%@ taglib uri="/WEB-INF/struts-bean.tld" prefix="bean" %&gt;
</pre><div class="orderedlist"><ol start="80" type="1"><li><p>Click on the Struts Bean folder in the Exadel Palette to open it.</p></li><li><p>Position the cursor inside the p element.</p></li><li><p>Click on write in the Exadel Palette.</p></li><li><p>Type in GetNameForm for the name attribute and add a property attribute with greetName as its value.</p></li></ol></div><p>The editor should should now look like this:</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h4 class="title"><a name="index.jsp"></a>3.4.2.3.&nbsp;index.jsp</h4></div></div><div></div></div><p>Finally, we will need to create and edit an index.jsp page. This page will use a Struts forward to simply redirect us to the getName global forward.</p><div class="orderedlist"><ol start="84" type="1"><li><p>In the Web Projects view, right-click on StrutsHello/WEB-ROOT(WebContent)</p><p>node and select New/File/JSP... .</p></li><li><p>Type index for Name and click on the Finish button.</p></li><li><p>On the Exadel Palette, select the Struts Common folder of macros by clicking on it in the palette.</p></li><li><p>Click on the logic taglib icon.</p></li><li><p>Press the Enter key in the editor to go to the next line.</p></li><li><p>Back on the palette, select the Struts Logic folder of macros.</p></li><li><p>Click on redirect.</p></li><li><p>Delete the ending tag, put a forward slash in front of the closing angle bracket, and type forward=getName in front of the slash.</p></li></ol></div><p>The finished code for the page is shown below:</p><pre class="programlisting">
&lt;%@ taglib uri="/WEB-INF/struts-logic.tld" prefix="logic" %&gt;
&lt;logic:redirect forward="getName"/&gt;
</pre><div class="orderedlist"><ol start="92" type="1"><li><p>To save all the edits to files, select File/Save All from the menu bar.</p></li></ol></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="CompilingtheClasses"></a>3.5.&nbsp;Compiling the Classes</h2></div></div><div></div></div><p>Because this is the Eclipse environment, no explicit compilation step is required. By default, 
     Eclipse compiles as you go.</p></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="RunningtheApplication"></a>3.6.&nbsp;Running the Application</h2></div></div><div></div></div><p>Everything is now ready for running our applicationwithout having to leave Red Hat Developer Studio
     by using the Tomcat engine that comes with the Red Hat Developer Studio plug-in. For controlling
     Tomcat within Red Hat Developer Studio, the toolbar contains a panel.</p><div class="orderedlist"><ol start="93" type="1"><li>Start up Tomcat by clicking on the first icon from left in this panel. (If Tomcat is
    already running, stop it by clicking on the third icon from the left and then start it
    again. Remember, the Struts run-time requires restarting the servlet engine when
    any changes have been made.)</li><li>After the messages in the Console tabbed view stop scrolling, Tomcat is available.
    At this point, right-click on the getName global forward in the struts-config.xml
    diagram view and select Run on Server.</li></ol></div><p>The browser should appear with the application started.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="GettingStartedForCreatingAJSFApplication.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="index.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="GettingStartedStrutsValidationExamples.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;2.&nbsp;Getting Started Guide for
Creating a JSF Application&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;4.&nbsp;Getting Started Struts Validation Examples</td></tr></table></div></body></html>