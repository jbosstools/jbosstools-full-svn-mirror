<?xml version='1.0' encoding='UTF-8'?>
<chapter id="GettingStartedGuideforCreatingaStrutsApplication" xreflabel="GettingStartedGuideforCreatingaStrutsApplication">
    <?dbhtml filename="GettingStartedGuideforCreatingaStrutsApplication.html"?>
    <title>Getting Started Guide for Creating a Struts Application</title>
<para>We are going to show you how to create a simple Struts application using the Red Hat Developer Studio
plug-in for Eclipse. The completed application will ask a user to enter a name and click a button.
The resulting new page will display the familiar message, Hello &lt;name&gt;!</para>
<para>This document will show you how to create such an application from the beginning, along
the way demonstrating some of the powerful features of Red Hat Developer Studio. You will design the
application, generate stub code for the application, fill in the stub coding, compile the application,
and run the application all from inside Red Hat Developer Studio.</para>
<para>Well assume that you have already launched Eclipse with Red Hat Developer Studio installed and also that the Red Hat Developer Studio perspective is the current perspective. (If not,
make it active by selecting Window/Open Perspective/Other/Red Hat Developer Studio from the menu bar.)</para>

    <section id="StartingUp">
    <title>Starting Up</title>   
<para>We are first going to create a new project for the application.</para>
 <itemizedlist>
<listitem><para>Go to the menu bar and select File/New/<emphasis>Project...</emphasis>.</para></listitem>
<listitem><para><emphasis>Select Red Hat Developer Studio/Struts/Struts Project</emphasis> in the New Project dialog box.</para></listitem>
<listitem><para>Click Next >.</para></listitem>
<listitem><para>Enter StrutsHello as the project name.</para></listitem>
<listitem><para>Leave everything else as is, and click Next >.</para></listitem>
<listitem><para>Click Next> again.</para></listitem>
     <listitem><para>7. Make sure that struts-bean.tld, struts-html.tld, and struts-logic.tld are checked in the list of included tag libraries and then click Finish.</para></listitem>
</itemizedlist>   
<para>A StrutsHello node should appear in the upper-left Package Explorer view.</para>
  <itemizedlist continuation="continues">
<listitem><para>Click the plus sign next to StrutsHello to reveal the child nodes.</para></listitem>
<listitem><para>Click the plus sign next to WebContent under StrutsHello.</para></listitem>
<listitem><para>Click the plus sign next to WEB-INF under WebContent.</para></listitem>
      <listitem><para>Then, double-click on the struts-config.xml node to display a diagram of the Struts application configuration file in the editing area.</para></listitem>
 </itemizedlist> 
<para>At this point, its empty except for the background grid lines.</para>
    </section>

    <section id="CreatingtheApplicationComponents">
        <?dbhtml filename="CreatingtheApplicationComponents.html"?>
        <title>Creating the Application Components</title>
<para>Now, we will design the application by creating the individual components as placeholders
first. (We dont have to complete all of the details inside the components until afterwards.)</para>
        <section id="CreatingJSPPagePlaceholders">
         <title>Creating JSP Page Placeholders</title>
            <para>Next, let&apos;s create and place two JSP pages. We will not write any code for the files, but only
create them as placeholders so that we can create links to them in the diagram. We will write
the code a little bit later.</para>
            <section id="CreatingthePagePlaceholders">
           <title>Creating the Page Placeholders</title>
 <itemizedlist continuation="continues">
<listitem><para>Bring the Web Projects view to the front of the Package Explorer view by selecting the Web Projects tab next to that tab.</para></listitem>
<listitem><para>Right-click the StrutsHello/WEB-ROOT (WebContent) folder in the Web Projects view and select New/<emphasis>Folder...</emphasis>.</para></listitem>
<listitem><para>Enter pages for a folder name and click Finish.</para></listitem>
     
<listitem><para>We will keep our presentation files in this folder.</para></listitem>

<listitem><para>Right-click the pages folder and select New/File/JSP... .</para></listitem>
               <listitem><para>For Name type in inputname (the JSP extension will be automatically added to the file), for Template select StrutsForm, and then click on the Finish button.</para></listitem>
<listitem><para>Right-click the pages folder again and select New/File/JSP... .</para></listitem>
<listitem><para>For Name type in greeting , for Template leave as Blank, and then click on the Finish button.</para></listitem>
 </itemizedlist>
<para>Just leave these files as is for now.</para>
        </section>
            <section id="PlacingthePagePlaceholders">
     <title>Placing the Page Placeholders</title>
<para>Lets now place the two pages just created on the diagram.</para>
     <itemizedlist continuation="continues">
<listitem><para>Click on the struts-config.xml tab in the Editing area to bring the diagram to the front.</para></listitem>
<listitem><para>Click on the inputname.jsp page in the Web Projects view, drag it onto the diagram, and drop it.</para></listitem>
<listitem>Click on the greeting.jsp page in the Web Projects view, drag it onto the diagram,
and drop it to the right of the /pages/inputname.jsp icon with some extra space.</listitem>
</itemizedlist>
<para>You should now have two JSP pages in the diagram.</para>
 </section>
 </section>    
        <section id="CreatinganActionMappings">
        <title>Creating an Action Mappings</title>
<para>Using a context menu on the diagram, we are next going to create an Action mapping.</para>
        <itemizedlist continuation="continues">
<listitem><para>Right-click between the two icons and select Add/Action</para></listitem>
<listitem><para>Enter the following values:</para></listitem>
        </itemizedlist>
        <table>
             <tgroup cols="2">
                 <tbody>
                 <row>
                       <entry>path</entry>
                       <entry>/greeting</entry>
	 </row>
                 <row>
                     <entry>name</entry>
                     <entry>GetNameForm</entry>
                 </row>
                 <row>
                     <entry>scope</entry>
                     <entry>request</entry>
                 </row>
                 <row>
                     <entry>type</entry>
                     <entry>sample.GreetingAction</entry>
                 </row>
                 <row>
                     <entry>validate</entry>
                     <entry>&lt;leave blank&gt;</entry>
                 </row>
                     </tbody>
                 </tgroup>
        </table>
<para>(GetNameForm is the name for a form bean that we will create later.)</para>
<itemizedlist continuation="continues">
        <listitem><para>Click Finish.</para></listitem>
</itemizedlist>
            
<para>The /greeting action should appear in two places, in the diagram and also under the action-mappings node under the struts-config.xml node in the Outline view. Also, note the
asterisk to the right of the name, struts-config.xml, in the Outline view showing that the file has been changed, but not saved to disk.</para>
    </section>
        <section id="CreatingaLink">
         <title>Creating a Link</title>
<para>Let&apos;s now create a link from the inputname.jsp page to the action.</para>
         <itemizedlist continuation="continues">
<listitem><para>On the left-hand side of the diagram in the column of icons, click on this icon:</para></listitem>
         </itemizedlist>
            <figure>
                <title>Create New Connection Icon</title>
                <mediaobject> 
                    <imageobject>
                        <imagedata fileref="images/arrow.png"/>
                    </imageobject>
                </mediaobject>
                </figure>
            <itemizedlist continuation="continues">
             <listitem><para>In the connect-the-components mode you are in now, click on the /pages/inputname.jsp icon in the diagram and then click on the /greeting action.</para></listitem>
         </itemizedlist>
<para>A link will be created from the page to the action.</para>
     </section>
        <section id="CreatingaForward">
         <title>Creating a Forward</title>
<para>Next, we are going to create a forward for the action.</para>
         <itemizedlist continuation="continues">        
<listitem><para>On the left-hand side of the diagram in the column of icons, click on this icon, again:</para></listitem>
         </itemizedlist>
            <figure>
                <title>Create New Connection Icon</title>
                <mediaobject> 
                    <imageobject>
                        <imagedata fileref="images/arrow.png"/>
                    </imageobject>
                </mediaobject>
            </figure>
            <itemizedlist continuation="continues">>
<listitem><para>Click on the /greeting action icon in the diagram and then click on the /pages/greeting.jsp icon.</para></listitem>
             
<listitem><para>Thats it. A link will be drawn from the actions new greeting forward to the greeting.jsp JSP page. Note that the forwards name will be set based on the name of the target JSP file
name. If you dont like it, you can easily change it.</para></listitem>

<listitem><para>Select the Tree tab at the bottom of the editor window (between Diagram and Source).</para></listitem>
<listitem><para>Expand the struts-config.xml/action-mappings//greeting node and then select the greeting forward.</para></listitem>
<listitem><para>In the Properties Editor to the right, change the text to sayHello in the Name field.</para></listitem>
<listitem><para>Select the Diagram tab at the bottom of the editor window and see how the diagram is also updated to reflect the change.</para></listitem>
             </itemizedlist>
     </section>
        <section id="CreatingaGlobalForward">
         <title>Creating a Global Forward</title>
<para>One last component that we need to create in the diagram is a global forward.</para>
 <itemizedlist continuation="continues">
<listitem><para>Somewhere in the top-left corner of diagram, right-click and select <emphasis> Add/Global Forward...</emphasis></para></listitem>
<listitem><para>Enter getName in the Name field.</para></listitem>
<listitem><para>Select the <emphasis>Change...</emphasis>button for Path.</para></listitem>
<listitem><para>In the Edit Path window, switch to the Pages tab.</para></listitem>
<listitem><para>Expand the <emphasis>StrutsHello/WEB-ROOT (WebContent)/pages</emphasis> node and then select the inputname.jsp page.</para></listitem>
<listitem><para>Click <emphasis>Ok</emphasis>.</para></listitem>
<listitem><para>Leave the rest of the fields blank and click <emphasis>Ok</emphasis>.</para></listitem>
 </itemizedlist>    
<para>A forward object now appears on the diagram and also in the global-forwards folder in the Outline view.</para>
         <itemizedlist continuation="continues">
             <listitem><para>Tidy up the diagram, by clicking and dragging around each icon, so that the diagram looks something like this:</para></listitem>
         </itemizedlist>
            <figure>
                <title>Diagram View</title>
                <mediaobject> 
                    <imageobject>
                        <imagedata fileref="images/Diagram.png"/>
                    </imageobject>
                </mediaobject>
            </figure>
     </section>
        <section id="CreatingaFormBean">
         <title>Creating a Form Bean</title>
<para>One last thing that we need to do is to create a form bean.</para>
 <itemizedlist continuation="continues">
<listitem><para>Switch to the Tree viewer in the editor for the struts-config.xml file, by selecting the Tree tab at the bottom of the editor window.</para></listitem>
<listitem><para>Right-click struts-config.xml/form-beans and select Create Form Bean.</para></listitem>
<listitem><para>Enter GetNameForm in the name field and sample.GetNameForm for type.</para></listitem>
<listitem><para>Click Finish.</para></listitem>
<listitem><para>To save your changes to struts-config.xml, select <emphasis>File/Save</emphasis> from the menu bar.</para></listitem>
 </itemizedlist>
<para>Note the disappearance of the asterisk next to the name, struts-config.xml.</para>
</section>
</section>
    
    <section id="GeneratingStubCoding">
        <?dbhtml filename="GeneratingStubCoding.html"?>
     <title>Generating Stub Coding</title>
  <para>We are done with designing the application through the diagram. Now we need to write
      code for the action component. We also need to write an action class for the /greeting mapping
      along with a FormBean. To aid in the coding phase, Red Hat Developer Studio can generate Java class
      stubs for all of the components shown in the diagram.</para>
 <itemizedlist continuation="continues">
<listitem><para>Switch back to the diagram, by selecting the Diagram tab at the bottom of the editor window.</para></listitem>
<listitem><para>Right-click a blank space in the diagram and select Generate Java Code.</para></listitem>
<listitem><para>Leave everything as is in the dialog box and click Generate .</para></listitem>
</itemizedlist>
<para>You should see a screen that says:</para>
<para>Generated classes: 2</para>
<para>Actions: 1</para>
<para>Form beans: 1</para>
     <itemizedlist continuation="continues">
<listitem><para>Click Finish.</para></listitem>
     </itemizedlist>
<para>The Java files will be generated in a <emphasis>JavaSource/sample</emphasis> folder that you can see in the Package
    Explorer view under the StrutsHello node. One Action stub and one FormBean stub will have been generated.</para>
 </section>
    <section id="CodingtheVariousFiles">
        <?dbhtml filename="CodingtheVariousFiles.html"?>   
     <title>Coding the Various Files</title>
<para>We will now code both the Java stub classes just generated, the JSP files left in as placeholders 
    from previous steps, and a new start JSP page we will have to create.</para>
        <section id="JavaStubClasses">
         <title>Java Stub Classes</title>
  <itemizedlist continuation="continues">
      <listitem><para>To finish the two Java classes, switch to the Package Explorer view and expand the <emphasis>JavaSource/sample</emphasis> folder.</para></listitem>
 </itemizedlist>
            <section id="GetNameForm.java">
    <title>GetNameForm.java</title>
    <itemizedlist continuation="continues">
<listitem><para>Double-click GetNameForm.java for editing.</para></listitem>
 
<listitem><para>You are looking at a Java stub class that was generated by Red Hat Developer Studio. Now we are going to edit the file.</para></listitem>

<listitem><para>Add the following attributes at the beginning of the class:</para></listitem>
     </itemizedlist>
<para>private String name = "";</para>
<para>private String greetName = "";</para>
    <itemizedlist continuation="continues">
<listitem><para>Inside the reset method, delete the TO DO and throw lines and add:</para></listitem>
</itemizedlist>
<para>this.name = "";</para>
<para>this.greetName = "";</para>
    <itemizedlist continuation="continues">
<listitem><para>Inside the validate method, delete the TO DO and throw lines and add:</para></listitem>
     </itemizedlist>
<para>ActionErrors errors = new ActionErrors();</para>
<para>return errors;</para>
    <itemizedlist continuation="continues">
<listitem><para>Right-click and select Source/Generate Getters and <emphasis>Setters...</emphasis>from the context menu.</para></listitem>
<listitem><para>In the dialog box, check the check boxes for name and greetName, select First method for Insertion point, and click on the OK button.</para></listitem>
        </itemizedlist>
<para>The final GetNameForm.java file should look like this:</para>
<programlisting role="JAVA"><![CDATA[
package sample;

import javax.servlet.http.HttpServletRequest;
import org.apache.struts.action.ActionErrors;
import org.apache.struts.action.ActionMapping;

public class GetNameForm extends org.apache.struts.action.ActionForm {
	
	private String name = "";
	private String greetName = "";
	
	public String getName() {
		return name;
	}
	public void setName(String name) {
		this.name = name;
	}
	
	public String getGreetName() {
		return greetName;
	}
	
	public void setGreetName(String greetName) {
		this.greetName = greetName;
	}
	
	public GetNameForm() {
	}
	
	public void reset(ActionMapping actionMapping, HttpServletRequest request) {
		this.name = "";
		this.greetName = "";
	}
	
	public ActionErrors validate(ActionMapping actionMapping, HttpServletRequest request) {
		ActionErrors errors = new ActionErrors();
		return errors;
	}
}
]]></programlisting>
    
<itemizedlist continuation="continues">
<listitem><para>Save the file.</para></listitem>
</itemizedlist>
</section>
            <section id="GreetingAction.java">
             <title>GreetingAction.java</title>
 <itemizedlist continuation="continues">
<listitem><para>Open GreetingAction.java for editing.</para></listitem>
<listitem><para>Inside the execute method, delete the TO DO and throw lines and add the following:</para></listitem>
 </itemizedlist>
     
     <programlisting role="JAVA"><![CDATA[
String name = ((GetNameForm)form).getName();
String greeting = "Hello, "+name+"!";
((GetNameForm)form).setGreetName(greeting);
return mapping.findForward(FORWARD_sayHello);

The final version of GreetingAction.java should look like this:
package sample;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.ActionMapping;

public class GreetingAction extends org.apache.struts.action.Action {
	
	// Global Forwards
	public static final String GLOBAL_FORWARD_getName = "getName";
	
	// Local Forwards
	public static final String FORWARD_sayHello = "sayHello";
	
	public GreetingAction() {
	}
	public ActionForward execute(ActionMapping mapping, ActionForm form,
	HttpServletRequest request, HttpServletResponse response) throws Exception {
		String name = ((GetNameForm)form).getName();
		String greeting = "Hello, "+name+"!";
		((GetNameForm)form).setGreetName(greeting);
		return mapping.findForward(FORWARD_sayHello);
	}
}
]]></programlisting>
     <itemizedlist continuation="continues">
<listitem><para>Save the file.</para></listitem>
<listitem><para>Close the editors for the two Java files.</para></listitem>
 </itemizedlist>
<para>The last thing left to do is to code the JSP files whose editors should still be open from having been created as placeholders.</para>
   </section>
 </section>
        <section id="JSPPages">
         <title>JSP Pages</title>
            <section id="inputname.jsp">
             <title>inputname.jsp</title>
<para>In this page, the user will enter any name and click the submit button. Then, the greeting action will be called through the form.</para>
 <itemizedlist continuation="continues">
<listitem><para>Click on the inputname.jsp tab in the Editing area to bring its editor forward.</para></listitem>
<listitem><para>In the Web Projects view, expand <emphasis>StrutsHello/Configuration/default/strutsconfig.xml/action-mappings</emphasis> and select <emphasis>/greeting</emphasis>.</para></listitem>
<listitem><para>Drag it and drop it between the quotes for the action attribute to the html:form element in the Source pane of the editor.</para></listitem>
<listitem><para>Then type this text on a new line just below this line:</para></listitem>
 
<listitem><para>Input name:</para></listitem>

<listitem><para>Select the Visual pane of the editor.</para></listitem>
<listitem><para>Then, in the Red Hat Palette, expand the Struts Form library, select text, and drag it onto the box.</para></listitem>
 </itemizedlist>
                <figure>
                    <title>Red Hat Palette</title>
                    <mediaobject> 
                        <imageobject>
                            <imagedata fileref="images/RH_Palette.png"/>
                        </imageobject>
                    </mediaobject>
                </figure>
 <itemizedlist continuation="continues">
 <listitem><para>In the Insert Tag dialog box, type in name for property and select Finish.</para></listitem>
<listitem><para>In the Struts Form library in the Red Hat Palette, select submit, and drag it to right after the the text box in the Visual pane of the editor.</para></listitem>
<listitem><para>Right-click the submit button and select &lt;html:submit&gt; Attributes from the context menu.</para></listitem>
<listitem><para>In the Attributes dialog box, select the value field and type in Say Hello! for its value.</para></listitem>
 </itemizedlist>
<para>After tidying the page source, the Editor window for the file should look something like this:</para>
                <figure>
                    <title>Editor window</title>
                    <mediaobject> 
                        <imageobject>
                            <imagedata fileref="images/strinputname.png"/>
                        </imageobject>
                    </mediaobject>
                </figure>
 </section>
            <section id="greeting.jsp">
             <title>greeting.jsp</title>
<para>Next, we will fill in the result page.</para>
<itemizedlist continuation="continues">
<listitem><para>Click on the greeting.jsp tab in the Editing area to bring its editor forward.</para></listitem>
<listitem><para>Type in the following code:</para></listitem>
    </itemizedlist>
<programlisting role="XML"><![CDATA[
<html>
<head>
	<title>Greeting</title>
</head>
	<body>
		<p>
		</p>
	</body>
</html>
]]></programlisting>

<para>To complete editing of this file, we will use macros from the Red Hat Palette. This palette is a view that should be available to the right of the editing area.</para>
     <itemizedlist continuation="continues">
<listitem><para>Click on the <emphasis>Struts Common</emphasis> folder in the Red Hat Palette to open it.</para></listitem>
<listitem><para>Position the cursor at the beginning of the greeting.jsp file in the Source pane and then click on bean taglib in the Red Hat Palette.</para></listitem>
</itemizedlist>
<para>This will insert the following line at the top of the file:</para>
<programlisting role="JAVA"><![CDATA[
<%@ taglib uri="/WEB-INF/struts-bean.tld" prefix="bean" %>
]]></programlisting>
<itemizedlist continuation="continues">
<listitem><para>Click on the Struts Bean folder in the Red Hat Palette to open it.</para></listitem>
<listitem><para>Position the cursor inside the p element.</para></listitem>
<listitem><para>Click on write in the Red Hat Palette.</para></listitem>
<listitem><para>Type in GetNameForm for the name attribute and add a property attribute with greetName as its value.</para></listitem>
    </itemizedlist>
<para>The editor should should now look like this:</para>
                <figure>
                    <title>Editor window</title>
                    <mediaobject> 
                        <imageobject>
                            <imagedata fileref="images/strgreeting.png"/>
                        </imageobject>
                    </mediaobject>
                </figure>
 </section>
            <section id="index.jsp">
             <title>index.jsp</title>
<para>Finally, we will need to create and edit an index.jsp page. This page will use a Struts forward to simply redirect us to the getName global forward.</para>
 <itemizedlist continuation="continues">
<listitem><para>In the Web Projects view, right-click on <emphasis>StrutsHello/WEB-ROOT(WebContent)</emphasis></para>
<para>node and select <emphasis>New/File/JSP...</emphasis> .</para>
</listitem>
<listitem><para>Type index for Name and click on the Finish button.</para></listitem>
<listitem><para>On the Red Hat Palette, select the Struts Common folder of macros by clicking on it in the palette.</para></listitem>
<listitem><para>Click on the logic taglib icon.</para></listitem>
<listitem><para>Press the Enter key in the editor to go to the next line.</para></listitem>
<listitem><para>Back on the palette, select the Struts Logic folder of macros.</para></listitem>
<listitem><para>Click on redirect.</para></listitem>
<listitem><para>Delete the ending tag, put a forward slash in front of the closing angle bracket, and type forward=getName in front of the slash.</para></listitem>
 </itemizedlist>
<para>The finished code for the page is shown below:</para>
<programlisting role="JAVA"><![CDATA[
<%@ taglib uri="/WEB-INF/struts-logic.tld" prefix="logic" %>
<logic:redirect forward="getName"/>
]]></programlisting>
       <itemizedlist continuation="continues">      
<listitem><para>To save all the edits to files, select File/Save All from the menu bar.</para></listitem>
         </itemizedlist>
     </section>
   </section>
 </section>
    <section id="CompilingtheClasses">
        <?dbhtml filename="CompilingtheClasses.html"?>
        <title>Compiling the Classes</title>
 <para>Because this is the Eclipse environment, no explicit compilation step is required. By default, 
     Eclipse compiles as you go.</para>
    </section>
    <section id="RunningtheApplication">
     <?dbhtml filename="RunningtheApplication.html"?>
        <title>Running the Application</title>
 <para>Everything is now ready for running our applicationwithout having to leave Red Hat Developer Studio
     by using the JBoss Application Server engine that comes with the Red Hat Developer Studio plug-in. For controlling
     JBoss AS within Red Hat Developer Studio, the toolbar contains a panel.</para>
        <figure>
            <title>JBoss Server Panel</title>
            <mediaobject> 
                <imageobject>
                    <imagedata fileref="images/running.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        <itemizedlist continuation="continues">
<listitem>Start up JBoss AS by clicking on the first icon from left in this panel. (If JBoss AS is
    already running, stop it by clicking on the third icon from the left and then start it
    again. Remember, the Struts run-time requires restarting the servlet engine when
    any changes have been made.)</listitem>
<listitem>After the messages in the Console tabbed view stop scrolling, JBoss AS is available.
    At this point, right-click on the getName global forward in the struts-config.xml
    diagram view and select Run on Server.</listitem>
 </itemizedlist>
<para>The browser should appear with the application started.</para>
    </section>
    
    <section id="OtherRelevantResourcesOnTheTopic4">
<?dbhtml filename="OtherRelevantResourcesOnTheTopic4.html"?>
<title>Other relevant resources on the topic</title>
<para>Apache Struts: <ulink url="http://struts.apache.org/">Struts Technology</ulink></para>
<para>Struts 2: <ulink url="http://struts.apache.org/2.x/">Apache Struts 2</ulink></para>
<para>Get Started: <ulink url="http://struts.apache.org/2.x/docs/home.html">Struts Getting Started</ulink></para>
<para>Struts on IBM: <ulink url="http://www.ibm.com/developerworks/library/j-struts/">Struts - An open-source MVC implementation</ulink></para>
<para>FAQ: <ulink url="http://struts.apache.org/2.x/docs/faqs.html">Struts FAQ</ulink></para>
<para>Download: <ulink url="http://struts.apache.org/download.cgi#struts206">Release of Apache Struts</ulink></para>
</section>
</chapter>