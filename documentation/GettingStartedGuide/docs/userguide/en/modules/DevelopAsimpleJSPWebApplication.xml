<?xml version="1.0" encoding="UTF-8"?>
<chapter id="DevelopingASimpleWebApplication" xreflabel="DevelopingASimpleWebApplication">
	<?dbhtml filename="DevelopingASimpleWebApplication.html"?>
	<chapterinfo>
    <keywordset>
      <keyword>Red Hat Developer Studio</keyword>
      <keyword>JSP</keyword>
      <keyword>JBoss</keyword>
    </keywordset>
  </chapterinfo>
	<title>Developing a simple JSP web application</title>
	<para>In this chapter you'll find out how to create a simple JSP application using the Red Hat Developer Studio. The application will show a classic &quot;Hello World!&quot; on the page.</para>
	<para>We&apos;ll assume that you have already launched Red Hat Developer Studio and
also that the Red Hat perspective is the current perspective. (If not, make it active by selecting <emphasis><property>Window/Open Perspective/Red Hat Developer Studio</property></emphasis> from the menu bar or by selecting <emphasis><property>Window/
Open Perspective/Other...</property></emphasis> from the menu bar and then selecting Red Hat Developer Studio from
the Select Perspective dialog box.)</para>
	<section id="SettingUpTheProject">
		<?dbhtml filename="SettingUpTheProject.html"?>
		<title>Setting Up the Project</title>
		<para>At first a new project for the application will be created.</para>
		<itemizedlist>
     <listitem><para>Go to the menu bar and select <emphasis><property>File/New/Project...</property></emphasis></para></listitem>
     <listitem><para>Select  <emphasis><property>Web/Dynamic Web Project</property></emphasis> in the New Project dialog box</para></listitem>
     <listitem><para>Click Next &gt;</para></listitem>
     <listitem><para>Enter &quot;jspHello&quot; as the project name</para></listitem>
     <listitem><para>Leave everything else as is, and click Finish</para></listitem>
     </itemizedlist>
     <figure>
			<title>Create New Web Project</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/newproject1.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		<para>A jspHello node should appear in the upper-left Package Explorer view.</para>
		<figure>
			<title>New Web Project</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/newproject2.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		</section>
		
		<section id="CreatingJSPPage">
		<?dbhtml filename="CreatingJSPPage.html"?>
		<title>Creating JSP Page</title>
		<para>In our simple application we need to create only one JSP page which displays a &quot;Hello World!&quot; message.</para>
		<itemizedlist continuation="continues">
<listitem><para>Right click <emphasis>WebContent &gt; New &gt; JSP.</emphasis></para></listitem>
<listitem><para>Type &quot;hello.jsp&quot; for a file name and click the <emphasis><property>Next</property></emphasis> button.</para></listitem>
</itemizedlist>
<para>In the next window you can choose a template for your jsp page and see its preview.</para>
<itemizedlist continuation="continues">
<listitem><para>Select &quot;New JSP File (xhtml)&quot; template and click <emphasis><property>Finish</property></emphasis> button.</para></listitem>
</itemizedlist>
<figure>
			<title>Create JSP Page</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/newproject3.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		<para>Our hello.jsp page will now appear in Project Explorer.</para>
		<section id="EditingJSPPage">
		<?dbhtml filename="EditingJSPPage.html"?>
		<title>Editing a JSP Page</title>
		<para>Let&apos;s now make a little change so that a jsp page displays &quot;Hello World!&quot; message.</para>
		<itemizedlist continuation="continues">
<listitem><para>Insert this line inside the <emphasis role="bold"><property>&lt;body&gt;</property></emphasis><emphasis role="bold"><property>&lt;/body&gt;</property></emphasis> tag:
</para></listitem>
</itemizedlist>
<programlisting role="XML"><![CDATA[<% out.println("Hello World!"); %>]]>
</programlisting>

<para>Notice that content assist functionality is always available when you are typing:</para>
<figure>
			<title>Content Assist in JSP page</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/newproject4.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		<para>After changes are made your hello.jsp page should look like this:</para>
		<figure>
			<title>Hello.jsp page</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/newproject5.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		</section>
		
		<section id="WebXML">
		<?dbhtml filename="WebXML.html"?>
		<title>web.xml file</title>
		<para>When you are creating web project the wizard creates the web.xml for you automatically.  The web.xml file editor provided by Red Hat Developer Studio is available in two modes: design and source.</para>
		<figure>
			<title>web.xml in design mode</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/webxmldesign.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		<figure>
			<title>web.xml in source mode</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/webxmlsource.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		<para>Both modes are fully synchronized. Let&apos;s add mapping to our hello.jsp page in web.xml file.</para>
		<itemizedlist>
			<listitem><para>Switch to source mode.</para></listitem>
			<listitem><para>Add the next code into <emphasis role="bold"><property>&lt;welcome-file-list&gt;</property></emphasis>:</para></listitem>
		</itemizedlist>
		<programlisting role="XML"><![CDATA[<welcome-file>hello.jsp</welcome-file>
]]></programlisting>
<para>If you come back to design mode you will see that the changes made are automatically reflected in that mode.</para>
<para>Actually you don&apos;t really need any config right now. You can clear the web.xml file, save it and you&apos;ll still be able to launch your application.</para>
		</section>
		
		<section id="DeployTheProject">
		<?dbhtml filename="DeployTheProject.html"?>
		<title>Deploying the project</title>
		<para>While creating any web project you could experience a pain writing ant scripts and managing the 
packaging even if a developer is writing the most trivial web applications. With Red Hat Developer Studio you are saved from such a pain. All you need is to start JBoss server and launch your application in your favorite browser.</para>
       <para>You can also create a war archive with RHDS&apos;s Archive Tools and export it to any web server.</para>
       <section id="WarConfig">
		<?dbhtml filename="WarConfig.html"?>
		<title>WAR Config</title>
		<para>Project archives managing is available through <emphasis>Project archives</emphasis> view.</para>
		<itemizedlist>
		<listitem><para>Select <emphasis>Window &gt; Show view &gt; Other &gt; JBoss Tools &gt; Project archives</emphasis> from menu bar</para></listitem>
		<listitem><para>Select a project in Package Explorer you want to be archived</para></listitem>
		</itemizedlist>
		<para>In Project Archives you will see available archive types for the project:</para>
		<figure>
			<title>Project Archives</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/simplejspwebapplication.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		<itemizedlist>
		<listitem><para>Click, for example, <emphasis>WA</emphasis> option to create war archive</para></listitem>
		</itemizedlist>
		<para>In the dialog New WAR you can see automatically selected default values</para>
		<figure>
			<title>New WAR archive</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/simplejspwebapplication2.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		<itemizedlist>
		<listitem><para>Click Next to see a stub archive configuration for your project:
		<figure>
			<title>Stub Archive Configuration</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/simplejspwebapplication3.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		</para></listitem>
		<listitem><para>Click Finish. The <emphasis>.war</emphasis> file will appear in Package Explorer and in Project archives view as structure tree:
		<figure>
			<title>Archive is created</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/simplejspwebapplication4.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		<figure>
			<title>Archive in Project archives view</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/simplejspwebapplication5.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		</para></listitem>
		</itemizedlist>
		<para>Via Project archives view you could now edit your archive, add new folders, publish to server, and so on:</para>
		<figure>
			<title>Configure archive</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/simplejspwebapplication6.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		</section>
		
		<section id="AutoRedeploy">
		<?dbhtml filename="AutoRedeploy.html"?>
		<title>Auto redeploy</title>
		<para>TO BE DONE</para>
		</section>
		</section>
		
		<section id="Previewtab">
		<?dbhtml filename="Previewtab.html"?>
		<title>JSP Page Preview</title>
		<para>RHDS comes with JSP design-time preview features. When designing JSP pages you can easily preview how they will look during runtime. You can even attach your stylesheet to the preview.</para>
		<itemizedlist>
			<listitem><para>Make a little change to hello.jsp page, e.g. put this code snippet:</para></listitem>
			</itemizedlist>
			<programlisting role="XML"><![CDATA[<%= new java.util.Date() %>
]]></programlisting>
		<itemizedlist>
			<listitem><para>Click Save button.</para></listitem>
			<listitem><para>Switch to Preview page by clicking Preview tab at the bottom of the page. You will see how the page will look at runtime.</para></listitem>
			</itemizedlist>
		<figure>
			<title>Preview Page</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/default.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		</section>
		<section id="LaunchingTheProject">
		<?dbhtml filename="LaunchingTheProject.html"?>
		<title>Launch JSP Project</title>
		<para>Let&apos;s now launch our project on server. We&apos;ll use JBoss server that is shipped with Red Hat Developer Studio.</para>
		<itemizedlist continuation="continues">
<listitem><para>Start JBoss server from JBoss Server view by clicking the Start icon.</para></listitem>
</itemizedlist>
<figure>
			<title>Starting server</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/startingfromicon.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		<itemizedlist continuation="continues">
<listitem><para>Click the Run icon or right click your project folder and select <emphasis>Run on Server</emphasis>. If you haven&apos;t made any changes in web.xml file or cleared it out you can launch the application by right clicking the hello.jsp page and selecting <emphasis>Run on the Server</emphasis>.</para></listitem>
</itemizedlist>
<figure>
			<title>Run project</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/newproject19.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		<para>You should see the next page in a browser :</para>
		<figure>
			<title>Running project</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/default.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		</section>
		</section>
		
</chapter>