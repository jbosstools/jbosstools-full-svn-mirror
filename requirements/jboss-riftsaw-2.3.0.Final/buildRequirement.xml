<?xml version="1.0" encoding="UTF-8"?>
<!--

download required dependencies
-jbossas
-jbossesb
-riftsaw

unpack jbossas to location different from default
install jbossesb
install riftsaw

--> 
<project name="projectroject" default="build.requirement">
	<property file="build.properties" />
	
	<target name="build.requirement" depends="unpack.requirement,install-jbossas,install-jbossesb,install-riftsaw" />
	<target name="download.requirement" />
	<target name="unpack.requirement" >
		<ant dir="../jbossas" antfile="buildRequirement.xml" target="download.requirement" inheritall="true">
			<property name="requirement" value="jbossas"/>
		</ant>
		<ant dir="../jbossesb-4.10" antfile="../generic/build.xml" target="build.requirement" inheritall="true">
			<property name="requirement" value="jbossesb-4.10"/>
		</ant>
		<ant dir="../riftsaw-2.3.0.Final" antfile="../generic/build.xml" target="build.requirement" inheritall="true">
			<property name="requirement" value="riftsaw-2.3.0.Final"/>
		</ant>
	</target>
	<target name="install-jbossas" >
		<property file="../jbossas/build.properties" />
		<unzip src="${requirement.build.root}/../download/jbossas/${jboss51.build.archive}" dest="${unzip.dest}" >
			<mapper type="glob" from="${jboss51.build.name}/*" to="${jboss51.build.name}-riftsaw-2.3.0.Final/*"/>
		</unzip>
	</target>
	<target name="install-jbossesb" >
		<property file="../jbossesb-4.10/build.properties" prefix="jbossesb-4.10" />
		<ant dir="${unzip.dest}/${jbossesb-4.10.build.archive.root}/install" target="deploy">
			<property name="org.jboss.esb.server.home" value="${unzip.dest}/${jboss51.build.name}-riftsaw-2.3.0.Final" />
			<property name="org.jboss.esb.server.config" value="default" />
		</ant>
	</target>
	<target name="install-riftsaw" >
		<property file="../riftsaw-2.3.0.Final/build.properties" prefix="riftsaw-2.3.0.Final" />
		<ant dir="${unzip.dest}/${riftsaw-2.3.0.Final.build.archive.root}/install" target="deploy">
			<property name="org.jboss.as.home" value="${unzip.dest}/${jboss51.build.name}-riftsaw-2.3.0.Final" />
			<property name="org.jboss.as.config" value="default" />
			<property name="org.jboss.esb.home" value="${unzip.dest}/${jbossesb.build.archive.root}" />
			<property name="databasev" value="hsql" />
		</ant>
	</target>


</project>
