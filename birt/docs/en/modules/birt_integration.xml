<?xml version='1.0' encoding='UTF-8'?>
<chapter id="Birt_Integration" xreflabel="Birt_Integration">
    
    <?dbhtml filename="birtSeamWebProject.html"?>
    <chapterinfo>
        <keywordset>
            <keyword>JBoss</keyword>
            <keyword>BIRT</keyword>
            <keyword>Seam</keyword>
        </keywordset>
    </chapterinfo>
    <title>Birt Integration</title>
    
    <para>This chapter covers the steps required for BIRT Integration</para>
         
    <section id="Birt_Seam_Web_Project" xreflabel="Birt_Seam_Web_Project"> 
    <title> Adding JBoss BIRT functionality to the standard Seam web project</title>
    
    <para>In this section  you'll find out how to create a web project including Seam and BIRT capabilities </para>
    
    <section id="prerequisites" xreflabel="prerequisites">
        <title>Prerequisites</title>
        
        <para>These are the prerequisites required to create a Seam web project including with BIRT functionality:</para>
        
        <itemizedlist>
            <listitem>
                <para>
                    <ulink url="http://download.eclipse.org/eclipse/downloads/drops/R-3.4-200806172000/index.php">Eclipse Version 3.4 SDK</ulink>
                </para>
            </listitem>
            <listitem>
                <para>
                    <ulink url="http://www.eclipse.org/downloads/download.php?file=/datatools/downloads/1.6/dtp-sdk_1.6.0.zip">DTP Version 1.6 Release</ulink>
                </para>
            </listitem>
            <listitem>
                <para>
                    <ulink url="http://www.eclipse.org/modeling/emf/downloads/?project=emf">EMF Version 2.4 Release EMF+XSD</ulink>
                </para>
            </listitem>
            <listitem>
                <para>
                    <ulink url="http://www.eclipse.org/gef/downloads/">GEF Version 3.4 Release runtime</ulink>
                </para>
            </listitem>
            <listitem>
                <para>
                    <ulink url="http://download.eclipse.org/webtools/downloads/drops/R3.0/R-3.0-20080616152118/">WTP Version 3.0 Release</ulink>
                </para>
            </listitem>
            <listitem>
                <para>
                    <ulink url="http://www.eclipse.org/downloads/download.php?file=/birt/downloads/drops/R-R1-2_3_0-200806191030/birt-report-framework-sdk-2_3_0.zip">BIRT Report Designer SDK 2.3.0 Release</ulink> or <ulink url="http://www.eclipse.org/downloads/download.php?file=/birt/downloads/drops/R-R1-2_3_0-200806191030/birt-report-framework-2_3_0.zip">BIRT Report Designer 2.3.0 Release</ulink> 
                </para>
            </listitem>
            <listitem>
                <para>
                    <ulink url="http://sourceforge.net/project/showfiles.php?group_id=22866&amp;package_id=163777">JBoss Application Server 4.2.2 GA</ulink>
                </para>
            </listitem>
            <listitem>
                <para>
                    <ulink url="http://sourceforge.net/project/showfiles.php?group_id=22866&amp;package_id=163777">JBoss Seam 2.0.1 GA</ulink>
                </para>
            </listitem>
            <listitem>
                <para>
                    <ulink url="http://www.eclipse.org/downloads/download.php?file=/birt/downloads/drops/R-R1-2_3_0-200806191030/birt-wtp-integration-sdk-2_3_0.zip">BIRT Web Tools Integration</ulink>
                </para>
            </listitem>
            <listitem>
                <para>
                    <ulink url="http://download.jboss.org/jbosstools/builds/nightly/latestBuild.html">JBoss Tools nightly build</ulink>
                </para>
            </listitem>
            <listitem>
                <para>
                    <ulink url="http://jira.jboss.com/jira/secure/attachment/12320944/org.jboss.tools.birt.feature.zip">JBoss BIRT integration feature</ulink>
                </para>
            </listitem>
        </itemizedlist>
        
    </section>
    
    <section id="creating_web_project" xreflabel="creating_web_project">
        <title>Creating a web project</title>
        
        <para>Follow the next steps to create a web project</para>
        <itemizedlist>
            <listitem>
                <para>Create a new Seam Web Project</para>
            </listitem>
            <listitem>
                <para>Choose the 2.0 version of the Seam facet</para>
            </listitem>
            <listitem>
                <para>Add the &quot;Birt Reporting Runtime Component&quot; facet </para>
            </listitem>
        </itemizedlist>
        
        <figure>
            <title>Adding &quot;Birt Reporting Runtime Component&quot; Facet </title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/BirtIntegration/AddingBirtFacet.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        <itemizedlist>
            <listitem>
                <para>Or choose the &quot;JBoss BIRT Integration Web Project&quot;
                    configuration</para>
            </listitem>
        </itemizedlist>
        
        <figure>
            <title>Choosing &quot;JBoss BIRT Integration Web Project &quot;
                Configuration</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/BirtIntegration/SeamProjectConfiguration.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        <itemizedlist>
            <listitem>
                <para>Create the birttests.xhtml, testbirt.xhtml and testbirt1.xhtml pages as
                    follows:</para>
            </listitem>
        </itemizedlist>
        <para>
            <emphasis role="bold">birttests.xhtml:</emphasis>
        </para>
        
        <programlisting role="XHTML"><![CDATA[

            <!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                                                            "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
            <ui:composition xmlns="http://www.w3.org/1999/xhtml" 
                                        xmlns:s="http://jboss.com/products/seam/taglib"
                                        xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core"
                                        xmlns:h="http://java.sun.com/jsf/html" 
                                        xmlns:rich="http://richfaces.org/rich" 
                                        template="layout/template.xhtml">
            
            <ui:define name="body">  
                   <h:messages globalOnly="true" styleClass="message"/> <rich:panel> 
                    <f:facet name="header">Welcome to JBoss BIRT!</f:facet> 
                    <ul>
                           <li><s:link view="/testbirt.xhtml" value="Test Birt" /></li>  
                           <li><s:link view="/testbirt1.xhtml" value="Test Birt 1" /></li>  
                      </ul>
                      </rich:panel> 
            </ui:define>
            </ui:composition>
            ]]></programlisting>
        
        
        <para>
            <emphasis role="bold">testbirt.xhtml:</emphasis>
        </para>
        
        <programlisting role="XHTML"><![CDATA[
            <p:birt xmlns:ui="http://java.sun.com/jsf/facelets" 
                                xmlns:s="http://jboss.com/products/seam/taglib" 
                                xmlns:p="http://jboss.com/products/seam/birt" 
                        designType="run" 
                        format="pdf" 
                        designName="test.rptdesign" 
                        title="JBoss Birt Test">
                        
                        <p:param name="sample" value="sample param"/>
            </p:birt> 
        ]]></programlisting>
        
        <para>
            <emphasis role="bold">testbirt1.xhtml:</emphasis>
        </para>
        
        <programlisting role="XHTML"><![CDATA[
<p:birt xmlns:ui="http://java.sun.com/jsf/facelets"
                        xmlns:s="http://jboss.com/products/seam/taglib"
                        xmlns:p="http://jboss.com/products/seam/birt"
            designType="frameset"
            designName="test1.rptdesign"
            title="JBoss Birt Test"> 
 </p:birt> 
        ]]></programlisting>
        
        
        <itemizedlist>
            <listitem>
                <para>Try the tests out by accessing http://localhost:8080//birttests.seam with your web browser.</para>
            </listitem>
        </itemizedlist>
        
        <figure>
            <title>Trying the Tests out. First Page</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/BirtIntegration/Tests1.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        <figure>
            <title>Trying the Tests out. Second Page</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/BirtIntegration/Tests2.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        <figure>
            <title>Trying the Tests out. Third Page</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/BirtIntegration/Tests3.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        <figure>
            <title>Trying the Tests out. Forth Page</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/BirtIntegration/Tests4.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        <para>The birt tag recognizes most of the parameters described on <ulink url="http://www.eclipse.org/birt/phoenix/deploy/viewerUsage2.2.php#parameters">the BIRT Report Viewer Parameters page</ulink>. The attributes of the birt tag don't contain the "__" prefix. The param tag describes report parameters. It supports the following attributes: </para>
        <itemizedlist>
            <listitem>
                <para>name - the parameter name (required)</para>
            </listitem>
            <listitem>
                <para>value - the parameter value (required)</para>
            </listitem>
            <listitem>
                <para>isnull - specifies that a report parameter has a null value (optional)</para>
            </listitem>
            <listitem>
                <para>islocale - specifies whether the parameter is localized (optional)</para>
            </listitem>
        </itemizedlist>
        <para>These tags are defined in the org.jboss.birt.core/resources/jboss-seam-birt.jar library that contains source. </para>
        <para>It is possible to embed a BIRT report in some Seam xhtml page. For instance: </para>
        <para/>
        
        <para>
            <emphasis role="bold">Example:</emphasis>
        </para>
            <programlisting role="XHTML"><![CDATA[


<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
		xmlns:s="http://jboss.com/products/seam/taglib" 
		xmlns:ui="http://java.sun.com/jsf/facelets" 
		xmlns:f="http://java.sun.com/jsf/core" 
		xmlns:h="http://java.sun.com/jsf/html" 
		xmlns:rich="http://richfaces.org/rich" 
		xmlns:b="http://jboss.com/products/seam/birt" 
		template="layout/template.xhtml">
 <ui:define name="body">
  <h:messages globalOnly="true" styleClass="message" id="globalMessages"/>
  <rich:panel>
   <f:facet name="header">Products</f:facet>
   <b:birt designType="embed" designName="ProductCatalog.rptdesign" embeddable="true" masterpage="false"/>
   <div style="clear:both"/>
  </rich:panel>
  <div class="actionButtons">
   <s:button view="/ProductsEdit.xhtml" id="edit" value="Edit"/>
   <s:button view="/BirtProductsPdf.xhtml" id="BirtProductPdf" value="Product Catalog - PDF"/>
   <s:button view="/BirtProductsFrameset.xhtml" id="BirtProductFrameset" value="Product Catalog - Frameset"/>
   <s:button view="/BirtProductsEmbedded.xhtml" id="BirtProductEmbedded" value="Product Catalog - Embedded"/>
   <s:button view="/TopSellingProducts.xhtml" id="TopSellingProducts" value="Top Selling Products"/>
   <s:button view="/#{empty productsFrom ? 'ProductsList' : productsFrom}.xhtml" id="done" value="Done"/>
  </div>
 </ui:define>
</ui:composition>
 
        ]]></programlisting>
        
        <figure>
            <title>Embedding BIRT Report in Seam xhtml Page. First Page</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/BirtIntegration/BirtReportInSeamPage1.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        <figure>
            <title>Embedding BIRT Report in Seam xhtml Page. Second Page</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/BirtIntegration/BirtReportInSeamPage2.png"/>
                </imageobject>
            </mediaobject>
        </figure>   
        
        <figure>
            <title>Embedding BIRT Report in Seam xhtml Page. Third Page</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/BirtIntegration/BirtReportInSeamPage3.png"/>
                </imageobject>
            </mediaobject>
        </figure>   
        
     </section>
    </section>
    
    
    <section>
        <title>Hibernate ODA Data Source</title>
        
        <para>The JBoss BIRT Integration feature includes the Hibernate ODA Data Source completely integrated with Hibernate Tools. You can use it in the way you use any of BIRT ODA drivers. For instance, </para>
        <itemizedlist>
            <listitem>
                <para>run the Seam Generate Entities action</para>
            </listitem>
        </itemizedlist>
        <para>This action will create a Hibernate Console configuration. </para>
        <itemizedlist>
            <listitem>
                <para>create a new BIRT report</para>
            </listitem>
        </itemizedlist>
        
        <figure>
            <title>Creating New Birt Report </title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/BirtIntegration/CreatingNewBirtReport.png"/>
                </imageobject>
            </mediaobject>
        </figure> 
        
        <itemizedlist>
            <listitem>
                <para>add the Hibernate ODA datasource</para>
            </listitem>
        </itemizedlist>
        
        <figure>
            <title>Adding Hibernate ODA Datasource </title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/BirtIntegration/AddingHibernateODADatasource.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        <figure>
            <title>Testing Connection</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/BirtIntegration/TestingConnection.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
                
        <itemizedlist>
            <listitem>
                <para>add the Hibernate ODA dataset</para>
            </listitem>
        </itemizedlist>
        
        <figure>
            <title>Adding Hibernate ODA Dataset </title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/BirtIntegration/AddingHibernateODADataset.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        <figure>
            <title>Testing Query </title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/BirtIntegration/TestingQuery.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        <itemizedlist>
            <listitem>
                <para>All the HQL features like syntax highlighting, content assist, formatting, Drag and Drop, etc., are available to you here <inlinegraphic fileref="embedded:graphics15" width="8.3335inch" depth="5.2083inch"/>
                </para>
            </listitem>
        </itemizedlist>
        
        <figure>
            <title>HQL Features - Output Columns Section</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/BirtIntegration/HQLFeaturesOutputColumns.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        <figure>
            <title>HQL Features - Preview Results Section</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/BirtIntegration/HQLFeaturesPreviewResults.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        
        <para>You can create a BIRT report using this data source and data set.</para>
                 
        <figure>
            <title>Creating a BIRT report using this data source and data set</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="BIRTReportUsingDataSourceAndSet.png "/>
                </imageobject>           
            </mediaobject>
        </figure>
        
        <figure>
            <title>BIRT Report  -Preview Tab</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/BirtIntegration/BIRTReportPreviewTab.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        <figure>
            <title>Adding &quot;Birt Reporting Runtime Component&quot;  Facet </title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/BirtIntegration/AddingBirtFacet.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        <para>You can also use parameters within the Hibernate ODA driver. </para>
        
        <figure>
            <title>Using parameters within the Hibernate ODA driver.</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/BirtIntegration/ParametersWithinHibernateODADriver.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        
        <figure>
            <title>Adding New Parameter</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/BirtIntegration/AddingNewParameter.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        
        <figure>
            <title>Previewing Results</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/BirtIntegration/PreviewingResults.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        
    </section>
    
    <section> 
        <title>Deploying a BIRT report</title>
        <para>You can deploy this report by adding an action button to the Seam&apos;s CRUD xhtml file.</para>
        
        <figure>
            <title>Adding Action Button</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/BirtIntegration/AddingActionButton.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        <itemizedlist>
            <listitem>
                <para>create the testHibernateOda.xhtml file </para>
            </listitem>
        </itemizedlist>
        
        <para>
            <emphasis role="bold">birttests.xhtml:</emphasis>
        </para>
        
        <programlisting role="XHTML"><![CDATA[
            
&lt;p:birt xmlns:ui="http://java.sun.com/jsf/facelets"
            xmlns:s="http://jboss.com/products/seam/taglib"
            xmlns:p="http://jboss.com/products/seam/birt"
       designType="run"
       format="pdf"
       designName="testHibernateOda.rptdesign"
       title="JBoss Birt Test"&gt;
      
&lt;/p:birt&gt;   
]]></programlisting>
        
        <itemizedlist>
            <listitem>
                <para>open the Articles.xhtml page</para>
            </listitem>
        </itemizedlist>
        
        <figure>
            <title>Opening Articles.xhtml Page</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/BirtIntegration/OpeningArticlesPage.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        <itemizedlist>
            <listitem>
                <para>click the Birt PDF Report button </para>
            </listitem>
        </itemizedlist>
        
        <figure>
            <title>Birt PDF Report</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/BirtIntegration/BirtPDFReport.png"/>
                </imageobject>
            </mediaobject>
        </figure> 
        
        <para>The JNDI URL property can be either Hibernate Session Factory or Hibernate Entity Manager Factory. If a user doesn't specify this property, our engine will try the following JNDI URLs : </para>
        <itemizedlist>
            <listitem>
                <para>java:/&lt;project_name&gt;</para>
            </listitem>
            <listitem>
                <para>java:/&lt;project_name&gt;EntityManagerFactory</para>
            </listitem>
        </itemizedlist>
        <note><title>Note:</title>
                 <para>If you want to test this feature using PDE Runtime, you need to add osgi.dev=bin to the WebContent/WEB-INF/platform/configuration/config.ini file </para>        
        </note>
        <para>In conclusion, the main goal of this document is to get you know with a full featureset that JBoss BIRT Tools provides. Thus if you have some questions, comments or suggestions on the topic, please fell free to ask in <ulink
            url="http://www.jboss.com/index.html?module=bb&amp;op=viewforum&amp;f=201">JBoss Tools Forum</ulink>. You can also influence on how you want to see JBoss Tools docs in future leaving your vote on our page here.</para>

    </section>


    


</chapter>
