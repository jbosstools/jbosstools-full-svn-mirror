<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>
<!-- 
  ~ ModeShape (http://www.modeshape.org)
  - See the COPYRIGHT.txt file distributed with this work for information
  - regarding copyright ownership.
  -
  - Distributed under license by Red Hat, Inc. All rights reserved.
  - This program is made available under the terms of the
  - Eclipse Public License v1.0 which accompanies this distribution, and is
  - available at http://www.eclipse.org/legal/epl-v10.html.
  -
  - See the AUTHORS.txt file in the distribution for a full listing of
  - individual contributors.
-->
<plugin>

<!-- Define the IResource object contribution actions to all popup menus -->
   <extension
         point="org.eclipse.ui.popupMenus">
      <objectContribution
            id="org.jboss.tools.modeshape.rest.iresourcepopupmenucontribution"
            objectClass="org.eclipse.core.resources.IResource">
         <menu
               id="org.jboss.tools.modeshape.rest.contextMenu"
               label="%contextMenu.label"
               path="additions">
            <separator
                  name="modeshape">
            </separator>
         </menu>
         
         <!-- Show Published Locations action -->
         <action
               id="org.jboss.tools.modeshape.rest.showPublishedLocationsAction"
               label="%showPublishedLocationsAction.label"
               class="org.jboss.tools.modeshape.rest.actions.ShowPublishedLocationsAction"
               icon="icons/views/blank.gif"
               menubarPath="org.jboss.tools.modeshape.rest.contextMenu/group1"
               enablesFor="1">
               <enablement>
                   <and>
                      <objectClass name="org.eclipse.core.resources.IFile" />
                      <objectState name="persistentProperty" value="org.jboss.tools.modeshape.rest.publishedLocations" />
                   </and>
               </enablement>
         </action>
        
         <!-- Unpublish action -->
         <action
               id="org.jboss.tools.modeshape.rest.unpublishAction"
               label="%unpublishAction.label"
               class="org.jboss.tools.modeshape.rest.actions.UnpublishAction"
               icon="icons/views/unpublish.png"
               menubarPath="org.jboss.tools.modeshape.rest.contextMenu/group1"
               enablesFor="*">
               <enablement>
                     <or>
                         <objectClass name="org.eclipse.core.resources.IFile" />
                         <objectClass name="org.eclipse.core.resources.IFolder" />
                         <and>
                               <objectClass name="org.eclipse.core.resources.IProject" />
                               <objectState name="open" value="true" />
                         </and>
                     </or>
               </enablement>
         </action>
         
         <!-- Publish action -->
         <action
               id="org.jboss.tools.modeshape.rest.publishAction"
               label="%publishAction.label"
               class="org.jboss.tools.modeshape.rest.actions.PublishAction"
               icon="icons/views/publish.png"
               menubarPath="org.jboss.tools.modeshape.rest.contextMenu/group1"
               enablesFor="*">
               <enablement>
                     <or>
                         <objectClass name="org.eclipse.core.resources.IFile" />
                         <objectClass name="org.eclipse.core.resources.IFolder" />
                         <and>
                               <objectClass name="org.eclipse.core.resources.IProject" />
                               <objectState name="open" value="true" />
                         </and>
                     </or>
               </enablement>
         </action>
      </objectContribution>
   </extension>

<!-- View extensions -->
   <extension
         point="org.eclipse.ui.views">
      <category
            id="org.modeshape"
            name="%modeShapeCategory">
      </category>
      
      <!-- Repository view -->
      <view
            id="serverView"
            name="%serverView"
            category="org.modeshape"
            class="org.jboss.tools.modeshape.rest.views.ServerView"
            fastViewWidthRatio="0.25"
            icon="icons/objects/server.gif">
      </view>
   </extension>

<!-- Decorator -->
   <extension
         point="org.eclipse.ui.decorators">
      <decorator
            lightweight="true"
            location="BOTTOM_LEFT"
            adaptable="true"
            label="%decorator.label"
            state="true"
            class="org.jboss.tools.modeshape.rest.views.PublishingContentProvider"
            id="org.jboss.tools.modeshape.rest.decorator">
         <description>
            %decorator.description
         </description>
         <enablement>
         <or>
            <objectClass
                  name="org.modeshape.web.jcr.rest.client.domain.IModeShapeObject">
            </objectClass>
            <objectClass
                  name="org.eclipse.core.resources.IFile">
            </objectClass>
         </or>
         </enablement>
      </decorator>
   </extension>

<!-- Context Help -->
   <extension point="org.eclipse.help.contexts">
      <contexts file="docs/helpContexts.xml"  />
   </extension>
    
<!-- Help Table of Contents -->
   <extension point="org.eclipse.help.toc">
      <toc file="docs/toc.xml" primary="true" />
   </extension>

<!-- Preference Page -->
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            name="%modeShapeCategory"
            class="org.jboss.tools.modeshape.rest.preferences.PublishingPreferencePage"
            id="publishingPreferencePage">
      </page>
   </extension>
</plugin>
