<html>
<head>
	<link href="tutorial.css" type="text/css" rel="stylesheet">
	<title>JBoss-IDE AOP Tutorial</title>
</head>
<body>

<b>Hello AOP</b>
<hr/>

Now that the HelloAOP project is finished being setup, we can create a simple class and intercept it.<br/><br/>
First off, let's create the class:
<ul>
	<li> Right click on the "src" directory in the Package Explorer and in the menu, click New &gt; Class. </li>

	<li> The only thing you should need to change is the Name of the class. Enter "HelloAOP" without quotes into the Name textbox, and click "Finish"</li>
</ul>

At this point we'll want to make 2 methods.
<ul>
	<li><b> public void callMe () </b></li>
	<ul>
		<li> An instance method that we can call and intercept.
			inside we'll print "AOP!"</li>
	</ul>
	<li><b> public static void main (String args[]) </b></li>
	<ul>
		<li> The entry point into our AOP application (just like
			all normal java applications) </li>
	</ul>
</ul>
Here's the code:
<div class="code">
public class HelloAOP {

	public void callMe ()
	{
		System.out.println("AOP!");
	}
	
	public static void main (String args[])
	{
		new HelloAOP().callMe();
	}
}
</div>
<br/>

Now for the fun part! Let's create and apply an Interceptor.
<br/><br/>

<b>Creating the Interceptor</b>
<hr/>

<ul>
	<li> Create a new class called HelloAOPInterceptor. This class will implement the org.jboss.aop.advice.Interceptor interface. Make sure the "Inherited abstract methods" box is checked before you click "Finish". Here's a screenshot of what the dialog should look like: </li>

	<img src="images/new-hello-aop-interceptor.jpg"/><br/>

</ul>

Once the Interceptor class is opened, you'll notice that two empty method stubs
have been created for you.
<ul>
	<li><b> public String getName() </b></li>
	<ul>
		<li> this method returns what name the AOP framework will use
			internally for your Interceptor. In practice, it's
			probably best to return the name of the class. </li>
	</ul>
	<li><b> public Object invoke(Invocation arg0) throws Throwable </b></li>
	<ul>
		<li> this method does the actual interception. the argument
			name "arg0" isn't very helpful; I always rename it
			to "invocation". The sole responsibility of this method
			is to return the next link in the invocation chain. <b>
			WARNING: if your method returns null, it will break
			the invocation chain, and any interceptors scheduled
			after yours will not be ran. It will also prevent
			the intercepted method (or field) from happening.</b>
			It is expected that your invoke method will return
			invocation.invokeNext(). Any code that happens before
			that will be the body of your interceptor.
			In our Interceptor, we want to print "Hello, " (without
			a newline).
		</li>
	</ul>
</ul>

Here's the code:
<div class="code">
import org.jboss.aop.advice.Interceptor;
import org.jboss.aop.joinpoint.Invocation;

public class HelloAOPInterceptor implements Interceptor {

	/* (non-Javadoc)
	 * @see org.jboss.aop.advice.Interceptor#getName()
	 */
	public String getName() {
		return "HelloAOPInterceptor";
	}

	/* (non-Javadoc)
	 * @see org.jboss.aop.advice.Interceptor#invoke(org.jboss.aop.joinpoint.Invocation)
	 */
	public Object invoke(Invocation invocation) throws Throwable {
		System.out.print("Hello, ");
		return invocation.invokeNext();
	}

}

</div>
<br/>

<b>Applying the Interceptor</b>
<hr/>

<table>
<tr>
	<td> <img src="images/call-me-arrow.jpg" style="float: left;"/></td>
	<td valign="top">
In order to apply your Interceptor to the callMe() method, we'll first need
to switch back to the HelloAOP.java editor. Once the editor is active, you
should be able to see the callMe() method in the Outline view (See figure).
<br/><br/>
Right click on this method, and click JBoss AOP &gt; Apply Interceptor(s)...
A dialog should open, with a list of available Interceptors. Click on
HelloAOPInterceptor, and click "Finish".
<br/><br/>
You should see in your Package Explorer that the file "jboss-aop.xml" now exists
under your project root.
	</td>
</tr>
</table>
<br/>

<b>Running Hello AOP</b>
<hr/>
Now all that's left is running the application!<br/>
Similar to running a normal Java Application from Eclipse, you must
create a Run Configuration for your project.
<ul>
	<li> From the Run menu of eclipse, and choose "Run..." </li>
	<li> In the dialog that opens, you should see a few choices in a list
		on the left. Double click on "JBoss AOP Application". </li>

	<li> Once it is finished loading, you should have a new Run
		Configuration under JBoss AOP Application called "Hello AOP".
		</li>

	<li> Click the "Run" button </li>
</ul>

The console should now say: "Hello, AOP!"

<img src="images/hello-aop-console.jpg"/><br/>

<hr/>
<center>
<table width="100%">
<tr>
	<td><a href="index.html">Contents</a></td>
	<td align="right"><a href="page2.html">&lt; Back</a> | <a href="page4.html">Next &gt;</a></td>
</tr>
</table>
</center>
</body>
</html>
