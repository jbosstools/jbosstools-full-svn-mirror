<?xml version="1.0" encoding="ISO-8859-1"?>
<chapter id="create_ws_topdown" >
    <?dbhtml filename="topdown.html"?>
    <chapterinfo>
        <keywordset>
            <keyword>JBoss Tools</keyword>
            <keyword>Web Service</keyword>
            <keyword>JBossWS Web Service runtime</keyword>
        </keywordset>
    </chapterinfo>
  
    <title>Creating a Web Service using JBossWS runtime</title>
    <para>In this chapter we provide you with the necessary steps to create a Web Service using JBossWS runtime.</para>
  
   <section id="createproject">
	<title>Creating a Dynamic Web project</title>

  	<para>Before create a web service, you must have a Dynamic Web Project</para>
    <figure>
      <title>Dynamic Web Project</title>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/webproject1.png"></imagedata>
        </imageobject>
      </mediaobject>
     </figure>
  	<para>Create the service Web project by selecting
        <emphasis><property>New > Project... > Dynamic Web project</property></emphasis>. Enter the following information: </para>
       <itemizedlist>
          <listitem>
             <para>Project Name: enter a project name</para>
          </listitem>
          <listitem>
             <para>Target runtime: any server depending on you installed. If it is not listed, click New and browse to the location where it is installed. You may set <emphasis><property>Target Runtime</property></emphasis> to <emphasis><property>None</property></emphasis>, 
             in this case, you must <link linkend="addfacet">add JBoss Web Service facet to the project</link> .</para>
    <figure>
      <title>Dynamic Web Project Wizard</title>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/webproject2.png"></imagedata>
        </imageobject>
      </mediaobject>
     </figure>
          </listitem>
          <listitem>
             <para>Set Web Module values</para>
             <figure>
                <title>Configures Web Module Settings</title>
                <mediaobject>
                   <imageobject>
                      <imagedata fileref="images/webproject3.png"></imagedata>
                   </imageobject>
                </mediaobject>
             </figure>
          </listitem>
        </itemizedlist>
  	<para>Click <property>Finish</property> button.</para>
   </section>
  
   <section id="addfacet">
    <title>Configure JBoss Web Service facet settings</title>
    <para>If you have already create a dynamic web project, the next step is to add JBoss Web Service facet to the project </para>
      <figure id="figure_addfacet">
            <title>Configure JBoss Web Service Facet</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jbossws_facet.png"/>
                </imageobject>
            </mediaobject>
        </figure>
     <para>Server Supplied JBossWS Runtime: If you have already set a JBoss runtime to the project's target runtime, you may choose <emphasis><property>Server Supplied JBossWS Runtime</property></emphasis> 
      and then click <emphasis><property>Ok</property> to finish the configuration of JBoss Web Service facet. </emphasis>
     </para>
     <para>If the project has no <emphasis><property>Target Runtime</property></emphasis> settings, you must check the second radio button and specify a JBossWS runtime from the list.
      You also can create a new JBossWS runtime, click <emphasis><property>New...</property></emphasis> button will bring you to another dialog for configuring new JBossWS runtime.</para>
     <figure id="figure_addfacet">
            <title>Configure JBossWS Runtime</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jbossws_newruntime.png"/>
                </imageobject>
            </mediaobject>
      </figure>
   <para>See how to <link linkend="preference">configure a new JBossWS runtime</link> </para>
   
   </section>
   
  
   <section id="topdownwebservice">    
    <title>Creating a Web Service from a WSDL document using JBossWS runtime</title>
    <para>In this chapter we provide you with the necessary steps to create a Web Service from a WSDL document using JBossWS runtime.</para>
    <para>At first, please make sure that you have already create a dynamic Web project with JBoss Web Service facet get installed. </para>
    <para>To make it see <link linkend="webproject">create dynamic Web project</link>> and <link linkend="facet">add JBoss Web Service facet</link></para>
	
	<para>To create Web Service using JBossWS runtime select<emphasis>
            <property>File > New > Other > Web Services > Web Service</property> to run Web Service creation wizard.
        </emphasis> </para>
        <para>Let&apos;s get through the wizard step-by-step.</para>
        <figure id="figure_create_ws_topdown">
            <title>New Web Service Wizard</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jbossws_ws_creation1.png"/>
                </imageobject>
            </mediaobject>
        </figure>
     <para>First, please select <property>Top down Java bean Web Service</property> from Web Service type list,
      and select a WSDL document from workspace, click the link <emphasis><property>Server</property></emphasis> on the page will bring you to 
      another dialog. Here you can specify the server  to a JBoss Server and Web Service runtime to JBossWS runtime</para>
              <figure id="figure_create_ws_topdown_setserver">
            <title>Select Server and Web Service runtime</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jbossws_ws_creation1_1.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        <para>Click on <emphasis>
                <property>Finish</property>
            </emphasis> Button you will have the following wizard view.</para>
            
                    <figure id="figure_create_ws_topdown">
            <title>New Web Service Wizard</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jbossws_ws_creation1.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        <para>Click on <emphasis><property>Next</property></emphasis> button to next step</para>
         <figure id="figure_create_ws_topdown_codegen">
            <title>New Web Service Wizard</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jbossws_ws_creation2.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        <para>On this page, the default package name comes from the namespace of the WSDL document, you also can change it to any valid package name you want.
        JAX-WS specification should be set to 2.0 if your JBossWS runtime in JBoss Server is JBossWS native runtime.
        You can specify a catalog file and binding files if you have. If you want the wizard generate empty implementation classes for the 
        Web Service, check the <emphasis> <property>Generate default Web Service implementation classes</property> </emphasis> check box .
        If you want update the default Web.xml file with the Web Service servlets get configured, check <emphasis> <property>Update the default Web.xml</property> </emphasis> 
        check box. Click on <emphasis><property>Next</property> </emphasis> or <emphasis><property>Finish</property> </emphasis> button to generate code </para>
        
        <para>In previous step, the Web Service code is generated, then you can view the implementation class and add business logic to each method.</para>
		
	</section>
	
	<section id="bottomupws">
	   <title>Creating a Web service from a Java bean using JBossWS runtime</title>
  <para>The Web Service wizard assists you in creating a new Web service, configuring it for deployment, and deploying the Web service to a server.</para>
  <para>To create a Web service from a bean using JBoss WS:</para>
  <para>Setup <link linkend="preference">JBoss WS and development environment</link>.</para>
  <para><link linkend="webproject">Creating a Dynamic Web project</link>.</para>
  <para><link linkend="facet">Add JBossWS Facet to Web project</link>.</para>
  <para>Create a Web Service from a java bean: </para>
     <itemizedlist>
        <listitem>
           <para>Switch to the Java EE perspective <emphasis><property>Window > Open Perspective > Java EE</property></emphasis>.</para>
        </listitem>
        <listitem>
           <para>In the Project Explorer view, select the bean that you created or imported into the source folder of your Web project.</para> 
             <figure>
                <title>Create a new Bean Class</title>
                <mediaobject>
                   <imageobject>
                      <imagedata fileref="images/bottomup.png"></imagedata>
                   </imageobject>
                </mediaobject>
             </figure>
        </listitem>
        <listitem>
           <para>Click <emphasis><property>File > New > Other</property></emphasis>.Select Web Services in order to display the various Web service wizards. Select the Web Service wizard. Click <property>Next</property> button.</para> 
             <figure>
                <title>New Web Service</title>
                <mediaobject>
                   <imageobject>
                      <imagedata fileref="images/bottomup1.png"></imagedata>
                   </imageobject>
                </mediaobject>
             </figure>        
        </listitem>
        <listitem>
           <para>In the first Web Service wizard page: select <property>Bottom up Java bean Web service</property> as your Web service type, and select the Java bean from which the service will be created.</para> 
             <figure>
                <title>Set Web Service Common values</title>
                <mediaobject>
                   <imageobject>
                      <imagedata fileref="images/bottomup2.png"></imagedata>
                   </imageobject>
                </mediaobject>
             </figure>
           <itemizedlist>
              <listitem>
                 <para>Select the stages of Web service development that you want to complete using the slider: </para>
                 <itemizedlist>
                    <listitem> 
                       <para>Develop: this will develop the WSDL definition and implementation of the Web service. This includes such tasks as creating the modules which will contain the generated code, WSDL files, deployment descriptors, and Java files when appropriate.</para>> 
                    </listitem>
                    <listitem> 
                       <para>Assemble: this ensures the project that will host the Web service or client gets associated to an EAR when required by the target application server.</para>> 
                    </listitem>
                    <listitem> 
                       <para>Deploy: this will create the deployment code for the service.</para>> 
                    </listitem>
                    <listitem> 
                       <para>Install: this will install and configure the Web module and EARs on the target server.</para>> 
                    </listitem>
                    <listitem> 
                       <para>Start: this will start the server once the service has been installed on it. The server-config.wsdd file will be generated.</para>> 
                    </listitem>
                     <listitem> 
                       <para>Test: this will provide various options for testing the service, such as using the Web Service Explorer or sample JSPs</para>> 
                    </listitem>                   
                 </itemizedlist>              
              </listitem>
              <listitem>Select your server: the default server is displayed. If you want to deploy your service to a different server click the link to specify a different server.</listitem>
              <listitem>Select your runtime: ensure the JBoss WS runtime is selected.</listitem>
              <listitem>Select the service project: the project selected in your workspace is displayed. To select a different project click on the project link. If you are deploying to JBoss Application Server you will also be asked to select the EAR associated with the project. Ensure that the project selected as the Client Web Project is different from the Service Web Project, or the service will be overwritten by the client's generated artifacts.</listitem>
              <listitem>If you want to create a client, select the type of proxy to be generated and repeat the above steps for the client. The better way is to create a web service client project seperately.</listitem>
           </itemizedlist>
           <para>Click <property>Next</property> button.</para>
        </listitem>
        <listitem>
           <para>In the JBoss Web Service Code Generation Configuration page, you set values:</para> 
             <figure>
                <title>Set Web Service values about Code Generation</title>
                <mediaobject>
                   <imageobject>
                      <imagedata fileref="images/bottomup3.png"></imagedata>
                   </imageobject>
                </mediaobject>
             </figure>
           <itemizedlist>
              <listitem>
                 <para>Generate WSDL file: select it, you will get a generated WSDL file in your project. But this wsdl's services' address location values are not real address. </para>
              </listitem>
              <listitem>After the Web service has been created, the following may occur depending on the options you selected:
                 <para>Update the default web.xml: select it, you may test the web service by Explorer.</para>
              </listitem>
           </itemizedlist>
           <para>Click <property>Next</property> button.</para>
        </listitem> 
        <listitem>
           <para>In this page, the project is deployed to the server. you can start server and test the web service. If you want to publish the web service to a UDDI registry, you may click <property>Next</property> button to publish it. If not, you may click <property>Finish</property> button.</para>
             <figure>
                <title>Start a Server</title>
                <mediaobject>
                   <imageobject>
                      <imagedata fileref="images/bottomup4.png"></imagedata>
                   </imageobject>
                </mediaobject>
             </figure>
        </listitem>       
     </itemizedlist>
     <para>After the Web Service has been created, the following may occur depending on the options you selected:</para>
     <itemizedlist>
        <listitem>
           <para> the generated web services codes</para>
        </listitem>
        <listitem>
           <para>If have selected to generate WSDL file, you will get the file in your project's WebContent > wsdl folder.</para>
             <figure>
                <title>The generated WSDL file</title>
                <mediaobject>
                   <imageobject>
                      <imagedata fileref="images/bottomup6.png"></imagedata>
                   </imageobject>
                </mediaobject>
             </figure>
        </listitem>
        <listitem>
           <para>If have selected to update the default web.xml, you will test the web service in browser.Open the Explorer, input the url for the web service according to web.xml plus <property>?wsdl.</property>, you will get the WSDL file from Explorer. </para>
             <figure>
                <title>The Updated web.xml</title>
                <mediaobject>
                   <imageobject>
                      <imagedata fileref="images/bottomup5.png"></imagedata>
                   </imageobject>
                </mediaobject>
             </figure>
        </listitem>
     </itemizedlist>
	</section>

</chapter>
