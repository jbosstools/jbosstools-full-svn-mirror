<?xml version="1.0" encoding="UTF-8"?>
<chapter id="perspective" xreflabel="perspective" role="updated">
	<?dbhtml filename="perspective.html"?>
	<chapterinfo>
		<keywordset>
			<keyword>JBoss Developer Studio</keyword>
			<keyword>Eclipse</keyword>
			<keyword>Deploy</keyword>
			<keyword>Deployment</keyword>
			<keyword>JBoss</keyword>
		</keywordset>
	</chapterinfo>

	<title>JBoss AS Perspective</title>

	<para>This chapter describes how to manage installed <productname>JBoss Servers</productname> via the <guilabel>JBoss AS</guilabel> perspective.</para>

	<para>
		The <guilabel>JBoss AS</guilabel> perspective is similar to the <guilabel>Java</guilabel> perspective, but it contains a few additional views. The <guilabel>Console view</guilabel> and the <guilabel>Properties view</guilabel> are standard views. The other two views that are added are the <guilabel>Project archives</guilabel> view and the <guilabel>Servers</guilabel> view.
	</para>

	<section id="JBossServerView" role="updated">
		<?dbhtml filename="JBossServerView.html"?>
		<title>The Servers view</title>

		<para>
			The <guilabel>Servers</guilabel> view is built on the Common Navigator Framework allowing extensions and is using label decorators that make the UI compact enough without loosing the vital information.
		</para>

		<para>Let&apos;s have a detailed look at the <guilabel>Servers</guilabel> view and its constituent components.</para>
		<figure>
			<title>The Servers view</title>
			<mediaobject>
				<imageobject>
					<imagedata fileref="images/perspective/perspective_1.png"/>
				</imageobject>
			</mediaobject>
		</figure>

		<section id="jbossserver_view_toolbar">
			<title>Servers view Toolbar</title>
			<para>
				In the right top corner of the <guilabel>Servers</guilabel> view there is a special toolbar which provides a quick access for starting a server (in the debug mode, run mode, or profile mode), restarting a server, stopping a server and a publishing to a server.
			</para>

			<figure>
				<title>The Servers view Toolbar</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/perspective/perspective_2.png"/>
					</imageobject>
				</mediaobject>
			</figure>

			<para>
				In order to debug your applications or EJB's that are deployed to the server, the server must be started in debug mode. By starting the server in debug mode, Eclipse will allow you to set breakpoints on code in your workspace and step through the code.
			</para>

	<!--		<para>
				The <guibutton>Start the server in profiling mode</guibutton> button allows you to enable profiling actions for your application. For more details on how to start using TPTP profiling with <property>JBoss Tools</property> see <xref linkend="tptp_support"/>.
			</para> -->

			<para>
				The <guibutton>Publish to the server</guibutton> button will republish any modules where it has determined that the workspace is out of synchronization with the server. It will attempt to do an incremental publish if the module in question is capable of doing one.
			</para>

		</section>

		<section id="jbossserver_view_structure">
			<title>Servers view Structure</title>
			<para>
				The <guilabel>Servers</guilabel> view displays all defined servers as well as their current status (that is whether they are started or stopped) in square brackets next to the server name.
			</para>

			<figure>
				<title>The Servers view</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/perspective/perspective_1.png"/>
					</imageobject>
				</mediaobject>
			</figure>

			<para>The following table lists possible server statuses.</para>

			<table>
				<title>Server Publish Status</title>
				<tgroup cols="2">
					<colspec colnum="1" align="left" colwidth="1*"/>
					<colspec colnum="2" colwidth="3*"/>


					<thead>
						<row>
							<entry align="center">Status</entry>

							<entry align="center">Description</entry>
						</row>
					</thead>

					<tbody>
						<row>
							<entry align="center">
								<para>Republish</para>
							</entry>

							<entry align="center">
								<para>The status which allows you to see if changes are awaiting</para>
							</entry>
						</row>
						<row>
							<entry align="center">
								<para>Publishing...</para>
							</entry>

							<entry align="center">
								<para>The status which shows if changes are being updated</para>
							</entry>
						</row>
						<row>
							<entry align="center">
								<para>Synchronized</para>
							</entry>

							<entry align="center">
								<para>The status which allows you to see if changes are synchronized</para>
							</entry>
						</row>
					</tbody>
				</tgroup>
			</table>

			<para>You can control a server behavior as well as adjust a number of server preferences through the context menu.</para>

			<figure>
				<title>Context Menu Commands</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/perspective/perspective_8.png"/>
					</imageobject>
				</mediaobject>
			</figure>

			<para>All available context menu commands are described in the following table.</para>
			<table>
				<title>Server Properties through the Context Menu</title>
				<tgroup cols="2">
					<colspec colnum="1" align="left" colwidth="1*"/>
					<colspec colnum="2" colwidth="3*"/>

					<thead>
						<row>
							<entry align="center">
								<para>Name</para>
							</entry>

							<entry align="center">
								<para>Description</para>
							</entry>
						</row>
					</thead>

					<tbody>
						<row>
							<entry>
								<para>New Server</para>
							</entry>
							<entry>
								<para>The option allows you to define a new server</para>
							</entry>
						</row>

						<row>
							<entry>
								<para>Open</para>
							</entry>
							<entry>
								<para>The option opens the Server editor</para>
							</entry>
						</row>

						<row>
							<entry>
								<para>Show in</para>
							</entry>
							<entry>
								<para>This option provides easy access to the Console, Debug, Server Log or MBean Explorer views</para>
							</entry>
						</row>

						<row>
							<entry>
								<para>Delete</para>
							</entry>
							<entry>
								<para>Standard option that allows you to delete the chosen server</para>
							</entry>
						</row>

						<row>
							<entry>
								<para>Start</para>
							</entry>
							<entry>
								<para>This will start the server in a run mode</para>
							</entry>
						</row>

						<row>
							<entry>
								<para>Debug</para>
							</entry>
							<entry>
								<para>This will start the server in a debug mode</para>
							</entry>
						</row>

						<row>
							<entry>
								<para>Stop</para>
							</entry>
							<entry>
								<para>This will stop the server</para>
							</entry>
						</row>

						<row>
							<entry>
								<para>Publish</para>
							</entry>
							<entry>
								<para>This will synchronize the publish information between the server and workspace</para>
							</entry>
						</row>

						<row>
							<entry>
								<para>Explore</para>
							</entry>
							<entry>
								<para>
									This action uses the native OS file explorer to browse the deploy destination. Note: The option is also available for deployed 	resources and projects (see the figure below).
								</para>
							</entry>
						</row>

						<row>
							<entry>
								<para>Add and Remove Projects</para>
							</entry>
							<entry>
								<para>This option will publish a new project to the server (if it&apos;s type is supported)</para>
							</entry>
						</row>

						<row>
							<entry>
								<para>Monitoring</para>
							</entry>
							<entry>
								<para>Allows you to add ports to be monitored on the current server</para>
							</entry>
						</row>

						<row>
							<entry>
								<para>Properties</para>
							</entry>
							<entry>
								<para>Opens a window that allows you to adjust the current server preferences</para>
							</entry>
						</row>

					</tbody>
				</tgroup>
			</table>

			<para>
				Under the server element in the <guilabel>Servers</guilabel> view, you can see modules that are currently deployed to the server and some server extensions that provide additional information on the server.
			</para>

			<para>The context menu for any module allows you to remove it from the server and force a full or incremental republish upon it.</para>

			<figure>
				<title>Modules Action</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/perspective/perspective_11.png"/>
					</imageobject>
				</mediaobject>
			</figure>

			<section id="filesets">
				<title>Filesets</title>

				<para>The <guilabel>Filesets</guilabel> category in the <guilabel>Servers</guilabel> view provides a way to filter files.</para>

				<para>
					To add a new file filter, right-click the <guilabel>Filesets</guilabel> category and select the <guimenuitem>Create File Filter</guimenuitem> option.
				</para>
				<para id="filefilterWiz">The <guilabel>New File Filter wizard</guilabel> should appear.</para>

				<figure>
					<title>Creating a New File Filter</title>
					<mediaobject>
						<imageobject>
							<imagedata fileref="images/perspective/filesets1.png"/>
						</imageobject>
					</mediaobject>
				</figure>

				<para>
					The wizard asks you to enter the filter name and add includes and excludes patterns. The preview box underneath provides a list of files matched to the defined patterns (see the figures bellow).
				</para>
				<para>
					In order to set up a default fileset relative to the fixed configuration of the server runtime, use the following variable: <filename>${jboss_config}</filename>, i. e. you should enter <filename>server/${jboss_config}/</filename> in the <guilabel>Root Directory</guilabel> option. This allows you to modify the runtime&apos;s configuration and not have to manually update paths.
				</para>
				<figure>
					<title>New File Filter Wizard</title>
					<mediaobject>
						<imageobject>
							<imagedata fileref="images/perspective/filesets2_a.png"/>
						</imageobject>
					</mediaobject>
				</figure>
            	
				<para>Notice, that the <emphasis>
            		<property>Browse</property>
					</emphasis> button still returns an absolute path:</para>
            	
				<figure>
					<title>New File Filter Wizard</title>
					<mediaobject>
						<imageobject>
							<imagedata fileref="images/perspective/filesets2.png"/>
						</imageobject>
					</mediaobject>
				</figure>

				<para>
					After the filter is created, you can explore it by expanding the <guilabel>Filesets</guilabel> category in the <guilabel>Servers</guilabel> view.
				</para>

				<para>
					It is now possible to edit files directly from the <guilabel>Filesets</guilabel> category. Double clicking on a file from <guilabel>Filesets</guilabel> opens up the editor automatically, or you can use the <guimenuitem>Edit File</guimenuitem> context menu command.
				</para>

				<figure>
					<title>Direct Editing from the Filesets</title>
					<mediaobject>
						<imageobject>
							<imagedata fileref="images/perspective/filesets3.png"/>
						</imageobject>
					</mediaobject>
				</figure>

				<para>
					To delete a file filter (or just a file) from the <guilabel>Filesets</guilabel>, right-click a file filter or file and select the <guimenuitem>Delete File Filter</guimenuitem> or <guimenuitem>Delete File</guimenuitem> command.
				</para>

				<figure>
					<title>Deleting the File from the Filesets</title>
					<mediaobject>
						<imageobject>
							<imagedata fileref="images/perspective/filesets4.png"/>
						</imageobject>
					</mediaobject>
				</figure>
				<para>
					If you want to set filesets for some server types, select <menuchoice><guimenuitem>Window</guimenuitem><guimenuitem>Preferences</guimenuitem></menuchoice> and then select <menuchoice><guimenuitem>Server</guimenuitem><guimenuitem>Default</guimenuitem></menuchoice> from the categories available on the left.
				</para>

				<figure>
					<title>Deleting the File from the Filesets</title>
					<mediaobject>
						<imageobject>
							<imagedata fileref="images/perspective/filesets5.png"/>
						</imageobject>
					</mediaobject>
				</figure>
				<para>
					On this preference page you can add a fileset to any server type or to all servers at once. To do this you should select the server type in the combo box and click the <guibutton>Add fileset...</guibutton> button. In the opened <guilabel>New File Filter wizard</guilabel> follow the steps described in <xref linkend="filefilterWiz"/> and finally click the <guibutton>Apply</guibutton> button on the preference page.
				</para>
				<para>The defined file filter will be automatically added to new servers during their creation.</para>
                

			</section>

			<section id="xml_configuration">
				<title>XML Configuration</title>
				<para>
					The <guilabel>XML Configuration</guilabel> category allows you to quickly browse to descriptor files in your server's deploy directory and check or change the values. Basically, <guilabel>XML Configuration</guilabel> includes XML XPaths, where an XPath is a path used to access some specific part of an XML document.
				</para>

				<note>
					<title>Note:</title>
					<para>
						This document assumes that you are familiar with XPath. If not, we highly suggested that you look through an appropriate manual or tutorial on the topic.
					</para>
				</note>

				<para>
					The <guilabel>XML Configuration</guilabel> category itself contains only a list of categories. <guilabel>Ports</guilabel> are provided by default and display many of the most commonly used ports in the <productname>JBoss Server</productname>.
				</para>

				<figure>
					<title>XML Configuration</title>
					<mediaobject>
						<imageobject>
							<imagedata fileref="images/perspective/perspective_14.png"/>
						</imageobject>
					</mediaobject>
				</figure>


                <!--para>In the <property>Properties
                    view</property> you can see an identifier and nested files underneath in which
                that xpath can be found as well as its current value. The details of the xpath are
                hidden as all you need to see is only which file you&apos;re referring to and
                what its current value is.</para-->

				<para>
					By right-clicking on the <guilabel>XML Configuration</guilabel> node you can create a new category. Besides, context menu for <guilabel>XML Configuration</guilabel> category makes possible to disable it. You can disable any category in the bottom part of the <guilabel>Servers</guilabel> view. Look for them in the <guilabel>Inactive Categories</guilabel> afterwards to re-enable.
				</para>

				<figure>
					<title>Adding New Category</title>
					<mediaobject>
						<imageobject>
							<imagedata fileref="images/perspective/perspective_15.png"/>
						</imageobject>
					</mediaobject>
				</figure>

				<para>
					By right-clicking on the <guilabel>Ports</guilabel> category, or any other category in <guilabel>XML Configuration</guilabel>, you can create a new XPath.
				</para>

				<figure>
					<title>Adding New XPath</title>
					<mediaobject>
						<imageobject>
							<imagedata fileref="images/perspective/perspective_16.png"/>
						</imageobject>
					</mediaobject>
				</figure>

				<para>After that, the dialog shown below will appear.</para>

				<figure>
					<title>Adding New XPath</title>
					<mediaobject>
						<imageobject>
							<imagedata fileref="images/perspective/perspective_17.png"/>
						</imageobject>
					</mediaobject>
				</figure>

				<para>
					The goal here is to get an end result where the XPath matches up with a necessary property. With that in mind, let&apos;s look how it works. If the property you want to reach is the value of the <code>name</code> attribute in the element <code>&lt;mbean&gt;</code>, then your <guilabel>XPath Patten</guilabel> should end with <code>mbean</code> and your <guilabel>Attribute Name</guilabel> should be <code>name</code>, as demonstrated in the next figure.
				</para>

				<programlisting role="XML"><![CDATA[...
<server>
...
    <mbean code="org.jboss.ejb.EJBDeployer" 
                   name="jboss.ejb:service=EJBDeployer" xmbean-dd="">
  
     <!-- Inline XMBean Descriptor BEGIN -->
         <xmbean>
             <description>
                    The EJBDeployer responsible for ejb jar deployment</description> 
               ...
         </xmbean>
     </mbean>
</server>
]]></programlisting>

				<figure>
					<title>XPath Preview</title>
					<mediaobject>
						<imageobject>
							<imagedata fileref="images/perspective/perspective_18.png"/>
						</imageobject>
					</mediaobject>
				</figure>

				<note>
					<title>Tip:</title>
					<para>Notice when you type the fields autocomplete to help you locate exactly what XPath you&apos;re looking for.</para>
				</note>

				<para>
					If your desired field is the text of an element <code>&lt;description&gt;</code>, your <guilabel>XPath Patten</guilabel> should end with <code>description</code> and <guilabel>Attribute Name</guilabel> field should be left blank. When finished, click the <guibutton>Preview</guibutton> button to see how many matches are found for that particular XPath.
				</para>

				<figure>
					<title>XPath Preview</title>
					<mediaobject>
						<imageobject>
							<imagedata fileref="images/perspective/perspective_19.png"/>
						</imageobject>
					</mediaobject>
				</figure>

			</section>
		</section>

		<section id="dragndrop_to_jboss_server_view">
			<title>Drag-n-Drop to Servers view</title>

			<para>
				Starting from <productname>JBoss AS Tools</productname> 2.0.0.CR2 the <guilabel>Servers</guilabel> view supports drag-n-drop of deployable and runnable projects and resources.
			</para>

			<figure>
				<title>Dragging to the Servers view</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/perspective/dnd_toJBossServerView.png"/>
					</imageobject>
				</mediaobject>
			</figure>

			<para>With drag-n-drop the following actions can be performed:</para>

			<itemizedlist>
				<listitem>
					<para>Dragging a project to a server will deploy it to the server and run it by showing the main page in a browser.</para>
				</listitem>

				<listitem>
					<para>
						Dragging an <filename>.xhtml</filename> file from the <filename>WebContent</filename> folder will do the same and show the corresponding page in a browser.
					</para>
				</listitem>

				<listitem>
					<para>
						Dragging a deployable resource (i.e. a datasource <filename>-ds.xml</filename> file that has been made deployable) will simply deploy that resource directly to the server.
					</para>
				</listitem>
			</itemizedlist>

			<para>
				In short, the feature does the same thing as if you used the <guimenuitem>Run On Server</guimenuitem> or <guimenuitem>Add and Remove Projects</guimenuitem> option in the context menu of the server.
			</para>
		</section>

		<section id="server_log">
			<title>Server Log View</title>

			<para>
				You can monitor the current server behavior with the help of the <property>Server Log</property>. To open a server in the <property>Server Log view</property> you should right-click on the server and follow to <menuchoice><guimenuitem>Open in</guimenuitem><guimenuitem>Server Log</guimenuitem></menuchoice>.
			</para>

			<para>
				The <guilabel>Server Log</guilabel> view shows relevant information to your server&apos;s startup, shutdown and publish processes. This allows you to keep an eye on what&apos;s going on (such as automatic incremental deployment if you have it enabled).
			</para>

			<figure>
				<title>Event Log Actions</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/perspective/perspective_12.png"/>
					</imageobject>
				</mediaobject>
			</figure>

			<para>The <guilabel>Server Log</guilabel> view toolbar contains several icons that perform the following actions:</para>

			<table>
				<title>Server Log Toolbar Icons</title>
				<tgroup cols="2">
					<colspec colnum="1" align="left" colwidth="1*"/>
					<colspec colnum="2" colwidth="3*"/>

					<thead>
						<row>
							<entry align="center">
								<para>Name</para>
							</entry>

							<entry align="center">
								<para>Description</para>
							</entry>
						</row>
					</thead>

					<tbody>
						<row>
							<entry>
								<para>Export Log</para>
							</entry>
							<entry>
								<para>Allows you to export the log into a text file</para>
							</entry>
						</row>

						<row>
							<entry>
								<para>Clear Log Viewer</para>
							</entry>
							<entry>
								<para>This option clears the current server log</para>
							</entry>
						</row>

						<row>
							<entry>
								<para>Delete Log</para>
							</entry>
							<entry>
								<para>Click to delete the server log</para>
							</entry>
						</row>

						<row>
							<entry>
								<para>Open Log</para>
							</entry>
							<entry>
								<para>Click to open the server log text file</para>
							</entry>
						</row>

						<row>
							<entry>
								<para>Restore Log</para>
							</entry>
							<entry>
								<para>Click to restore the server log</para>
							</entry>
						</row>

					</tbody>
				</tgroup>
			</table>

		</section>

		<section id="server_editor">
			<title>Server Editor</title>
			<para>By double-clicking on any server, an window will appear allowing you to edit the servers settings.</para>

			<figure>
				<title>Preferences Page for the Chosen Server</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/perspective/perspective_4.png"/>
					</imageobject>
				</mediaobject>
			</figure>

			<note>
				<title>Tip:</title>
				<para>
					On the figure you can see that the username and password fields are available. If you get a SecurityException when trying to launch the server, it is most likely because your server is protected, which requires that you need to fill the username and password fields with appropriate values.
				</para>
			</note>
			<para>
				The <guilabel>Server Behaviour</guilabel> settings tab allows you to set how tool interaction with the server should be undertaken.
			</para>
			<para>
				When you created the server, if you selected that it was a local server then you will notice that the option <guilabel>Server is externally managed. Assume server is started</guilabel> is unchecked and the combo-box displays <guimenuitem>Local</guimenuitem>. 
			</para>
			<figure>
				<title>Server Behaviour - Local</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/perspective/perspective_4a.png"/>
					</imageobject>
				</mediaobject>
			</figure>
			<para>
				If you created a remote server then you will see that the combo-box displays <guilabel>Remote System Deployment</guilabel>. Also populated will be the <guilabel>Host</guilabel> and <guilabel>Remote Server Home</guilabel> settings.
			</para>
			<para>
				You are also able to change a servers behaviour from <guilabel>Local</guilabel> to <guilabel>Remote System Deployment</guilabel> through this settings tab. In doing so you will see that the <guilabel>Host</guilabel> is not set by default, but the other fields contain default values. <!-- Once your remote server behaviour is configured, click the <guibutton>Test</guibutton> button to confirm the settings are correct.  -->
			</para>
			<figure>
				<title>Server Behaviour - Remote</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/perspective/perspective_4b.png"/>
					</imageobject>
				</mediaobject>
			</figure>
			<para>
				You can select the <guilabel>Listen on all interfaces to allow remote web connections</guilabel> when using JBoss Application Server 3 to 7 or JBoss Enterprise Application Platform 4 to 6. This option will force the server to launch with the option <option>-b 0.0.0.0</option>. This option will change the host address to 0.0.0.0, useful for testing web applications on your local machine. JMX commands and web browser activities will still use the host set in the <guilabel>General Information</guilabel> section.
			</para>
			<para>
				Under the <guilabel>Publishing</guilabel> section it is possible to disable or enable the automatic publishing of the changes in the workspace.
			</para>

   <para>In the <guilabel>Server editor</guilabel> you are able to edit the timeouts, reload behaviour and the server pollers.</para>
   
   <formalpara>
	   <title>Timeouts</title>
	   <para>
		   The <guilabel>Timeouts</guilabel> section allows you to specify a time limit for the server to complete operations within. If an operation does not start or fails to finish before the times you specify, that operation will be cancelled to avoid server failure.
	   </para>
   </formalpara>
   <figure>
	   <title>Timeouts</title>
	   <mediaobject>
		   <imageobject>
			   <imagedata fileref="images/perspective/perspective_6b.png"/>
		   </imageobject>
	   </mediaobject>
   </figure>
   
   <formalpara>
	   <title>Application Reload Behavior</title>
	   <para>
		  This section of the Server settings allows you to customize the reload behavior of your application, depending on server and module changes.
	   </para>
   </formalpara>
   <figure>
	   <title>Application Reload Behavior</title>
	   <mediaobject>
		   <imageobject>
			   <imagedata fileref="images/perspective/perspective_6c.png"/>
		   </imageobject>
	   </mediaobject>
   </figure>
   
   <formalpara>
	   <title>Server Pollers</title>
   <para>
	   Server pollers are set under the <guilabel>Server State Detectors</guilabel> section. Both <guilabel>Startup</guilabel> and <guilabel>Shutdown</guilabel> pollers can be set individually.
   </para>
   </formalpara>
   <note>
	   <para>
		   By default, the Startup poller is set to Web Port. If you change the Startup poller to Timeout Poller (which may be required if you are using the minimal configuration for your server), this will do no polling at all and will only set the server state to <guilabel>&quot;Started&quot;</guilabel> after your startup timeout is reached.
	   </para>
   </note>
   <figure>
	   <title>Server Pollers</title>
	   <mediaobject>
		   <imageobject>
			   <imagedata fileref="images/perspective/perspective_6a.png"/>
		   </imageobject>
	   </mediaobject>
   </figure>
			
			<para>
				It should be pointed out that the server adapter tries to automatically detect the ports it needs for integrating with a <property>JBoss Server</property> by default. Sometimes it is necessary to override this automatic detection if you are using a custom configuration. The <guilabel>Server Ports</guilabel> section in the <guilabel>Server editor</guilabel> provides fields to customize port settings. Click the <guilabel>Configure...</guilabel> link to bring up the wizard for adjusting the settings for the ports.
			</para>

			<figure>
				<title>Server Ports Preferences</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/perspective/perspective_5.png"/>
					</imageobject>
				</mediaobject>
			</figure>

			<para>Click the <guilabel>Edit XPath</guilabel> button for the chosen port to configure its XPath's values.</para>

			<figure>
				<title>XPath Pattern for a Server Port</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/perspective/perspective_6.png"/>
					</imageobject>
				</mediaobject>
			</figure>
			
			<para id="com_line_arg">
				The <guilabel>Server editor</guilabel> window also allows you to modify the server&apos;s launch configuration. The settings is available by clicking the the <guilabel>Open launch configuration</guilabel> link. The resulting window provides tabs for setting command line arguments, main, classpaths and other things that are relevant to launching the server.
			</para>

			<figure>
				<title>Launch Configuration Properties</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/perspective/perspective_7.png"/>
					</imageobject>
				</mediaobject>
			</figure>
            

			<para>The first tab shows the JBoss server arguments</para>
			<para>
				See the <ulink url="http://docs.jboss.org/jbossas/guides/installguide/r1/en/html/start-stop.html">AS Installation Guide </ulink> to find the parameters that can be specified for <productname>JBoss Server</productname>.
			</para>

			<note>
				<title>Note:</title>
				<para>
					Please note that the values in the Launch Configurations for JBoss Servers are strictly enforced in order to avoid inconsistencies between server&apos;s and their configured runtime.
				</para>

				<para>
					For example, if you change the launch configuration program arguments to <code>&quot;-c myConfig&quot;</code> but do not change the targeted runtime configuration, then your program arguments will be ignored. The configuration of the server runtime &quot;wins&quot; so to speak. This ensures consistency and if you change the location of the runtime, your launch configurations will automatically pick that up.
				</para>

				<para>Values are not controlled by the server and its runtime setup will be passed on unaltered.</para>
			</note>

			<para>
				On the second tab you find the main class used for launching JBoss AS (the default is <code>org.jboss.Main</code>). This value can be changed if necessary.
			</para>

			<para>
				Until <property>JBoss Tools</property> 3.0.0.GA the servers classpath was read only, but that caused problems for users wanting to add their own JARs in the startup classpath. That is relevant if you need to patch the server, add a custom charset or other tweaks that require early access to the classpath.
			</para>

			<para>
				Now all servers have a custom &apos;server runtime classpath container&apos;, which is there by default and point to the default JARs in JBoss. You can now adjust the classpath. Then just make sure this container is there if you want the classpath to be picked up.
			</para>

			<figure>
				<title>Server Classpaths</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/perspective/server_classpaths.png"/>
					</imageobject>
				</mediaobject>
			</figure>

			<para>
				If for some reason you have a launch configuration without this container, the <guibutton>Restore Default Entries</guibutton> button should add it properly. Also, the <guibutton>Restore Default Entries</guibutton> button will remove any extra entries you added yourself.
			</para>
			
			<para>Using <guilabel>Deployment tab</guilabel> you configure local deployment settings.</para>
            

			<figure>
				<title>Deployment tab</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/perspective/perspective_7a.png"/>
					</imageobject>
				</mediaobject>
			</figure>
			<para>
				Using the group of radio buttons in the <guilabel>Default Settings</guilabel> section a user can set where the application will be deployed to. By default it is deployed to the user's workspace folder, <filename>[workspaceDirecotry]\.metadata\.plugins</filename>. If you would like the application to be deployed to your JBoss server deploy folder select the <guilabel>Use the JBoss deploy folder</guilabel> option. The option to specify a custom deploy folder is also available.
			</para>
			<figure>
				<title>Deployment tab - custom deploy folder</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/perspective/perspective_7b.png"/>
					</imageobject>
				</mediaobject>
			</figure>
		</section>

		<section>
			<title>Relevant Resources Links</title>
			<para>Find more about XPath in the <ulink url="http://www.w3.org/TR/xpath20/">XPath Documentation</ulink>.</para>
		</section>
	</section>

	<section id="Project_archivesView" role="updated">
		<title>Project Archives View</title>
		<para>
			Every application, whether Plain Old Java, J2EE, or some other language altogether, needs to be packaged in some way. In Java-related projects, many people use ANT.
		</para>
		<note>
			<title>Note:</title>
			<para>
				Those who use ANT will appreciate how the Project Archives Ant task is now improved: it supports variables and gives more informative error/logging messages when something goes wrong.
			</para>
		</note>

		<para>
			But <productname>JBoss Tools</productname> comes with our own Archives tool with simpler and less-verbose XML and a handy user interface. The Project Archives plugin consists primarily of the <guilabel>Project Archives</guilabel> view to set up each packaging configuration.
		</para>
		
		<para>Let&apos;s look through all functionality that the <guilabel>Project Archives</guilabel> view provides.</para>

		<section id="archives_overview">
			<title>Overview</title>

			<para>
				The packaging configuration for each project is stored in the project's root folder in a file named <filename>.packages</filename>, which has a fairly simple XML structure. Modifying the file by hand is neither required nor recommended, as the UI is the only supported way to modify your packaging structure.
			</para>

			<figure>
				<title>Archives View</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/perspective/perspective_21.png"/>
					</imageobject>
				</mediaobject>
			</figure>

			<para>
				A project&apos;s configuration contains archives. As you can see on the image above a project can contain more than one archive. Internal archives and filesets can be directly inside of an archive, or in a sub-folder of that archive.
			</para>

			<para>
				In the upper right corner of the view you can see an icon which, when clicked, will build the selected top-level archive. Additionally, you can select <menuchoice><guimenuitem>Project</guimenuitem><guimenuitem>Build Packages</guimenuitem></menuchoice> when a project is selected in the <guilabel>Packages View</guilabel> to build all declared packages in that project&apos;s <filename>.packages</filename> file. This will execute a full build on all declared archives.
			</para>
		</section>

		<section id="Creating_Archive">
			<title>Creating an Archive</title>

			<para>
				When you open the <guilabel>Project archives</guilabel> view for the first time, it asks you to select the project for which you want to create an archive.
			</para>

			<figure>
				<title>Archives View</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/perspective/perspective_21a.png"/>
					</imageobject>
				</mediaobject>
			</figure>

			<para>
				When creating a new archive for selected project, you have some different options at your disposal. You need right-click inside the view and select <guimenuitem>New Archive</guimenuitem> to see your archive type options.
			</para>

			<figure>
				<title>Create an Archive</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/perspective/perspective_22.png"/>
					</imageobject>
				</mediaobject>
			</figure>

			<note>
				<title>Note:</title>
				<para>
					If you see only JAR from the list of available archive types, you should verify whether AS Tools plugins are installed. EAR, EJB JAR and WAR options are contributed by the AS Tools independently from webtools and the virtual project model. So without them only the JAR option will show up.
				</para>
			</note>

			<para>
				<filename>JAR</filename> is the standard archive type and does very little configuration, leaving most of the work up to you. You can customize the name, add folders, filesets and inner JARs to it.
			</para>

			<para>
				The other types, for the most part, simply start off with a default setting, usually the JAR with some specific children based on an expected structure of the project. For example, if the project is a Dynamic Web Project and you create a <filename>WAR</filename> archive, the archive will be created with a few filesets relevant to the known structure of the project.
			</para>

			<para>
				Here is the first page of all New archive wizards. It is the same for any archive type and the only page in the <guilabel>New JAR</guilabel> wizard.
			</para>
			<figure>
				<title>New WAR Wizard</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/perspective/perspective_23.png"/>
					</imageobject>
				</mediaobject>
			</figure>

			<para>The page is pretty simple. First it prompts you to set the name of your new archive and a destination.</para>

			<para>
				The destination of an archive can be anywhere on the file system, anywhere in the workspace, inside another archive, or inside a folder declared inside an archive. Select the appropriate checkbox (either <guilabel>workspace</guilabel> or <guilabel>file system</guilabel>) to specify that the destination is related to either the workspace or filesystem. You can browse to workspace or filesystem destinations by clicking on their respective buttons. To select a destination inside some other archive, you'll need to click the <guibutton>Workspace</guibutton> button. At the bottom of the list, you will see the archives that have been declared in the workspace.
			</para>

			<figure>
				<title>Selecting the destination in the workspace</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/perspective/perspective_23a.png"/>
					</imageobject>
				</mediaobject>
			</figure>

			<para>
				Also in the wizard for creating a new archive you can choose whether an archive to be compressed or exploded into a folder (without compression). You need just select proper checkbox in the <guilabel>Archive type</guilabel> section.
			</para>
			
			<para>If a build or incremental update fails Project Archives will show an error dialog:</para>
			<figure>
				<title>Selecting the destination in the workspace</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/perspective/projectarchives_error.png"/>
					</imageobject>
				</mediaobject>
			</figure>
			<para>Click the <guibutton>Details</guibutton> button to view detailed information about the cause of the error.</para>

			<para>In the <guilabel>Package Explorer</guilabel> you can view the created archive.</para>
			<figure>
				<title>The Archive in the Package Explorer</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/perspective/perspective_23b.png"/>
					</imageobject>
				</mediaobject>
			</figure>

			<para>
				If you use the exploded type of archiving, instead of a single file archive the result put into a folder is displayed in the <guilabel>Package Explorer</guilabel>.
			</para>
			
			<figure>
				<title>The Exploded Archive in the Package Explorer</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/perspective/perspective_23c.png"/>
					</imageobject>
				</mediaobject>
			</figure>

			<section id="CreatingaFolder">
				<title>Creating a Folder</title>
				<para>
					To create a folder right-click on an archive or folder you want your new folder to be a child of. The only piece of required information the folder name.
				</para>
			</section>
			<section id="CreatingaFileSet">
				<title>Creating a FileSet</title>
				<para>
					To create a new fileset, right click on an available target location such as an archive, a nested archive, or a folder within an archive and select the <guimenuitem>New Fileset</guimenuitem> option.
				</para>				
				<para>
					The <guilabel>New Fileset</guilabel> wizard requires a destination (where the files will be located) and a root directory (or where the files are coming from). The source can be anywhere in the workspace or from the filesystem at large.
				</para>

				<figure>
					<title>Adding a New FileSet</title>
					<mediaobject>
						<imageobject>
							<imagedata fileref="images/perspective/perspective_24.png"/>
						</imageobject>
					</mediaobject>
				</figure>

				<para>
					Below that, the fileset requires only an <guilabel>Includes</guilabel> and <guilabel>excludes</guilabel> pattern. As you type in either of these fields, the preview viewer will list those files that are matched.
				</para>

				<para>You can create a Fileset with flattening or without it. Look at the difference on the figure below.</para>

				<figure>
					<title>The FileSet with flattening and without it</title>
					<mediaobject>
						<imageobject>
							<imagedata fileref="images/perspective/perspective_24a.png"/>
						</imageobject>
					</mediaobject>
				</figure>

			</section>

			<section id="CreatingaUserLibrariesFileSet">
				<title>Creating User Library FileSet</title>

				<para>
					If you make use of user libraries in your projects you can also refer to these from project archives and have all the JAR and ZIP files they refer included into the archive.
				</para>
				<para>
					To add a new user libraries file set, right-click on the necessary archive and select the <guimenuitem>New User Libraries FileSet</guimenuitem> option.
				</para>

				<figure>
					<title>Adding New User Library Fileset</title>
					<mediaobject>
						<imageobject>
							<imagedata fileref="images/perspective/userlibraryfileset1.png"/>
						</imageobject>
					</mediaobject>
				</figure>

				<para>
					You can edit the existing user libraries as well using <guilabel>User Libraries Fileset</guilabel> Wizard. Right-click on the library fileset and select the <guimenuitem>Edit Fileset</guimenuitem> option.
				</para>

				<figure>
					<title>Editing User Library Fileset</title>
					<mediaobject>
						<imageobject>
							<imagedata fileref="images/perspective/userlibraryfileset2.png"/>
						</imageobject>
					</mediaobject>
				</figure>

			</section>

		</section>

		<section id="View_Actions">
			<title>Archive Actions</title>
			<figure>
				<title>Context Menu on the Item</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/perspective/perspective_25.png"/>
					</imageobject>
				</mediaobject>
			</figure>
			<para>There are a number of variable options in the context menu, but there are also several that come standard.</para>

			<table>
				<title>Context Menu on the Item</title>
				<tgroup cols="2">
					<colspec colnum="1" align="left" colwidth="1*"/>
					<colspec colnum="2" colwidth="3*"/>


					<thead>
						<row>
							<entry align="center">
								<para>Name</para>
							</entry>

							<entry align="center">
								<para>Description</para>
							</entry>
						</row>
					</thead>

					<tbody>

						<row>
							<entry>
								<para>Build Archive (Full)</para>
							</entry>

							<entry>
								<para>This action is enabled only on top-level archives and initiates a full build on that archive</para>
							</entry>
						</row>

						<row>
							<entry>
								<para>Edit Archive</para>
							</entry>

							<entry>
								<para>Standard action that brings up the wizard associated with that particular node type and allows the details to be changed</para>
							</entry>
						</row>

						<row>
							<entry>
								<para>Delete Archive</para>
							</entry>

							<entry>
								<para>This option deletes the selected node</para>
							</entry>
						</row>

						<row>
							<entry>
								<para>Publish To Server</para>
							</entry>

							<entry>
								<para>This action will publish to a declared server</para>
							</entry>
						</row>

						<row>
							<entry>
								<para>Edit publish settings</para>
							</entry>

							<entry>
								<para>This option edits the archives publish settings</para>
							</entry>
						</row>

					</tbody>
				</tgroup>
			</table>

			<note>
				<title>Note:</title>
				<para>When editing an archive, it is also updated in all folders and other archives where it is nested.</para>
			</note>
		</section>

		<section id="PublishToServer">
			<title>Publishing to Server</title>
			<para>
				Finally, you will need to publish your application to a server. This section describes how to do it with the help of the <guilabel>Archives</guilabel> View.
			</para>

			<figure>
				<title>Context Menu on the Item</title>
				<mediaobject>
					<imageobject>
						<imagedata fileref="images/perspective/perspective_26.png"/>
					</imageobject>
				</mediaobject>
			</figure>
			<para>
				The dialog shown above appears after selecting the <guilabel>Publish To Server</guilabel> option. To publish once, select the server(s) that you want and click the <guibutton>Finish</guibutton> button. If you want the <guilabel>Publish to Server</guilabel> action on that particular Archive to always publish to that set of servers, then check the appropriate checkbox. To enable automatic publishing upon build events, check the last checkbox.
			</para>
			<para>
				The automatic publishing feature is nice if, for example, your package's destination (where it is built) is a temporary folder and you want the archive published to several servers. If you only need your archive published to one server, it might be easier to have the archive's destination folder be the deploy folder of the server.
			</para>
		</section>
		<section id="rel_res_links_archiving">
			<title>Relevant Resources Links</title>
			<para>
				Refer to the <ulink url="http://ant.apache.org/manual/index.html">Ant manual</ulink> to find more on how to build your applications using Ant.
			</para>

			<para>
				We also recommend that you watch this <ulink url="http://docs.jboss.org/tools/movies/demos/archiving/archiving.htm">movie</ulink> which demonstrates the powerful archiving functionality in <productname>JBoss Tools</productname>.
			</para>

			<para>
				This chapter has covered the functionality provided by the <property>JBoss AS perspective</property>. The next chapter will explore working with different kinds of projects.
			</para>
		</section>

	</section>


</chapter>
