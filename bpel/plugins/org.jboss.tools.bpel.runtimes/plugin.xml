<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>

<!--=========================================================================-->
<!-- BPEL Designer Runtime Extension Point 									 -->
<!--																		 -->
<!-- Copyright (c) 2006 University College London.							 -->
<!-- All rights reserved. This program and the accompanying materials 		 -->
<!-- are made available under the terms of the Eclipse Public License v1.0	 -->
<!-- which accompanies this distribution, and is available at				 -->
<!-- http://www.eclipse.org/legal/epl-v10.html								 -->
<!--																		 -->
<!--=========================================================================-->

<plugin>
   
<!--=========================================================================-->
<!-- BPEL ModuleType							 							 -->
<!--=========================================================================-->   
   
   <extension point="org.eclipse.wst.server.core.moduleTypes">
      <moduleType
            id="jbt.bpel.module"
            name="%MODULE_TYPE_NAME">
      </moduleType>
   </extension>
   
<!-- The following is needed to make icons for deployable modules occur in   -->
<!-- the Add and Remove Projects wizard										 -->
   
	<extension point="org.eclipse.wst.server.ui.serverImages">
		<image
			id="org.jboss.tools.bpel.runtimes.jbt.bpel.module"
			typeIds="jbt.bpel.module"
			icon="icons/obj16/bpelfacet.gif"/>
	</extension>
   
<!--=========================================================================-->
<!-- BPEL Module Factory													 -->
<!--=========================================================================-->

	<extension
         point="org.eclipse.wst.server.core.moduleFactories">
		<moduleFactory
            projects="true"
            class="org.jboss.tools.bpel.runtimes.module.JBTBPELModuleFactoryDelegate"
            id="org.jboss.tools.bpel.runtimes.module.moduleFactory">
     		<moduleType
               versions="1.1, 2.0"
               types="jbt.bpel.module">
			</moduleType>
     		<moduleType
               versions="1.1, 2.0"
               types="bpel.module">
			</moduleType>
 		</moduleFactory>
     </extension>
     

<!--=========================================================================-->
<!-- TO MAKE PROCESSES ACTUALLY LAUNCHABLE VIA RUN ON SERVER				 -->
<!-- 																		 -->
<!-- Implement org.eclipse.wst.server.core.clients in order to specify the	 -->
<!-- the client app to be used for launching.								 -->
<!-- 																		 -->
<!-- Implement org.eclipse.wst.server.core.launchableAdapters. Might have to -->
<!-- do this in server-specific way or maybe can resuse some generic server	 -->
<!-- framework stuff or maybe can come up with some interface that would	 -->
<!-- allow us to implement in runtimes plug-in.								 -->
<!-- 																		 -->
<!-- N.B. Launching here means launching a Web service. Hence, can do this	 -->
<!-- via the corresponding WTP feature with no code at all from our end.  	 -->
<!-- 																		 -->
<!-- 																		 -->
<!-- 																		 -->
<!--=========================================================================-->

	<extension
      point="org.eclipse.ui.navigator.navigatorContent">
	   <navigatorContent
	         id="org.jboss.tools.bpel.runtimes.ui.view.server.content"
	         activeByDefault="true"
	         contentProvider="org.jboss.tools.bpel.runtimes.ui.view.server.BPELModuleContentProvider"
	         icon="icons/obj16/bpelfacet.gif"
	         labelProvider="org.jboss.tools.bpel.runtimes.ui.view.server.BPELModuleLabelProvider"
	         name="BPEL Modules"
	         priority="highest">
	      <triggerPoints>
	         <instanceof
	               value="java.lang.Object">
	         </instanceof>
	      </triggerPoints>
	      <possibleChildren>
             <instanceof
                value="java.lang.Object">
             </instanceof>
          </possibleChildren>
	      <actionProvider
	            class="org.jboss.tools.bpel.runtimes.ui.view.server.BPELModuleActionProvider"
	            id="org.jboss.tools.bpel.runtimes.ui.view.server.BPELModuleActionProvider"
	            priority="highest">
			<enablement>
             <or>
                <instanceof
                      value="org.eclipse.wst.server.core.IServer">
                </instanceof>
                <instanceof
                      value="org.eclipse.wst.server.ui.internal.view.servers.ModuleServer">
                </instanceof>
                <instanceof
                      value="org.eclipse.core.resources.IWorkspaceRoot">
                </instanceof>
               <adapt type="java.util.Collection">
                  <count value="0"/>
               </adapt>
               <instanceof
                     value="org.jboss.tools.bpel.runtimes.ui.view.server.BPELModuleContentProvider$BPELVersionDeployment">
               </instanceof>
             </or>
            </enablement>
	      </actionProvider>
	   </navigatorContent>
	</extension>
	<extension
	      point="org.eclipse.ui.navigator.viewer">
	   <viewerContentBinding
	         viewerId="org.eclipse.wst.server.ui.ServersView">
	      <includes>
	         <contentExtension
	               isRoot="true"
	               pattern="org.jboss.tools.bpel.runtimes.ui.view.server.content">
	         </contentExtension>
	      </includes>
	   </viewerContentBinding>
	</extension>
  <extension
       point="org.jboss.ide.eclipse.as.core.publishers">
    <publisher
          class="org.jboss.tools.bpel.runtimes.module.JBTBPELPublisher"
          priority="10"
          zipDelegate="false">
    </publisher>
 </extension>

   <extension
         point="org.eclipse.wst.common.project.facet.core.runtimes">
      <supported>
        <runtime-component id="org.jboss.ide.eclipse.as.runtime.component" version="4.2"/>
       <facet id="bpel.facet.core" version="1.1,2.0"/>
     </supported>
      <supported>
        <runtime-component id="org.jboss.ide.eclipse.as.runtime.component" version="5.0"/>
       <facet id="bpel.facet.core" version="1.1,2.0"/>
     </supported>
      <supported>
        <runtime-component id="org.jboss.ide.eclipse.as.runtime.component" version="5.1"/>
       <facet id="bpel.facet.core" version="1.1,2.0"/>
     </supported>
      <supported>
        <runtime-component id="org.jboss.ide.eclipse.as.runtime.component" version="6.0"/>
       <facet id="bpel.facet.core" version="1.1,2.0"/>
     </supported>
   </extension>

</plugin>
