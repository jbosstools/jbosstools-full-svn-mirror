<?xml version="1.0" encoding="UTF-8"?>
<chapter id="tasks">
    <?dbhtml filename="tasks.html"?>
    <chapterinfo>
        <keywordset>
            <keyword>Eclipse</keyword>
            <keyword>JBoss</keyword>
            <keyword>JBoss Tools</keyword>
            <keyword>Maven</keyword>
            <keyword>Seam</keyword>
        </keywordset>
    </chapterinfo>
    <title>Tasks</title>
    <para>This chapter will provide you with the information on how to create mavenized projects and
        import already existing maven project with JBoss Maven Tool.</para>
    <section id="create_mavenized_project">
        <title>Creating Maven ready Seam project</title>
        <para>Maven Integration makes the Seam Wizard capable of creating Maven ready projects to
            let Maven get the libraries instead of using the Seam runtime.</para>
        <para>To create a mavenized Seam project you should perform the following steps:</para>
        <itemizedlist>
            <listitem>
                <para>Navigate to <emphasis>
                        <property>File &gt; New Seam Project</property>.</emphasis> Give the project
                    a meaningful name, specify a target runtime and server and select the proper
                    configuration for your Seam project:</para>
                <figure>
                    <title>Starting the Mavenized Seam Project</title>
                    <mediaobject>
                        <imageobject>
                            <imagedata
                                fileref="images/create_mavenized_seam/createMavenizedSeamProject.png"
                            />
                        </imageobject>
                    </mediaobject>
                </figure>
            </listitem>
            <listitem>
                <para>Click the <emphasis>
                        <property>Modify</property></emphasis> button to enable the <emphasis>
                        <property>Jboss Maven Integration</property></emphasis> facet:</para>
                <figure>
                    <title>Enabling the Jboss Maven Integration Facet</title>
                    <mediaobject>
                        <imageobject>
                            <imagedata
                                fileref="images/create_mavenized_seam/jbossMavenIntegrationFacet.png"
                            />
                        </imageobject>
                    </mediaobject>
                </figure>
            </listitem>
            <listitem>
                <para>On the <property>JBoss M2 capabilities</property> page you&apos;ll be prompted
                    to add the following maven properties: groupId, artifactId, version, packaging,
                    name and description. Here it&apos;s possible to set a maven version of Seam and
                    also decide whether to remove WTP classpath containers (where the path starts
                    with org.eclipse.jst). </para>
                <figure>
                    <title>Adjusting JBoss M2 Capabilities</title>
                    <mediaobject>
                        <imageobject>
                            <imagedata
                                fileref="images/create_mavenized_seam/jbossM2capabilities.png"/>
                        </imageobject>
                    </mediaobject>
                </figure>
            </listitem>
            <listitem>
                <para> On the <property>JSF Capabilities</property> page you can choose Maven as
                    libraries provider. This is possible when you use Maven JSF 1.2 Libraries as
                    type of JSF Implementing Library. Also it gives you capability to edit
                    Dependencies and Exclusions for the mavenized Seam project directly from the
                    wizard. </para>
                <figure>
                    <title>Using JSF Implementation libraries provided by Maven</title>
                    <mediaobject>
                        <imageobject>
                            <imagedata
                                fileref="images/create_mavenized_seam/seamJSFImplementation.png"/>
                        </imageobject>
                    </mediaobject>
                </figure>
            </listitem>
            <listitem>
                <para>On the <property>Seam Facet</property> page configure the Seam Facet settings
                    and click <emphasis>
                        <property>Finish</property>:</emphasis></para>
                <figure>
                    <title>Seam Facet Settings</title>
                    <mediaobject>
                        <imageobject>
                            <imagedata fileref="images/create_mavenized_seam/seamFacetPage.png"/>
                        </imageobject>
                    </mediaobject>
                </figure>
            </listitem>
        </itemizedlist>
        <para>The organized Seam project contains five projects with the Maven nature, builder,
            Maven classpath and the <emphasis>
                <property>pom.xml</property></emphasis> files added: projectname, projectname-ear,
            projectname-ejb, projectname-parent and projectname-test.</para>
        <figure>
            <title>Mavenized Seam Project</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/create_mavenized_seam/mavenizedProjectStructure.png"
                    />
                </imageobject>
            </mediaobject>
        </figure>
    </section>
    <section id="mavenized_portlet">
        <title>Create new mavenized Dynamic Web Project with Portlets</title>
        <para>Select in main <property>Eclipse</property> menu <emphasis><property>File > New >
                Other</property></emphasis>. Then click <emphasis><property>Web > Dynamic Web Project</property></emphasis>. The <property>New Dynamic
            Web Project</property> wizard appears. In this wizard you should specify  <property>Project name</property>, <property>Target
            Runtime</property> and <property>Dynamic Web Module</property>. More about creating Web project with Portlets you can
            find <ulink url="http://download.jboss.org/jbosstools/nightly-docs/en/jboss_portal_tools_ref_guide/html/portlet_tools_tasks.html#jboss_core_portlet">here</ulink>. </para>
        <figure>
            <title>New Dynamic Web Project wizard</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/create_mavenized_portlet/newPortletProject.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        <para>Then you should to configure <property>Project Facets</property>, for that you need click <emphasis><property>Modify</property></emphasis> in
            <property>Configuration</property> area. In <property>Project Facets</property> dialog check <property>JBoss Core Portlet Facet</property> and <property>JBoss Maven Integration Facet</property>, press <emphasis><property>OK</property></emphasis>.</para>
        <figure>
            <title>Project Facets</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/create_mavenized_portlet/mavenIntegrationFacet.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        <para>On the <property>JBoss M2 capabilities</property> page you will be able to add the following <property>Maven</property>
            properties: <property>groupId</property>, <property>artifactId</property>, <property>version</property>, <property>type of packaging</property>, <property>name</property> and <property>description</property>.</para>
        <figure>
            <title>JBoss M2 capabilities page</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/create_mavenized_portlet/jbossM2CapabilitiesPage.png"
                    />
                </imageobject>
            </mediaobject>
        </figure>
        <para>On the <property>JBoss Portlet Capabilities</property> page configure <property>Portlet Implementation Library</property>.
            Select <property>Maven Portlet 2.0 Libraries</property> provided by <property>JBoss Maven Integration Tool</property>. Then you
            can configure <property>Dependencies</property> and <property>Exclusions</property>. </para>
        <figure>
            <title>JBoss Portlet Capabilities page</title>
            <mediaobject>
                <imageobject>
                    <imagedata
                        fileref="images/create_mavenized_portlet/jbossPortletCapabilitiesPage.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        <para>Thereafter click <emphasis><property>Finished</property></emphasis> and you will get a mavenized <property>Dynamic Web Project</property> with
            <property>Portlets</property>. In the same way you can create <property>JSF</property> and <property>Seam Project</property> with <property>JBoss Portlet</property>. </para>
        <figure>
            <title>JBoss Portlet Capabilities page</title>
            <mediaobject>
                <imageobject>
                    <imagedata
                        fileref="images/create_mavenized_portlet/portletProjectWithMavenIntegration.png"
                    />
                </imageobject>
            </mediaobject>
        </figure>
    </section>
    <section id="jpa_project_with_maven">
        <title>Create new JPA project with mavenized Hibernate support</title>
        <para>To create new <property>JPA</property> project select in main Eclipse menu <emphasis><property>File > New > Other</property></emphasis>. Then choose
            <emphasis><property>JPA > JPA Project</property></emphasis>. At the first wizard page enter <property>Project name</property>, select <property>Target Runtime</property>.To add Maven Integration you need to configure <property>Project Facets</property>, for that click <emphasis><property>Modify</property></emphasis> button.</para>
        <figure>
            <title>New JPA project wizard</title>
            <mediaobject>
                <imageobject>
                    <imagedata
                        fileref="images/create_jpa_with_mavenized_hibernate/createJPAProject.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        <para>On the <property>Project Facets</property> page check <property>JBoss Maven Integration Facet</property> .</para>
        <figure>
            <title>Project Facets</title>
            <mediaobject>
                <imageobject>
                    <imagedata
                        fileref="images/create_jpa_with_mavenized_hibernate/projectFacets.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        <para>On the <property>JBoss M2 capabilities</property> page you need specify <property>groupId</property>, <property>artifactId</property>, <property>version</property>, <property>type
            of packaging</property>, <property>name</property> and <property>description</property> <property>Maven</property> properties. </para>
        <figure>
            <title>JBoss M2 capabilities page</title>
            <mediaobject>
                <imageobject>
                    <imagedata
                        fileref="images/create_jpa_with_mavenized_hibernate/jbossM2CapabilitiesPage.png"
                    />
                </imageobject>
            </mediaobject>
        </figure>
        <para>On the <property>JPA Facet </property>page you need select <property>Hibernate</property> as <property>Target Platform</property> and <property>Hibernate 3.3.2 Library</property> as <property>JPA Implementation Type</property>. After that you can <property>Add</property> or <property>Remove</property> <property>Dependencies</property> and <property>Exclusions</property>. At the end you need to choose <property>Database Connection</property> and configuring its options. </para>
        <figure>
            <title>Configuring JPA Facet for mavenized Hibernate support</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/create_jpa_with_mavenized_hibernate/JPAFacet.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        <para>Click <emphasis><property>Finish</property></emphasis> and you will see mavenized <property>JPA</property> project with <property>Hibernate</property> support. <property>Hibernate</property>
            and other libraries used with <property>JPA</property> are managed by <property>Maven Integration Tools</property> and aren't
            included in <property>Build Path</property>. </para>
        <figure>
            <title>Configuring JPA Facet for mavenized Hibernate support</title>
            <mediaobject>
                <imageobject>
                    <imagedata
                        fileref="images/create_jpa_with_mavenized_hibernate/JPAProjectWithMavenizedHibernate.png"
                    />
                </imageobject>
            </mediaobject>
        </figure>
    </section>
    <section id="maven_archetype">
        <title>Create new Seam Project with Portlets using Archetypes</title>
        <para>To create new Maven project with Seam and Portlets from archetype you should have Seam Runtime 2.2 and JBoss AS 5.1.0 Server.</para>
        <para>If you have necessary runtimes select File > New > Project From the Navigator or Project Explorer. After that The Select a wizard dialog appears.</para>
        <figure>
            <title>Select a wizard dialog</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="image/create_maven_project_with_archetype/selectWizardDialog.png"/>
                </imageobject>
                
            </mediaobject>
        </figure>
        <para>Select Maven > Maven Project and you will see a New Maven Project wizard.
        </para>
    
        
    </section>
    
    <section id="maven_project_import">
        <title>Existing Maven Projects Import</title>
        <section id="import_maven_project">
        <title>Seam Projects Import</title>
        <para>Maven Integration includes the Seam Maven configurator which is called when importing
            a project, changing <emphasis>
                <property>pom.xml</property></emphasis> and/or calling <emphasis>
                <property>Maven &gt; Update Project Configuration</property>.</emphasis> When
            importing a Maven Seam project, the Seam Maven configurator picks up the settings set up
            in <emphasis>
                <property>pom.xml</property></emphasis> and adds to the project the
            following:</para>
        <itemizedlist>
            <listitem>
                <para>Seam nature</para>
            </listitem>
            <listitem>
                <para>Seam facet and dependent facets to the EJB, EAR and WAR projects</para>
            </listitem>
            <listitem>
                <para>JBoss Maven Integration facet if the Maven project contains a dependency with
                    the org.jboss.seam groupId and an artifactId starting with 'jboss-seam'</para>
            </listitem>
            <listitem>
                <para>other required facets (Web Module, Java, JSF, etc.)</para>
            </listitem>
        </itemizedlist>
           <para>The Maven Integration Tool will try to define Seam Runtime for the project. If it find that the version from pom.xml matches a version of a Seam runtime, a default runtime for the Seam facet exists or there is a non-default runtime matching the Seam facet then runtime will be set. Otherwise no any Seam runtime will be set and you need manually set it up. 
            </para>
        <para>Seam configurator recognizes the Seam artifacts in the following way: the view folder
            is a web content folder from the WAR project, the source folder is the first Eclipse
            source folder. If there is a folder containing &quot;hot&quot; in the name, it will be
            chosen as the action source folder. Package is the first package that has children or
            doesn&apos;t have any subpackage. </para>
        <para>Configuring the Seam when importing a Maven project as well as a Seam Runtime, Seam
            artifacts and some facets could be suspended in the <link linkend="preferencespage">JBoss Maven Integration preferences</link>
                (<emphasis>
                <property>Window &gt; Preferences &gt; JBoss Tools &gt; JBoss Maven
                    Integration</property></emphasis>).</para>
        
        </section>
    </section>
</chapter>
