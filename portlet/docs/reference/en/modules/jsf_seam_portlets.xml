<?xml version="1.0" encoding="UTF-8"?>
<chapter id="jsf_seam_portlets" xreflabel="jsf_seam_portlets">
    <?dbhtml filename="jsf_seam_portlets.html"?>
    <title>Adding JSF/Seam Portlets to a Dynamic Web Project</title>

    <para>This chapter will explain how you can configure JSF and Seam Portlets within Dynamic Web
        Project by using the wizards <property>JBoss Tools</property> provides.</para>

    <section id="jsf_portlet">
        <title>Adding JSF Portlet to a Dynamic Web Project</title>
        <para>To add JSF Portlet to a Dynamic Web Project, you should set the Configuration to <emphasis>
                <property>JavaServer Faces v1.1 Project</property>
            </emphasis> or <emphasis>
                <property>JavaServer Faces v1.2 Project</property>
            </emphasis> and configure the JSF Portlet Facets in the <property>New Dynamic Web
                Project wizard</property> by clicking the <emphasis>
                <property>Modify</property>
            </emphasis> button.</para>

        <figure>
            <title>Setting the JSF Configuration</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jsf_seam_portlets/jsf_seam_portlets1.png"/>
                </imageobject>
            </mediaobject>
        </figure>

        <para>On the Project Facets dialog you should select <property>JBoss Core Portlet</property>
            and <property>JBoss JSF Portlet</property> check boxes.</para>

        <figure>
            <title>Enabling the Portlet Facets</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jsf_seam_portlets/jsf_seam_portlets2.png"/>
                </imageobject>
            </mediaobject>
        </figure>

        <para>Next wizard page is for configuring JSF Capabilities. You can leave everything as it
            is here.</para>

        <figure>
            <title>JSF Capabilities</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jsf_seam_portlets/jsf_seam_portlets3.png"/>
                </imageobject>
            </mediaobject>
        </figure>

        <para>To support Portlets in JSF/Seam applications <property>JBoss Tools</property> works
            with <property>JBoss Portlet Bridge</property>. Thus on the next page you should add JSF Portlet
            capabilities by pointing to the Portletbridge Runtime location.</para>

        <figure>
            <title>JSF Capabilities</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jsf_seam_portlets/jsf_seam_portlets4.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        <tip>
            <title>Tip:</title>
            
            <para>You can download JBoss Portlet Bridge 1.0.0.B4 from <ulink
                    url="http://www.jboss.org/portletbridge/download/">here</ulink>.</para>
        </tip>

        <para>Next click <emphasis>
                <property>Finish</property>
            </emphasis> to organize the Project.</para>
        <para id="add_jsf_portlet">To add JSF Portlet to generated project you should call the
                <property>Create Portlet wizard</property> by navigating to <emphasis>
                <property>New > Other > JBoss Tools Web > Portlet > JSF/Seam
                Portlet</property>.</emphasis></para>

        <figure>
            <title>Calling New Portlet Wizard</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jsf_seam_portlets/jsf_seam_portlets5.png"/>
                </imageobject>
            </mediaobject>
        </figure>

        <para>As you see, the Seam and JSF Portlet wizards are merged into one. We set JSF
            Configuration for the project, so default values in this wizard will be set as for a JSF
            portlet.</para>

        <figure>
            <title>Creating JSF Portlet</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jsf_seam_portlets/jsf_seam_portlets6.png"/>
                </imageobject>
            </mediaobject>
        </figure>

        <para>Click <emphasis>
                <property>Finish</property>
            </emphasis> to complete JSF Portlet creation. Now you can deploy the project the same
            way as it was <link linkend="deploying_to_portal">described above</link>.</para>

        <para>In the Browser JSF Portlet looks as follows.</para>

        <figure>
            <title>JSF Portlet in the Browser</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jsf_seam_portlets/jsf_seam_portlets7.png"/>
                </imageobject>
            </mediaobject>
        </figure>
    </section>

    <section id="seam_portlet">
        <title>Adding Seam Portlet to a Dynamic Web Project</title>

        <para>To add Seam Portlet to a Dynamic Web Project first you should organize New Dynamic Web
            Project with the Configuration setting to <emphasis>
                <property>JBoss Seam Portlet Project v2.0</property>.</emphasis></para>

        <figure>
            <title>Calling New Portlet Wizard</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jsf_seam_portlets/jsf_seam_portlets8.png"/>
                </imageobject>
            </mediaobject>
        </figure>

        <para>It will add all needed facets to your project. By clicking the <emphasis>
                <property>Modify</property>
            </emphasis> button you can observe the chosen configuration of facets as well as modify
            it. As you can see, all JBoss Portlets are checked.</para>

        <figure>
            <title>Project Facets</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jsf_seam_portlets/jsf_seam_portlets9.png"/>
                </imageobject>
            </mediaobject>
        </figure>

        <para>Next wizard pages are for adjusting the Project Web Modules and JSF Configuration.
            They include default values, so you can skip them by pressing <emphasis>
                <property>Next</property>.</emphasis></para>

        <para>On the <property>Seam Facet</property> page <ulink url="&seamlink;#seamFacet">set
                Connection Profile</ulink> and hit <emphasis>
                <property>Next</property>.</emphasis></para>

        <figure>
            <title>Seam Facet Settings</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jsf_seam_portlets/jsf_seam_portlets10.png"/>
                </imageobject>
            </mediaobject>
        </figure>

        <para>Last wizard page will prompt you to set the path to Portletbridge Runtime
            location.</para>

        <figure>
            <title>Setting the Portletbridge Runtime</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jsf_seam_portlets/jsf_seam_portlets11.png"/>
                </imageobject>
            </mediaobject>
        </figure>

        <tip>
            <title>Tip:</title>

            <para>Thus you should have JBoss Portlet Bridge downloaded and extracted somewhere on
                your hard drive. You can download JBoss Portlet Bridge 1.0.0.B4 from <ulink
                    url="http://www.jboss.org/portletbridge/download/">here</ulink>.</para>
        </tip>

        <para>Now, to add Seam Portlet to the project you should follow to <emphasis>
                <property>New > Other > JBoss Tools Web > Portlet > JSF/Seam
                Portlet</property>.</emphasis> This will call the wizard for creating JSF/Seam
            Portlets.</para>

        <figure>
            <title>Calling the Create Portlet Wizard</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jsf_seam_portlets/jsf_seam_portlets12.png"/>
                </imageobject>
            </mediaobject>
        </figure>

        <para>As we set Seam Configuration for the Dynamic Web Project, the wizard puts the values
            as for Seam Portlet.</para>

        <figure>
            <title>Creating Seam Portlet</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jsf_seam_portlets/jsf_seam_portlets13.png"/>
                </imageobject>
            </mediaobject>
        </figure>

        <para>After creating the Seam Portlet, you should <link linkend="deploying_to_portal">deploy
                the project to JBoss Portal</link> and start the Server. In a Browser
            you&apos;ll see the following:</para>

        <figure>
            <title>Seam Portlet in the Browser</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jsf_seam_portlets/jsf_seam_portlets14.png"/>
                </imageobject>
            </mediaobject>
        </figure>

        <para>Thus in this chapter you&apos;ve learnt how to add JSF/Seam Portlets to a Dynamic
            Web Project.</para>
    </section>
</chapter>
