<?xml version="1.0" encoding="UTF-8"?>
<chapter id="portlets_support" xreflabel="portlets_support">
    <?dbhtml filename="portlets_support.html"?>
    <title>JBoss Portlet Support</title>

    <para><property>JBoss Tools</property> (starting from 3.0 Alpha) support the JSR-168 Portlet
        Specification (Portlet 1.0), JSR-286 Portlet Specification (Portlet 2.0) and work with
            <property>Portlet Bridge</property> for supporting Portlets in JSF/Seam applications.
        All these are performed through the Create New Portlet wizards.</para>

    <para>There are two kinds of the Create Portlet wizards: <property>Java Portlet</property> and
            <property>JSF/Seam Portlet</property>.</para>

    <para>How to create Java Portlet within just organized Dynamic Web Project we will show you
        further in this chapter.</para>

    <section id="adding_java_portlet">
        <title>Adding a Java Portlet to the Project</title>

        <para>Here, we&apos;ll show how you can add a new Java Portlet to our project.</para>

        <para>Call the New Java Portlet wizard by selecting <emphasis>
                <property>New > Other > JBoss Tools Web > Portlet > Java
            Portlet</property>.</emphasis></para>

        <figure>
            <title>New Java Portlet</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/portlets_support/portlets_support_1.png"/>
                </imageobject>
            </mediaobject>
        </figure>

        <para>The wizard fills in The Web Project and Source Folder fields for you. Then you need to
            specify the Java package and the Class name and click <emphasis>
                <property>Next</property>
            </emphasis>.</para>

        <figure>
            <title>Specifying Class File Destination</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/portlets_support/portlets_support_2.png"/>
                </imageobject>
            </mediaobject>
        </figure>

        <para>On the other page you will be able to set the display name of the Portlet, a title, a
            description, the supported modes and init parameters.</para>

        <figure>
            <title>Specifying Class File Destination</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/portlets_support/portlets_support_3.png"/>
                </imageobject>
            </mediaobject>
        </figure>

        <para>On the next screen you can define which methods from
            <emphasis>GenericPortlet</emphasis> you want to override.</para>

        <figure>
            <title>Specifying Class File Destination</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/portlets_support/portlets_support_4.png"/>
                </imageobject>
            </mediaobject>
        </figure>

        <para>The last screen lets you build <property>JBoss Portal</property> specific descriptors
            to create an instance during the deployment and place it directly on the Portal.</para>

        <figure>
            <title>Specifying Class File Destination</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/portlets_support/portlets_support_5.png"/>
                </imageobject>
            </mediaobject>
        </figure>

        <tip>
            <title>Tip:</title>

            <para>If you uncheck the <emphasis> Create Portlet Instance</emphasis> checkbox,
                    <property>JBoss Tools</property> won&apos;t create the deployment elements
                in the <emphasis> default-object.xml</emphasis> and <emphasis>
                portlet-instances.xml</emphasis> files.</para>
        </tip>

        <para>Once Java Portlet is created, new resources have been added to the project structure.
            As you can see on the figure below, it adds a Java Portlet class (<emphasis>
                <property>TestPortlet.java</property>
            </emphasis> in our case), <emphasis>
                <property>default-object.xml</property>
            </emphasis> and <emphasis>
                <property>portlet-instances.xml</property>
            </emphasis> files and updates <emphasis>
                <property>portlet.xml</property>
            </emphasis> as well.</para>

        <figure>
            <title>The structure of Web Project with Java Portlet created</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/portlets_support/portlets_support_6.png"/>
                </imageobject>
            </mediaobject>
        </figure>

        <para>Thus, now the Project is ready to be built and deployed.</para>
    </section>

    <section id="adding_JsfSeam_portlet">
        <title>Adding JSF/Seam Portlets</title>

        <para>What comes to JSF/Seam Portlets, you need to have a Web Project with enabled JSF/Seam
            Portlet Facets. Thus in this case when starting a new Dynamic Web Project, you should
            point to <emphasis>JBoss JSF/Seam Portlet Project v1.0</emphasis> (or
            <emphasis>v2.0</emphasis>) Configuration respectively.</para>

        <figure>
            <title>Dynamic Web Project with JSF/Seam Portlet Facet</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/portlets_support/portlets_support_7.png"/>
                </imageobject>
            </mediaobject>
        </figure>

        <para>To create Portlet in the JSF/Seam Project you should go to <emphasis>
                <property>New > Other > JBoss Tools Web > Portlet > JSF/Seam
            Portlet</property>.</emphasis></para>

        <figure>
            <title>Calling the JSF/Seam Portlet Wizard</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/portlets_support/portlets_support_8.png"/>
                </imageobject>
            </mediaobject>
        </figure>

        <para>If a project contains the Seam Portlet facet, default values in the wizard will be set
            as for a Seam Portlet.</para>

        <figure>
            <title>JBoss JSF/Seam Portlet Wizard Page with JSF defaults</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/portlets_support/portlets_support_9.png"/>
                </imageobject>
            </mediaobject>
        </figure>

        <para>Otherwise, the default values are as defined for a JSF Portlet.</para>

        <figure>
            <title>JBoss JSF/Seam Portlet Wizard Page with Seam defaults</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/portlets_support/portlets_support_10.png"/>
                </imageobject>
            </mediaobject>
        </figure>
    </section>

    <section>
        <title>Deploying a Portlet to JBoss Portal</title>

        <para>You can deploy the created project in the way you deploy any other Web Application.
            Right click on the project and do <emphasis>
                <property>Run As > Run On Server</property>
            </emphasis> and accept the defaults. On the <emphasis>
                <property>Add and Remove Projects</property>
            </emphasis> page move the created Project to the right and click <emphasis>
                <property>Finish</property>.</emphasis></para>

        <figure>
            <title>Deploying the Portlet Application</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/portlets_support/portlets_support_11.png"/>
                </imageobject>
            </mediaobject>
        </figure>

        <para>It will deploy the Portlet Web Application and start <property>JBoss AS</property>.</para>

        <tip>
            <title>Tip:</title>

            <para>You should use <emphasis>http://localhost:8080/portal</emphasis> URL to see your
                Portlet in the Browser.</para>
        </tip>

        <figure>
            <title>Java Portlet in the Browser Window</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/portlets_support/portlets_support_12.png"/>
                </imageobject>
            </mediaobject>
        </figure>

        <para>The JSF Portlet looks in the Browser as follows.</para>

        <figure>
            <title>JSF Portlet in the Browser Window</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/portlets_support/portlets_support_13.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        <para>With this document you&apos;ve learnt how to get started with <property>JBoss
            Portal</property> using <property>JBoss Tools</property> suite of Eclipse plugins. The
            above chapters walked you through the steps on how to organize a web project with portlets
            which includes a sample staff and deploy it onto the <property>JBoss Portal</property>.</para>
        
        <para>If you still have questions or suggestions you are always welcome on our <ulink
            url="http://www.jboss.com/index.html?module=bb&amp;op=viewforum&amp;f=201"
            >Forum</ulink>. Your feedback will be very much appreciated.</para>
    </section>
</chapter>
