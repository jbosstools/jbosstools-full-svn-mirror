<?xml version="1.0" encoding="UTF-8"?>
<chapter id="jsf_portlet" xreflabel="jsf_portlet" role="new">
    <?dbhtml filename="jsf_portlet.html"?>
    <title>Creating JSF Portlet</title>

    <para>This chapter will explain how you can configure JSF Portlet within Dynamic Web
        Project and JSF Project by using the wizards <property>JBoss Tools</property> provides.</para>

    <section id="jsf_portlet1">
        <title>Adding JSF Portlet to Dynamic Web Project</title>
        
        <para>To add JSF Portlet to a Dynamic Web Project, you should set the Configuration to <emphasis>
            <property>JavaServer Faces v1.1 Project</property>
        </emphasis> or <emphasis>
            <property>JavaServer Faces v1.2 Project</property>
        </emphasis> and configure the JSF Portlet Facets in the <property>New Dynamic Web
            Project wizard</property> by clicking the <emphasis>
                <property>Modify</property>
            </emphasis> button.</para>
        
        <figure>
            <title>Setting the JSF Configuration</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jsf_portlet/jsf_portlet1.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        <para>On the Project Facets dialog you should select <property>JBoss Core Portlet</property>
            and <property>JBoss JSF Portlet</property> check boxes.</para>
        
        <figure>
            <title>Enabling the Portlet Facets</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jsf_portlet/jsf_portlet2.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        <para>Next wizard page is for configuring JSF Capabilities. You can leave everything as it
            is here.</para>
        
        <figure>
            <title>JSF Capabilities</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jsf_portlet/jsf_portlet3.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        <para>To support Portlets in JSF/Seam applications <property>JBoss Tools</property> works
            with <property>JBoss Portlet Bridge</property>. Thus on the next page you should add JSF Portlet
            capabilities by pointing to the Portletbridge Runtime location.</para>
        
        <figure>
            <title>JSF Capabilities</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jsf_portlet/jsf_portlet4.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        <tip>
            <title>Tip:</title>
            
            <para>You can download JBoss Portlet Bridge 1.0.0.B4 from <ulink
                url="http://www.jboss.org/portletbridge/download/">here</ulink>.</para>
        </tip>
        
        <para>Next click <emphasis>
            <property>Finish</property>
        </emphasis> to organize the Project.</para>
        <para id="add_jsf_portlet">To add JSF Portlet to generated project you should call the
            <property>Create Portlet wizard</property> by navigating to <emphasis>
                <property>New > Other > JBoss Tools Web > Portlet > JSF/Seam
                    Portlet</property>.</emphasis></para>
        
        <figure>
            <title>Calling New Portlet Wizard</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jsf_portlet/jsf_portlet5.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        <para>As you see, the Seam and JSF Portlet wizards are merged into one. We set JSF
            Configuration for the project, so default values in this wizard will be set as for a JSF
            portlet.</para>
        
        <figure>
            <title>Creating JSF Portlet</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jsf_portlet/jsf_portlet6.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        <para>Click <emphasis>
            <property>Finish</property>
        </emphasis> to complete JSF Portlet creation. Now you can deploy the project the same
            way as it was <link linkend="deploying_to_portal">described above</link>.</para>
        
        <para>In the Browser JSF Portlet looks as follows.</para>
        
        <figure>
            <title>JSF Portlet in the Browser</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jsf_portlet/jsf_portlet7.png"/>
                </imageobject>
            </mediaobject>
        </figure>
    </section>

    <section id="jsf_portlet_to_JSF_project">
        <title>Adding JSF Portlet to JSF Project</title>
        
        <para>How to organize a JSF Project you can find out in our <ulink
            url="&jsfreflink;#new_jsf_project">JSF Tools Reference Guide</ulink>. Just
            remember to point Target Runtime to JBoss Portal directory location.</para>
        
        <figure>
            <title>Creating New JSF Project</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jsf_portlet/jsf_portlet8.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        <para>Before adding a Portlet to the project you should enable necessary facets for it.
            Right-click the created project and click <emphasis>
                <property>Preferences</property>
            </emphasis> to open the <property>Project Preferences</property> screen.</para>
        <para>On the <property>Project Facets</property> page select the <emphasis>
            <property>JBoss Core Portlet</property>
        </emphasis> and <emphasis>
            <property>JBoss JSF Portlet</property>
        </emphasis> checkboxes. And then the screen will ask you to enable <emphasis>
            <property>JavaServer Faces</property>
        </emphasis> facet as well.</para>
        
        <figure>
            <title>Project Facets</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jsf_portlet/jsf_portlet9.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        <para>Notice, <emphasis>
            <property>&quot;Further configuration required...&quot;</property>
        </emphasis> warning appears at the bottom of the screen. It means that you should click
            it to configure JSF and JSF Portlet Capabilities in the project.</para>
        
        <figure>
            <title>JSF Capabilities</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jsf_portlet/jsf_portlet10.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        <figure>
            <title>Project Facets</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/jsf_portlet/jsf_portlet11.png"/>
                </imageobject>
            </mediaobject>
        </figure>
        
        <para>After setting the path to Portletbridge Runtime location, click <emphasis>
            <property>OK</property>
        </emphasis> and then <emphasis>
            <property>OK</property>
        </emphasis> again.</para>
        
        <para>Now you can add JSF Portlet to the generated JSF Project. How to do it we showed in
            <link linkend="add_jsf_portlet">the previous section</link>.</para>
    </section>
</chapter>
