<chapter id="debugging">
	<title>Debugging</title>
	
	<para>Prior to the debugging, we need to set some breakpoints inside the code.</para>
	
	<informaltable frame="none">
	<tgroup cols="2" align="left" colsep="1" rowsep="1">
		<tbody>
			<row>
				<entry>
					<para>Open the <literal>FiboBean.java</literal> file. Double click in left column to create a breakpoint.</para>
					<para>In the example, the breakpoint is set in front of the test.</para>
				</entry>
				<entry>
		            <mediaobject>
		                <imageobject>
		                    <imagedata align="center" fileref="images/breakpoint-bean.jpg"/>
		                </imageobject>
		            </mediaobject>
				</entry>
			</row>
			<row>
				<entry>
					<para>Open the <literal>ComputeServlet.java</literal> file. Double click in left column to create a breakpoint.</para>
					<para>In the example, the breakpoint is set in front of the EJB creation.</para>
				</entry>
				<entry>
		            <mediaobject>
		                <imageobject>
		                    <imagedata align="center" fileref="images/breakpoint-servlet.jpg"/>
		                </imageobject>
		            </mediaobject>
				</entry>
			</row>
		</tbody>
	</tgroup>
	</informaltable>
	
	<para>
		Open a web browser and type <ulink url="http://localhost:8080/fibo/">http://localhost:8080/fibo/</ulink>. The host/port can change if the web server listens on another host/port.
		You should see a simple form like the one above. Enter a positive value in the field and press <literal>Compute</literal>.
	</para>
	
	<mediaobject>
        <imageobject>
            <imagedata align="center" fileref="images/fibo-webbrowser.jpg"/>
        </imageobject>
    </mediaobject>
    
    <para>
	    Switch to your Eclipse workbench. You should see that execution has been suspended on the first breakpoint (in the servlet). You can go step by step in the code or continue with execution.
    </para>
    
	<mediaobject>
        <imageobject>
            <imagedata align="center" fileref="images/debug-servlet.jpg"/>
        </imageobject>
    </mediaobject>
    
    <para>
    	Another suspension occurs when hitting the second breakpoint (in the EJB). You can go step by step in the code or continue with execution.
    </para>
    
	<mediaobject>
        <imageobject>
            <imagedata align="center" fileref="images/debug-bean.jpg"/>
        </imageobject>
    </mediaobject>
    
    <para>
    	After resuming execution, the response should be in the browser. It should look something like this:
    </para>
    
    <mediaobject>
        <imageobject>
            <imagedata align="center" fileref="images/fibo-webbrowser-result.jpg"/>
        </imageobject>
    </mediaobject>
</chapter>